RGraph=window.RGraph||{isRGraph:!0},RGraph.Bar=function(t){if("object"==typeof t&&"object"==typeof t.data&&"string"==typeof t.id)var e=t.id,a=document.getElementById(e),r=t.data,i=!0;else var e=t,a=document.getElementById(e),r=arguments[1];if(this.id=e,this.canvas=a,this.context=this.canvas.getContext("2d"),this.canvas.__object__=this,this.type="bar",this.max=0,this.stackedOrGrouped=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,this.original_colors=[],this.cachedBackgroundCanvas=null,this.firstDraw=!0,this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":!0,"chart.background.grid.color":"#ddd","chart.background.grid.width":1,"chart.background.grid.hsize":20,"chart.background.grid.vsize":20,"chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.grid.dashed":!1,"chart.background.grid.dotted":!1,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.background.color":null,"chart.background.hbars":null,"chart.numyticks":10,"chart.hmargin":5,"chart.hmargin.grouped":1,"chart.strokecolor":"white","chart.axis.color":"black","chart.axis.linewidth":1,"chart.gutter.top":25,"chart.gutter.bottom":30,"chart.gutter.left":25,"chart.gutter.right":25,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.decimals":0,"chart.labels.above.size":null,"chart.labels.above.color":null,"chart.labels.above.angle":null,"chart.labels.above.offset":4,"chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.xlabels.offset":0,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.text.angle":0,"chart.text.color":"black","chart.text.size":10,"chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.font":null,"chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.yaxis.x":null,"chart.title.yaxis.y":null,"chart.title.xaxis.x":null,"chart.title.xaxis.y":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.colors":["Gradient(#F9D5C9:#E65F2D:#E65F2D:#E65F2D)","Gradient(#F7DCD1:#D4592A:#D4592A:#D4592A)","Gradient(#DEE5EA:#B5C3CE:#B5C3CE:#B5C3CE)","Gradient(#E5E5E3:#545451:#545451:#545451)","Gradient(#F6E5D2:#E9C294:#E9C294:#E9C294)","Gradient(#F5EAD3:#D6AA4E:#D6AA4E:#D6AA4E)"],"chart.colors.sequential":!1,"chart.colors.reverse":!1,"chart.grouping":"grouped","chart.variant":"bar","chart.variant.sketch.verticals":!0,"chart.shadow":!0,"chart.shadow.color":"#aaa","chart.shadow.offsetx":0,"chart.shadow.offsety":0,"chart.shadow.blur":15,"chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":!0,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)","chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!1,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.interactive":!1,"chart.key.interactive.highlight.chart.stroke":"black","chart.key.interactive.highlight.chart.fill":"rgba(255,255,255,0.7)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.halign":"right","chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.text.size":10,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.text.color":"black","chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.linewidth":1,"chart.annotatable":!1,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.resizable":!1,"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.noaxes":!1,"chart.noxaxis":!1,"chart.noyaxis":!1,"chart.events.click":null,"chart.events.mousemove":null,"chart.numxticks":null,"chart.bevel":!1},!this.canvas)return void alert("[BAR] No canvas support");for(var o=0;o<r.length;++o)"object"!=typeof r[o]||RGraph.is_null(r[o])||(this.stackedOrGrouped=!0);for(var s=RGraph.array_linearize(r),o=0;o<s.length;++o)this["$"+o]={};this.data=r,this.coords=[],this.coords2=[],this.coordsText=[],this.data_arr=RGraph.array_linearize(this.data),this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0);var h=RGraph,n=this.canvas,l=n.getContext("2d"),c=this.properties,g=(jQuery,h.Path,window,document),u=Math;h.Effects&&"function"==typeof h.Effects.decorate&&h.Effects.decorate(this),this.set=this.Set=function(t){var e="undefined"==typeof arguments[1]?null:arguments[1];if(1===arguments.length&&"object"==typeof arguments[0])return h.parseObjectStyleConfig(this,arguments[0]),this;if(t=t.toLowerCase(),"chart."!=t.substr(0,6)&&(t="chart."+t),"chart.labels.abovebar"==t&&(t="chart.labels.above"),"chart.strokestyle"==t&&(t="chart.strokecolor"),"chart.xaxispos"==t&&("bottom"!=e&&"center"!=e&&"top"!=e&&(alert("[BAR] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+e+" Changing it to center"),e="center"),"top"==e))for(var a=0;a<this.data.length;++a)"number"==typeof this.data[a]&&this.data[a]>0&&alert("[BAR] The data element with index "+a+" should be negative");return"chart.linewidth"==t.toLowerCase()&&0==e&&(e=1e-4),c[t]=e,this},this.get=this.Get=function(t){return"chart."!=t.substr(0,6)&&(t="chart."+t),c[t]},this.draw=this.Draw=function(){return"string"==typeof c["chart.background.image"]&&h.DrawBackgroundImage(this),h.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=c["chart.gutter.left"],this.gutterRight=c["chart.gutter.right"],this.gutterTop=c["chart.gutter.top"],this.gutterBottom=c["chart.gutter.bottom"],("pyramid"==c["chart.variant"]||"dot"==c["chart.variant"])&&"object"==typeof c["chart.tooltips"]&&c["chart.tooltips"]&&c["chart.tooltips"].length>0&&alert("[BAR] ("+this.id+") Sorry, tooltips are not supported with dot or pyramid charts"),this.coords=[],this.coords2=[],this.coordsText=[],this.max=0,this.grapharea=n.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=c["chart.text.size"]/2,h.background.Draw(this),"sketch"==c["chart.variant"]?(this.DrawAxes(),this.Drawbars()):(this.Drawbars(),this.DrawAxes()),this.DrawLabels(),(c["chart.bevel"]||c["chart.bevelled"])&&this.DrawBevel(),c["chart.key"]&&c["chart.key"].length&&h.DrawKey(this,c["chart.key"],c["chart.colors"]),c["chart.contextmenu"]&&h.ShowContext(this),c["chart.labels.ingraph"]&&h.DrawInGraphLabels(this),c["chart.resizable"]&&h.AllowResizing(this),h.InstallEventListeners(this),this.firstDraw&&(h.fireCustomEvent(this,"onfirstdraw"),this.firstDraw=!1,this.firstDrawFunc()),h.fireCustomEvent(this,"ondraw"),this},this.drawAxes=this.DrawAxes=function(){if(!c["chart.noaxes"]){var t=c["chart.xaxispos"],e=c["chart.yaxispos"],a="sketch"==c["chart.variant"];l.beginPath(),l.strokeStyle=c["chart.axis.color"],l.lineWidth=c["chart.axis.linewidth"]+.001,-1==h.ISSAFARI&&(l.lineCap="square"),0==c["chart.noyaxis"]&&("right"==e?(l.moveTo(n.width-this.gutterRight+(a?3:0),this.gutterTop-(a?3:0)),l.lineTo(n.width-this.gutterRight-(a?2:0),n.height-this.gutterBottom+(a?5:0))):(l.moveTo(this.gutterLeft-(a?2:0),this.gutterTop-(a?5:0)),l.lineTo(this.gutterLeft-(a?1:0),n.height-this.gutterBottom+(a?5:0)))),0==c["chart.noxaxis"]&&("center"==t?(l.moveTo(this.gutterLeft-(a?5:0),Math.round((n.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+(a?2:0))),l.lineTo(n.width-this.gutterRight+(a?5:0),Math.round((n.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-(a?2:0)))):"top"==t?(l.moveTo(this.gutterLeft-(a?3:0),this.gutterTop-(a?3:0)),l.lineTo(n.width-this.gutterRight+(a?5:0),this.gutterTop+(a?2:0))):(l.moveTo(this.gutterLeft-(a?5:0),n.height-this.gutterBottom-(a?2:0)),l.lineTo(n.width-this.gutterRight+(a?8:0),n.height-this.gutterBottom+(a?2:0))));var r=c["chart.numyticks"];if(0==c["chart.noyaxis"]&&!a){var i=(n.height-this.gutterTop-this.gutterBottom)/r,o="left"==e?this.gutterLeft:n.width-this.gutterRight;if(this.properties["chart.numyticks"]>0)for(y=this.gutterTop;"center"==t?y<=n.height-this.gutterBottom:y<n.height-this.gutterBottom+("top"==t?1:0);y+=i)("center"!=t||y!=this.gutterTop+this.grapharea/2)&&("top"!=t||y!=this.gutterTop)&&(l.moveTo(o+0,Math.round(y)),l.lineTo(o+("left"==e?-3:3),Math.round(y)));c["chart.noxaxis"]&&("center"==t?(l.moveTo(o+("left"==e?-3:3),Math.round(n.height/2)),l.lineTo(o,Math.round(n.height/2))):"top"==t?(l.moveTo(o+("left"==e?-3:3),Math.round(this.gutterTop)),l.lineTo(o,Math.round(this.gutterTop))):(l.moveTo(o+("left"==e?-3:3),Math.round(n.height-this.gutterBottom)),l.lineTo(o,Math.round(n.height-this.gutterBottom))))}if(0==c["chart.noxaxis"]&&!a){if("number"==typeof c["chart.numxticks"])var s=(n.width-this.gutterLeft-this.gutterRight)/c["chart.numxticks"];else var s=(n.width-this.gutterLeft-this.gutterRight)/this.data.length;"bottom"==t?(yStart=n.height-this.gutterBottom,yEnd=n.height-this.gutterBottom+3):"top"==t?(yStart=this.gutterTop-3,yEnd=this.gutterTop):"center"==t&&(yStart=(n.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+3,yEnd=(n.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-3),yStart=yStart,yEnd=yEnd;var g=c["chart.noendxtick"];for(x=this.gutterLeft+("left"==e?s:0),len=n.width-this.gutterRight+("left"==e?5:0);x<len;x+=s)"left"==e&&!g&&x>this.gutterLeft?(l.moveTo(Math.round(x),yStart),l.lineTo(Math.round(x),yEnd)):"left"==e&&g&&x>this.gutterLeft&&x<n.width-this.gutterRight?(l.moveTo(Math.round(x),yStart),l.lineTo(Math.round(x),yEnd)):"right"==e&&x<n.width-this.gutterRight&&!g?(l.moveTo(Math.round(x),yStart),l.lineTo(Math.round(x),yEnd)):"right"==e&&x<n.width-this.gutterRight&&x>this.gutterLeft&&g&&(l.moveTo(Math.round(x),yStart),l.lineTo(Math.round(x),yEnd));(c["chart.noyaxis"]||null==c["chart.numxticks"])&&"number"==typeof c["chart.numxticks"]&&c["chart.numxticks"]>0&&(l.moveTo(Math.round(this.gutterLeft),yStart),l.lineTo(Math.round(this.gutterLeft),yEnd))}c["chart.noyaxis"]&&0==c["chart.noxaxis"]&&null==c["chart.numxticks"]&&("center"==t?(l.moveTo(Math.round(this.gutterLeft),n.height/2-3),l.lineTo(Math.round(this.gutterLeft),n.height/2+3)):(l.moveTo(Math.round(this.gutterLeft),n.height-this.gutterBottom),l.lineTo(Math.round(this.gutterLeft),n.height-this.gutterBottom+3))),l.stroke()}},this.drawbars=this.Drawbars=function(){l.lineWidth=c["chart.linewidth"],l.strokeStyle=c["chart.strokecolor"],l.fillStyle=c["chart.colors"][0];c["chart.scale.decimals"];if(c["chart.ymax"])this.scale2=RGraph.getScale2(this,{max:c["chart.ymax"],strict:!0,min:c["chart.ymin"],"scale.thousand":c["chart.scale.thousand"],"scale.point":c["chart.scale.point"],"scale.decimals":c["chart.scale.decimals"],"ylabels.count":c["chart.ylabels.count"],"scale.round":c["chart.scale.round"],"units.pre":c["chart.units.pre"],"units.post":c["chart.units.post"]});else{for(o=0;o<this.data.length;++o){if("object"==typeof this.data[o])var t=Number("grouped"==c["chart.grouping"]?h.array_max(this.data[o],!0):h.array_sum(this.data[o]));else var t=Number(this.data[o]);this.max=Math.max(Math.abs(this.max),Math.abs(t))}this.scale2=RGraph.getScale2(this,{max:this.max,min:c["chart.ymin"],"scale.thousand":c["chart.scale.thousand"],"scale.point":c["chart.scale.point"],"scale.decimals":c["chart.scale.decimals"],"ylabels.count":c["chart.ylabels.count"],"scale.round":c["chart.scale.round"],"units.pre":c["chart.units.pre"],"units.post":c["chart.units.post"]}),this.max=this.scale2.max}c["chart.adjustable"]&&!c["chart.ymax"]&&this.Set("chart.ymax",this.scale2.max),c["chart.background.hbars"]&&c["chart.background.hbars"].length>0&&RGraph.DrawBars(this);var e=c["chart.variant"];"3d"==e&&h.Draw3DAxes(this);var a=c["chart.xaxispos"],r=(n.width-this.gutterLeft-this.gutterRight)/this.data.length,i=c["chart.hmargin"],s=c["chart.shadow"],g=c["chart.shadow.color"],u=c["chart.shadow.blur"],d=c["chart.shadow.offsetx"],f=c["chart.shadow.offsety"],p=c["chart.strokecolor"],m=c["chart.colors"],y=0;for(o=0,len=this.data.length;o<len;o+=1){var v=(RGraph.array_sum(this.data[o])<0?RGraph.array_sum(this.data[o])+this.scale2.min:RGraph.array_sum(this.data[o])-this.scale2.min)/(this.scale2.max-this.scale2.min)*(n.height-this.gutterTop-this.gutterBottom);"center"==a&&(v/=2);var b=o*r+this.gutterLeft,x="center"==a?(n.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-v:n.height-v-this.gutterBottom;if("top"==a&&(x=this.gutterTop+Math.abs(v)),0>v&&(x+=v,v=Math.abs(v)),s&&(l.shadowColor=g,l.shadowBlur=u,l.shadowOffsetX=d,l.shadowOffsetY=f),l.beginPath(),"number"==typeof this.data[o]){var R=r-2*i;if(0>R&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),l.strokeStyle=p,l.fillStyle=m[0],c["chart.colors.sequential"]&&(l.fillStyle=m[o]),"sketch"==e){l.lineCap="round";if(l.beginPath(),l.strokeStyle=m[0],c["chart.colors.sequential"]&&(l.strokeStyle=m[o]),l.moveTo(b+i+2,x+v-2),l.lineTo(b+i-1,x-4),l.moveTo(b+i-3,x+-2+(this.data[o]<0?v:0)),l.bezierCurveTo(b+.33*(i+r),x+15+(this.data[o]<0?v-10:0),b+.66*(i+r),x+5+(this.data[o]<0?v-10:0),b+i+r+-1,x+0+(this.data[o]<0?v:0)),l.moveTo(b+i+r-5,x-5),l.lineTo(b+i+r-3,x+v-3),c["chart.variant.sketch.verticals"])for(var G=.2;.8>=G;G+=.2)l.moveTo(b+i+r+(G>.4?-1:3)-G*r,x-1),l.lineTo(b+i+r-(G>.4?1:-1)-G*r,x+v+(.2==G?1:-2));l.stroke()}else if("bar"==e||"3d"==e||"glass"==e||"bevel"==e){if(RGraph.ISOLD&&s&&this.DrawIEShadow([b+i,x,R,v]),"glass"==e?(RGraph.filledCurvyRect(l,b+i,x,R,v,3,this.data[o]>0,this.data[o]>0,this.data[o]<0,this.data[o]<0),RGraph.strokedCurvyRect(l,b+i,x,R,v,3,this.data[o]>0,this.data[o]>0,this.data[o]<0,this.data[o]<0)):(l.beginPath(),l.rect(b+i,x,R,v),l.fill(),h.NoShadow(this),l.beginPath(),l.rect(b+i,x,R,v),l.stroke()),"3d"==e){var _=l.strokeStyle,w=l.fillStyle;l.beginPath(),l.moveTo(b+i,x),l.lineTo(b+i+10,x-5),l.lineTo(b+i+10+R,x-5),l.lineTo(b+i+R,x),l.closePath(),l.stroke(),l.fill(),l.beginPath(),l.moveTo(b+i+R,x),l.lineTo(b+i+R+10,x-5),l.lineTo(b+i+R+10,x+v-5),l.lineTo(b+i+R,x+v),l.closePath(),l.stroke(),l.fill(),l.beginPath(),l.fillStyle="rgba(255,255,255,0.3)",l.moveTo(b+i,x),l.lineTo(b+i+10,x-5),l.lineTo(b+i+10+R,x-5),l.lineTo(b+i+R,x),l.lineTo(b+i,x),l.closePath(),l.stroke(),l.fill(),l.beginPath(),l.fillStyle="rgba(0,0,0,0.4)",l.moveTo(b+i+R,x),l.lineTo(b+i+R+10,x-5),l.lineTo(b+i+R+10,x-5+v),l.lineTo(b+i+R,x+v),l.lineTo(b+i+R,x),l.closePath(),l.stroke(),l.fill(),l.strokeStyle=_,l.fillStyle=w}else if("glass"==e){var T=l.createLinearGradient(b+i,x,b+i+R/2,x);T.addColorStop(0,"rgba(255,255,255,0.9)"),T.addColorStop(1,"rgba(255,255,255,0.5)"),l.beginPath(),l.fillStyle=T,l.fillRect(b+i+2,x+(this.data[o]>0?2:0),R/2-2,v-2),l.fill()}}else"dot"==e?(l.beginPath(),l.moveTo(b+r/2,x),l.lineTo(b+r/2,x+v),l.stroke(),l.beginPath(),l.fillStyle=this.properties["chart.colors"][o],l.arc(b+r/2,x+(this.data[o]>0?0:v),2,0,6.28,0),l.fillStyle=c["chart.colors"][0],c["chart.colors.sequential"]&&(l.fillStyle=m[o]),l.stroke(),l.fill()):alert("[BAR] Warning! Unknown chart.variant: "+e);this.coords.push([b+i,x,r-2*i,v]),"undefined"==typeof this.coords2[o]&&(this.coords2[o]=[]),this.coords2[o].push([b+i,x,r-2*i,v])}else if(this.data[o]&&"object"==typeof this.data[o]&&"stacked"==c["chart.grouping"]){this.scale2.min&&alert("[ERROR] Stacked Bar charts with a Y min are not supported");var R=r-2*i,S=[],j=0,C=this.data[o];for(0>R&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),L=0;L<C.length;++L){if("center"==a)return void alert("[BAR] It's pointless having the X axis position at the center on a stacked bar chart.");if(this.data[o][L]<0)return void alert("[BAR] Negative values are not permitted with a stacked bar chart. Try a grouped one instead.");l.strokeStyle=p,l.fillStyle=m[L],c["chart.colors.reverse"]&&(l.fillStyle=m[this.data[o].length-L-1]),c["chart.colors.sequential"]&&m[y]?l.fillStyle=m[y++]:c["chart.colors.sequential"]&&(l.fillStyle=m[y-1]);var v=C[L]/this.scale2.max*(n.height-this.gutterTop-this.gutterBottom);"center"==a&&(v/=2);{RGraph.array_sum(C)/this.scale2.max*(n.height-i-this.gutterTop-this.gutterBottom)}if(this.coords.push([b+i,x,r-2*i,v]),"undefined"==typeof this.coords2[o]&&(this.coords2[o]=[]),this.coords2[o].push([b+i,x,r-2*i,v]),RGraph.ISOLD&&s&&this.DrawIEShadow([b+i,x,r-2*i,v+1]),v>0&&(l.strokeRect(b+i,x,r-2*i,v),l.fillRect(b+i,x,r-2*i,v)),0==L)var j=x,A=b;if(s&&S.push([b+i,x,r-2*i,v,l.fillStyle]),"3d"==e){var w=l.fillStyle,_=l.strokeStyle;0==L&&(l.beginPath(),l.moveTo(A+i,x),l.lineTo(A+10+i,x-5),l.lineTo(A+10+R+i,x-5),l.lineTo(A+R+i,x),l.closePath(),l.fill(),l.stroke()),l.beginPath(),l.moveTo(A+R+i,x),l.lineTo(A+R+i+10,x-5),l.lineTo(A+R+i+10,x-5+v),l.lineTo(A+R+i,x+v),l.closePath(),l.fill(),l.stroke(),0==L&&(l.fillStyle="rgba(255,255,255,0.3)",l.beginPath(),l.moveTo(A+i,x),l.lineTo(A+10+i,x-5),l.lineTo(A+10+R+i,x-5),l.lineTo(A+R+i,x),l.closePath(),l.fill(),l.stroke()),l.fillStyle="rgba(0,0,0,0.4)",l.beginPath(),l.moveTo(A+R+i,x),l.lineTo(A+R+i+10,x-5),l.lineTo(A+R+i+10,x-5+v),l.lineTo(A+R+i,x+v),l.closePath(),l.fill(),l.stroke(),l.strokeStyle=_,l.fillStyle=w}x+=v}if(s){for(RGraph.NoShadow(this),k=0;k<S.length;++k)l.strokeStyle=p,l.fillStyle=S[k][4],l.strokeRect(S[k][0],S[k][1],S[k][2],S[k][3]),l.fillRect(S[k][0],S[k][1],S[k][2],S[k][3]),l.stroke(),l.fill();S=[]}}else if(this.data[o]&&"object"==typeof this.data[o]&&"grouped"==c["chart.grouping"]){var S=[];for(l.lineWidth=c["chart.linewidth"],L=0;L<this.data[o].length;++L){l.strokeStyle=p,l.fillStyle=m[L],c["chart.colors.sequential"]&&m[y]?l.fillStyle=m[y++]:c["chart.colors.sequential"]&&(l.fillStyle=m[y-1]);var I=(r-2*i)/this.data[o].length,v=(this.data[o][L]+(this.data[o][L]<0?this.scale2.min:-1*this.scale2.min))/(this.scale2.max-this.scale2.min)*(n.height-this.gutterTop-this.gutterBottom),E=c["chart.hmargin.grouped"],A=b+i+L*I;if(0>I&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient."),"center"==a&&(v/=2),"top"==a)var j=this.gutterTop,v=Math.abs(v);else if("center"==a)var j=this.gutterTop+this.grapharea/2-v;else var j=n.height-this.gutterBottom-v,v=Math.abs(v);if(RGraph.ISOLD&&s&&this.DrawIEShadow([A,j,I,v]),l.strokeRect(A+E,j,I-2*E,v),l.fillRect(A+E,j,I-2*E,v),x+=v,"3d"==e){var w=l.fillStyle,_=l.strokeStyle;l.beginPath(),l.moveTo(A,j),l.lineTo(A+10,j-5),l.lineTo(A+10+I,j-5),l.lineTo(A+I,j),l.closePath(),l.fill(),l.stroke(),l.beginPath(),l.moveTo(A+I,j),l.lineTo(A+I+10,j-5),l.lineTo(A+I+10,j-5+v),l.lineTo(A+I,j+v),l.closePath(),l.fill(),l.stroke(),l.fillStyle="rgba(255,255,255,0.3)",l.beginPath(),l.moveTo(A,j),l.lineTo(A+10,j-5),l.lineTo(A+10+I,j-5),l.lineTo(A+I,j),l.closePath(),l.fill(),l.stroke(),l.fillStyle="rgba(0,0,0,0.4)",l.beginPath(),l.moveTo(A+I,j),l.lineTo(A+I+10,j-5),l.lineTo(A+I+10,j-5+v),l.lineTo(A+I,j+v),l.closePath(),l.fill(),l.stroke(),l.strokeStyle=_,l.fillStyle=w}0>v&&(v=Math.abs(v),j-=v),this.coords.push([A+E,j,I-2*E,v]),"undefined"==typeof this.coords2[o]&&(this.coords2[o]=[]),this.coords2[o].push([A+E,j,I-2*E,v]),c["chart.shadow"]&&S.push([A+E,j,I-2*E,v,l.fillStyle])}if(S.length){RGraph.NoShadow(this),l.lineWidth=c["chart.linewidth"],l.beginPath();for(var L=0;L<S.length;++L)l.fillStyle=S[L][4],l.strokeStyle=c["chart.strokecolor"],l.fillRect(S[L][0],S[L][1],S[L][2],S[L][3]),l.strokeRect(S[L][0],S[L][1],S[L][2],S[L][3]);l.fill(),l.stroke(),S=[]}}else this.coords.push([]);l.closePath()}RGraph.NoShadow(this)},this.drawLabels=this.DrawLabels=function(){var t=this.canvas,e=this.context,a=this.properties,r=(a["chart.text.angle"],a["chart.text.size"]),i=a["chart.labels"];if(a["chart.ylabels"]&&("top"==a["chart.xaxispos"]&&this.Drawlabels_top(),"center"==a["chart.xaxispos"]&&this.Drawlabels_center(),"bottom"==a["chart.xaxispos"]&&this.Drawlabels_bottom()),"object"==typeof i&&i){var o=Number(a["chart.xlabels.offset"]);if(0!=a["chart.text.angle"])var s="center",h="right",n=0-a["chart.text.angle"];else var s="top",h="center",n=0;e.fillStyle=a["chart.text.color"];{(t.width-this.gutterRight-this.gutterLeft)/i.length}xTickGap=(t.width-this.gutterRight-this.gutterLeft)/i.length;var l=0,c=a["chart.text.font"];for(x=this.gutterLeft+xTickGap/2;x<=t.width-this.gutterRight;x+=xTickGap)RGraph.Text2(this,{font:c,size:r,x:x,y:"top"==a["chart.xaxispos"]?this.gutterTop-o-5:t.height-this.gutterBottom+o+3,text:String(i[l++]),valign:"top"==a["chart.xaxispos"]?"bottom":s,halign:h,tag:"label",marker:!1,angle:n,tag:"labels"})}this.drawAboveLabels()},this.drawlabels_top=this.Drawlabels_top=function(){var t=this.canvas,e=this.context,a=this.properties;if(e.beginPath(),e.fillStyle=a["chart.text.color"],e.strokeStyle="black","top"==a["chart.xaxispos"]){{var r=a["chart.text.size"],i=a["chart.units.pre"],o=a["chart.units.post"],s="left"==a["chart.yaxispos"]?"right":"left",h=a["chart.text.font"];a["chart.ylabels.count"],a["chart.ymin"]}if(1==a["chart.ylabels.inside"])var n="left"==a["chart.yaxispos"]?this.gutterLeft+5:t.width-this.gutterRight-5,s="left"==a["chart.yaxispos"]?"left":"right",l=!0;else var n="left"==a["chart.yaxispos"]?this.gutterLeft-5:t.width-this.gutterRight+5,l=!1;if("object"==typeof a["chart.ylabels.specific"]&&a["chart.ylabels.specific"]){for(var c=RGraph.array_reverse(a["chart.ylabels.specific"]),g=t.height-this.gutterTop-this.gutterBottom,u=0;u<c.length;++u){var d=this.gutterTop+g*(u/c.length)+g/c.length;RGraph.Text2(this,{font:h,size:r,x:n,y:d,text:String(c[u]),valign:"center",halign:s,bordered:l,tag:"scale"})}return}for(var c=this.scale2.labels,u=0;u<c.length;++u)RGraph.Text2(this,{font:h,size:r,x:n,y:this.gutterTop+this.grapharea/c.length*(u+1),text:"-"+c[u],valign:"center",halign:s,bordered:l,tag:"scale"});(0!=a["chart.ymin"]||a["chart.noxaxis"]||a["chart.scale.zerostart"])&&RGraph.Text2(this,{font:h,size:r,x:n,y:this.gutterTop,text:(0!=this.scale2.min?"-":"")+RGraph.number_format(this,this.scale2.min.toFixed(a["chart.scale.decimals"]),i,o),valign:"center",halign:s,bordered:l,tag:"scale"})}e.fill()},this.drawlabels_center=this.Drawlabels_center=function(){var t=this.canvas,e=this.context,a=this.properties,r=a["chart.text.font"],i=a["chart.ylabels.count"];if(e.fillStyle=a["chart.text.color"],"center"==a["chart.xaxispos"]){{var o=a["chart.text.size"],s=a["chart.units.pre"],n=a["chart.units.post"],l="",c=0,g=!1;a["chart.ymin"]}if(e.fillStyle=a["chart.text.color"],e.strokeStyle="black",1==a["chart.ylabels.inside"])var c="left"==a["chart.yaxispos"]?this.gutterLeft+5:t.width-this.gutterRight-5,l="left"==a["chart.yaxispos"]?"left":"right",g=!0;else var c="left"==a["chart.yaxispos"]?this.gutterLeft-5:t.width-this.gutterRight+5,l="left"==a["chart.yaxispos"]?"right":"left",g=!1;if("object"==typeof a["chart.ylabels.specific"]&&a["chart.ylabels.specific"]){for(var u=a["chart.ylabels.specific"],d=t.height-this.gutterTop-this.gutterBottom,f=0;f<u.length;++f){var p=this.gutterTop+d/2/(u.length-1)*f;RGraph.Text2(this,{font:r,size:o,x:c,y:p,text:String(u[f]),valign:"center",halign:l,bordered:g,tag:"scale"})}for(var f=u.length-1;f>=1;--f){var p=this.gutterTop+d*(f/(2*(u.length-1)))+d/2;h.Text2(this,{font:r,size:o,x:c,y:p,text:String(u[u.length-f-1]),valign:"center",halign:l,bordered:g,tag:"scale"})}return}for(var f=0;f<this.scale2.labels.length;++f){var p=this.gutterTop+this.halfgrapharea-this.halfgrapharea/i*(f+1),m=this.scale2.labels[f];h.Text2(this,{font:r,size:o,x:c,y:p,text:m,valign:"center",halign:l,bordered:g,tag:"scale"})}for(var f=this.scale2.labels.length-1;f>=0;--f){var p=this.gutterTop+this.halfgrapharea/i*(f+1)+this.halfgrapharea,m=this.scale2.labels[f];h.Text2(this,{font:r,size:o,x:c,y:p,text:"-"+m,valign:"center",halign:l,bordered:g,tag:"scale"})}(0!=this.scale2.min||a["chart.scale.zerostart"])&&h.Text2(this,{font:r,size:o,x:c,y:this.gutterTop+this.halfgrapharea,text:RGraph.number_format(this,this.scale2.min.toFixed(a["chart.scale.decimals"]),s,n),valign:"center",valign:"center",halign:l,bordered:g,tag:"scale"})}},this.drawlabels_bottom=this.Drawlabels_bottom=function(){{var t=this.context,e=this.canvas,a=this.properties,r=a["chart.text.size"],i=a["chart.units.pre"],o=a["chart.units.post"],s=(this.context,"left"==a["chart.yaxispos"]?"right":"left"),n=a["chart.text.font"],l=a["chart.ylabels.count"];a["chart.ymin"]}if(t.beginPath(),t.fillStyle=a["chart.text.color"],t.strokeStyle="black",1==a["chart.ylabels.inside"])var c="left"==a["chart.yaxispos"]?this.gutterLeft+5:e.width-this.gutterRight-5,s="left"==a["chart.yaxispos"]?"left":"right",g=!0;else var c="left"==a["chart.yaxispos"]?this.gutterLeft-5:e.width-this.gutterRight+5,g=!1;if(a["chart.ylabels.specific"]&&"object"==typeof a["chart.ylabels.specific"])for(var u=a["chart.ylabels.specific"],d=e.height-this.gutterTop-this.gutterBottom,f=0;f<u.length;++f){var p=this.gutterTop+d*(f/(u.length-1));RGraph.Text2(this,{font:n,size:r,x:c,y:p,text:u[f],valign:"center",halign:s,bordered:g,tag:"scale"})}else{for(var f=(this.gutterTop,this.halfTextHeight,this.scale,0);l>f;++f){var m=this.scale2.labels[f];RGraph.Text2(this,{font:n,size:r,x:c,y:this.gutterTop+this.grapharea-this.grapharea/l*(f+1),text:m,valign:"center",halign:s,bordered:g,tag:"scale"})}(0!=a["chart.ymin"]||a["chart.noxaxis"]||a["chart.scale.zerostart"])&&h.Text2(this,{font:n,size:r,x:c,y:e.height-this.gutterBottom,text:h.number_format(this,this.scale2.min.toFixed(a["chart.scale.decimals"]),i,o),valign:"center",halign:s,bordered:g,tag:"scale"}),t.fill()}},this.drawIEShadow=this.DrawIEShadow=function(t){var e=this.context,a=(this.canvas,this.properties),r=e.fillStyle,i=a["chart.shadow.offsetx"],o=a["chart.shadow.offsety"];e.lineWidth=a["chart.linewidth"],e.fillStyle=a["chart.shadow.color"],e.beginPath(),e.fillRect(t[0]+i,t[1]+o,t[2],t[3]),e.fill(),e.fillStyle=r},this.getShape=this.getBar=function(t){for(var e=arguments[1]?arguments[1]:this,a=RGraph.getMouseXY(t),r=a[0],i=a[1],o=(e.canvas,e.context,e.coords),s=0,h=o.length;h>s;s+=1)if(0!=e.coords[s].length){var n=o[s][0],l=o[s][1],c=o[s][2],g=o[s][3],u=e.properties;if(r>=n&&n+c>=r&&i>=l&&l+g>=i){if(u["chart.tooltips"])var d=RGraph.parseTooltipText?RGraph.parseTooltipText(u["chart.tooltips"],s):u["chart.tooltips"][s];for(var f=0,p=s;p>=("object"==typeof e.data[f]&&e.data[f]?e.data[f].length:1);)p-="number"==typeof e.data[f]?1:e.data[f]?e.data[f].length:1,f++;return"number"==typeof e.data[f]&&(p=null),{0:e,1:n,2:l,3:c,4:g,5:s,object:e,x:n,y:l,width:c,height:g,index:s,tooltip:d,index_adjusted:p,dataset:f}}}return null},this.getShapeByX=function(t){for(var e=(t.target,RGraph.getMouseXY(t)),a=arguments[1]?arguments[1]:this,r=0,i=a.coords.length;i>r;r++)if(0!=a.coords[r].length){var o=e[0],s=(e[1],a.coords[r][0]),h=a.coords[r][1],n=a.coords[r][2],l=a.coords[r][3],c=a.properties;if(o>=s&&s+n>=o){if(c["chart.tooltips"])var g=RGraph.parseTooltipText?RGraph.parseTooltipText(c["chart.tooltips"],r):c["chart.tooltips"][r];return{0:a,1:s,2:h,3:n,4:l,5:r,object:a,x:s,y:h,width:n,height:l,index:r,tooltip:g}}}return null},this.getValue=function(t){var e=(this.context,this.canvas),a=this.properties;if(2==t.length)var r=t[0],i=t[1];else var o=RGraph.getMouseXY(t),r=o[0],i=o[1];if(i<a["chart.gutter.top"]||i>e.height-a["chart.gutter.bottom"]||r<a["chart.gutter.left"]||r>e.width-a["chart.gutter.right"])return null;if("center"==a["chart.xaxispos"]){var s=(this.grapharea/2-(i-a["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);s*=2,s>=0?s+=this.scale2.min:s-=this.scale2.min}else if("top"==a["chart.xaxispos"]){var s=(this.grapharea-(i-a["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);s=this.scale2.max-s,s=-1*Math.abs(s)}else{var s=(this.grapharea-(i-a["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);s+=this.scale2.min}return s},this.getYCoord=function(t){if(t>this.scale2.max)return null;var e,a=(this.context,this.canvas),r=this.properties,i=r["chart.xaxispos"];return"top"==i?(0>t&&(t=Math.abs(t)),e=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,e+=this.gutterTop):"center"==i?(e=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*(this.grapharea/2),e=this.grapharea/2-e,e+=this.gutterTop):(t<this.scale2.min&&(t=this.scale2.min),e=(t-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea,e=a.height-this.gutterBottom-e),e},this.highlight=this.Highlight=function(t){RGraph.Highlight.Rect(this,t)},this.getObjectByXY=function(t){var e=this.canvas,a=this.properties,r=RGraph.getMouseXY(t);return r[0]>=a["chart.gutter.left"]&&r[0]<=e.width-a["chart.gutter.right"]&&r[1]>=a["chart.gutter.top"]&&r[1]<=e.height-a["chart.gutter.bottom"]?this:void 0},this.adjusting_mousemove=this.Adjusting_mousemove=function(t){if(c["chart.adjustable"]&&h.Registry.Get("chart.adjusting")&&h.Registry.Get("chart.adjusting").uid==this.uid){var e=Number(this.getValue(t)),a=this.getShapeByX(t);if(a){if(h.Registry.Set("chart.adjusting.shape",a),this.stackedOrGrouped&&"grouped"==c["chart.grouping"]){var r=h.sequentialIndexToGrouped(a.index,this.data);"number"==typeof this.data[r[0]]?this.data[r[0]]=Number(e):h.is_null(this.data[r[0]])||(this.data[r[0]][r[1]]=Number(e))}else"number"==typeof this.data[a.index]&&(this.data[a.index]=Number(e));h.redrawCanvas(t.target),h.fireCustomEvent(this,"onadjust")}}},this.positionTooltip=function(t,e,a,r){var i=t.properties,o=t.coords[r.__index__][0],s=t.coords[r.__index__][1],h=t.coords[r.__index__][2],n=t.coords[r.__index__][3],l=RGraph.getCanvasXY(t.canvas),c=(i["chart.gutter.left"],i["chart.gutter.top"],r.offsetWidth),u=r.offsetHeight,d=t.data_arr[r.__index__];r.style.left=0,r.style.top=l[1]+s-u-7+"px",0>d&&(r.style.top=l[1]+s+n+7+"px"),r.style.overflow="";var f=new Image;f.style.position="absolute",f.id="__rgraph_tooltip_pointer__",d>=0?(f.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",f.style.top=r.offsetHeight-2+"px"):(f.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAMAAACkeOZkAAAAK3RFWHRDcmVhdGlvbiBUaW1lAFNhdCA2IE9jdCAyMDEyIDEyOjQ5OjMyIC0wMDAw2S1RlgAAAAd0SU1FB9wKBgszM4Ed2k4AAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAEZ0FNQQAAsY8L/GEFAAAACVBMVEX/AAC9vb3//+92Pom0AAAAAXRSTlMAQObYZgAAAB1JREFUeNpjYAABRgY4YGRiRDCZYBwQE8qBMEEcAANCACqByy1sAAAAAElFTkSuQmCC",f.style.top="-5px"),r.appendChild(f),l[0]+o+h/2-c/2<10?(r.style.left=l[0]+o-.1*c+h/2+"px",f.style.left=.1*c-8.5+"px"):l[0]+o+c/2>g.body.offsetWidth?(r.style.left=l[0]+o-.9*c+h/2+"px",f.style.left=.9*c-8.5+"px"):(r.style.left=l[0]+o+h/2-.5*c+"px",f.style.left=.5*c-8.5+"px")},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors["chart.colors"]=RGraph.array_clone(c["chart.colors"]),this.original_colors["chart.key.colors"]=RGraph.array_clone(c["chart.key.colors"]),this.original_colors["chart.crosshairs.color"]=c["chart.crosshairs.color"],this.original_colors["chart.highlight.stroke"]=c["chart.highlight.stroke"],this.original_colors["chart.highlight.fill"]=c["chart.highlight.fill"],this.original_colors["chart.text.color"]=c["chart.text.color"],this.original_colors["chart.background.barcolor1"]=c["chart.background.barcolor1"],this.original_colors["chart.background.barcolor2"]=c["chart.background.barcolor2"],this.original_colors["chart.background.grid.color"]=c["chart.background.grid.color"],this.original_colors["chart.background.color"]=c["chart.background.color"],this.original_colors["chart.strokecolor"]=c["chart.strokecolor"],this.original_colors["chart.axis.color"]=c["chart.axis.color"]);
var t=c["chart.colors"];if(t)for(var e=0;e<t.length;++e)t[e]=this.parseSingleColorForGradient(t[e]);var t=c["chart.key.colors"];if(t)for(var e=0;e<t.length;++e)t[e]=this.parseSingleColorForGradient(t[e]);c["chart.crosshairs.color"]=this.parseSingleColorForGradient(c["chart.crosshairs.color"]),c["chart.highlight.stroke"]=this.parseSingleColorForGradient(c["chart.highlight.stroke"]),c["chart.highlight.fill"]=this.parseSingleColorForGradient(c["chart.highlight.fill"]),c["chart.text.color"]=this.parseSingleColorForGradient(c["chart.text.color"]),c["chart.background.barcolor1"]=this.parseSingleColorForGradient(c["chart.background.barcolor1"]),c["chart.background.barcolor2"]=this.parseSingleColorForGradient(c["chart.background.barcolor2"]),c["chart.background.grid.color"]=this.parseSingleColorForGradient(c["chart.background.grid.color"]),c["chart.background.color"]=this.parseSingleColorForGradient(c["chart.background.color"]),c["chart.strokecolor"]=this.parseSingleColorForGradient(c["chart.strokecolor"]),c["chart.axis.color"]=this.parseSingleColorForGradient(c["chart.axis.color"])},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;if(t.match(/^gradient\((.*)\)$/i)){var e=RegExp.$1.split(":"),a=l.createLinearGradient(0,n.height-c["chart.gutter.bottom"],0,c["chart.gutter.top"]),r=1/(e.length-1);a.addColorStop(0,h.trim(e[0]));for(var i=1,o=e.length;o>i;++i)a.addColorStop(i*r,RGraph.trim(e[i]))}return a?a:t},this.drawBevel=this.DrawBevel=function(){var t=this.coords,e=this.coords2,a=this.properties,r=this.context,i=this.canvas;if("stacked"==a["chart.grouping"]){for(var o=0;o<e.length;++o)if(e[o]&&e[o][0]&&e[o][0][0]){for(var s=e[o][0][0],h=e[o][0][1],n=e[o][0][2],l=[],c=0;c<e[o].length;++c)l.push(e[o][c][3]);var g=RGraph.array_sum(l);r.save(),r.strokeStyle="black",r.beginPath(),r.rect(s,h,n,g),r.clip(),r.shadowColor="black",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=20,r.beginPath(),r.rect(s-3,h-3,n+6,g+100),r.lineWidth=5,r.stroke(),r.restore()}}else for(var o=0;o<t.length;++o)if(t[o]){var s=t[o][0],h=t[o][1],n=t[o][2],g=t[o][3],u=a["chart.xaxispos"],d=(i.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop;r.save(),r.strokeStyle="black",r.beginPath(),r.rect(s,h,n,g),r.clip(),r.shadowColor="black",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=20,"top"==u||"center"==u&&h+g>d?(h-=100,g+=100):(h=h,g+=100),r.beginPath(),r.rect(s-3,h-3,n+6,g+6),r.lineWidth=5,r.stroke(),r.restore()}},this.interactiveKeyHighlight=function(t){this.coords2.forEach(function(e){if("object"==typeof e[t]&&e[t]){var a=e[t][0],r=e[t][1],i=e[t][2],o=e[t][3];l.fillStyle=c["chart.key.interactive.highlight.chart.fill"],l.strokeStyle=c["chart.key.interactive.highlight.chart.stroke"],l.lineWidth=2,l.strokeRect(a,r,i,o),l.fillRect(a,r,i,o)}})},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),this[t]=e,this},this.drawAboveLabels=function(){var t=c["chart.labels.above"],e=c["chart.labels.above.specific"],a=c["chart.labels.above.color"],r=c["chart.labels.above.decimals"],i=c["chart.labels.above.size"],o=-1*c["chart.labels.above.angle"],s=(this.coords,this.coords2),n=this.data,g=(h.arrayLinearize(this.data),c["chart.labels.above.offset"]),u=c["chart.text.font"],d=c["chart.text.size"],f=c["chart.grouping"];if(h.noShadow(this),l.fillStyle="string"==typeof a?a:c["chart.text.color"],t&&"grouped"===f){for(var p=0,m=n.length,y=0;m>p;p+=1)if("number"==typeof n[p]&&n[p]>=0){var o=o,v=o?"left":"center",b=0!==o?"center":"bottom";h.text2(this,{font:u,size:"number"==typeof i?i:d-3,x:s[p][0][0]+s[p][0][2]/2,y:s[p][0][1]-g,text:e?e[y]||"":h.numberFormat(this,Number("object"==typeof n[p]?n[p][0]:n[p]).toFixed(r)),halign:v,valign:b,angle:o,marker:!1,bounding:!1,tag:"labels.above"}),y++}else if("number"==typeof n[p]&&n[p]<0){var o=o,v=o?"right":"center",b=0!==o?"center":"top";h.text2(this,{font:u,size:"number"==typeof i?i:d-3,x:s[p][0][0]+s[p][0][2]/2,y:s[p][0][1]+s[p][0][3]+g,text:e?e[y]||"":h.numberFormat(this,Number("object"==typeof n[p]?n[p][0]:n[p]).toFixed(r)),halign:v,valign:b,angle:o,bounding:!1,marker:!1,tag:"labels.above"}),y++}else if("object"==typeof n[p])for(var x=0,R=n[p].length;R>x;x+=1){var o=o,v=n[p][x]<0?"right":"left";v=0===o?"center":v;var b=n[p][x]<0?"top":"bottom";b=0!=o?"center":b,h.text2(this,{font:u,size:"number"==typeof i?i:d-3,x:s[p][x][0]+s[p][x][2]/2,y:s[p][x][1]+(n[p][x]<0?s[p][x][3]+g:-g),text:e?e[y]||"":h.numberFormat(this,Number(n[p][x]).toFixed(r)),halign:v,valign:b,angle:o,bounding:!1,marker:!1,tag:"labels.above"}),y++}}else if(t&&"stacked"===f)for(var p=0,m=n.length,y=0;m>p;p+=1)if("object"==typeof n[p]){var o=o,v=0!=o?"left":"center",b=0!=o?"center":"bottom";h.text2(this,{font:u,size:"number"==typeof i?i:d-3,x:s[p][0][0]+s[p][0][2]/2,y:s[p][0][1]+(n[p][0]<0?s[p][0][3]:0)-g,text:e?e[y]||"":h.numberFormat(this,Number(h.arraySum(n[p])).toFixed(r)),halign:v,valign:b,angle:o,bounding:!1,marker:!1,tag:"labels.above"}),y+=n[p].length}else{var o=o,v=0!=o?"left":"center",b=0!=o?"center":"bottom";h.text2(this,{font:u,size:"number"==typeof i?i:d-3,x:s[p][0][0]+s[p][0][2]/2,y:s[p][0][1]+(n[p][0]<0?s[p][0][3]:0)-g,text:e?e[y]||"":h.numberFormat(this,Number(n[p]).toFixed(r)),halign:v,valign:b,angle:o,bounding:!1,marker:!1,tag:"labels.above"}),y++}},this.firstDrawFunc=function(){},this.waveOld=function(){function t(a,n){if(o[a]<=n){if("number"==typeof e.data[a])e.data[a]=o[a]/n*i[a];else if("object"==typeof e.data[a])for(var l=0,c=i[a].length;c>l;++l)e.data[a][l]=o[a]/n*i[a][l];h.clear(e.canvas),h.redrawCanvas(e.canvas),++o[a],h.Effects.updateCanvas(function(){t(a,n)})}else a===s-1&&r(e)}var e=this,a=arguments[0]?arguments[0]:{};a.frames=a.frames?a.frames:15,a.delay=a.delay||50;var r=arguments[1]?arguments[1]:function(){},i=[],o=[],s=e.data.length;e.draw(),e.Set("chart.ymax",e.scale2.max),h.clear(e.canvas);for(var n=0,l=s;l>n;++n)!function(r){i[r]=e.data[r],e.data[r]="object"==typeof e.data[r]?[]:0,o[r]="object"==typeof e.data[r]?[]:0,setTimeout(function(){t(r,a.frames)},a.delay*r)}(n);return this},this.wave=function(){function t(){++i;for(var n=0,l=e.data.length;l>n;n+=1)if(i>a.startFrames[n]){if("number"==typeof e.data[n])e.data[n]=u.min(u.abs(s[n]),u.abs(s[n]*(a.counters[n]++/r))),s[n]<0&&(e.data[n]*=-1);else if(!h.isNull(e.data[n]))for(var c=0,g=e.data[n].length;g>c;c+=1)e.data[n][c]=u.min(u.abs(s[n][c]),u.abs(s[n][c]*(a.counters[n][c]++/r))),s[n][c]<0&&(e.data[n][c]*=-1)}else e.data[n]="object"==typeof e.data[n]&&e.data[n]?h.arrayPad([],e.data[n].length,0):h.isNull(e.data[n])?null:0;i>=a.frames?o(e):(h.redrawCanvas(e.canvas),h.Effects.updateCanvas(t))}var e=this,a=arguments[0]||{};a.frames=a.frames||60,a.startFrames=[],a.counters=[];for(var r=a.frames/3,i=-1,o=arguments[1]||function(){},s=h.arrayClone(e.data),n=0,l=e.data.length;l>n;n+=1)if(a.startFrames[n]=a.frames/2/(e.data.length-1)*n,"object"==typeof e.data[n]&&e.data[n]){a.counters[n]=[];for(var c=0;c<e.data[n].length;c++)a.counters[n][c]=0}else a.counters[n]=0;return e.draw(),e.Set("ymax",e.scale2.max),h.clear(e.canvas),t(),this},this.grow=function(){var t=arguments[0]||{},e=t.frames||30,a=0,r=arguments[1]||function(){},i=this;if(i.original_data=RGraph.array_clone(i.data),null==i.Get("chart.ymax")){for(var o=0,s=0;s<i.data.length;++s)o=h.is_array(i.data[s])&&"stacked"==i.Get("chart.grouping")?u.max(o,u.abs(h.array_sum(i.data[s]))):h.is_array(i.data[s])&&"grouped"==i.Get("chart.grouping")?u.max(o,u.abs(h.array_max(i.data[s]))):u.max(o,u.abs(i.data[s]));var n=RGraph.getScale2(i,{max:o});i.Set("chart.ymax",n.max)}var l=function(){for(var t=h.Effects.getEasingMultiplier(e,a),o=0,s=i.original_data.length;s>o;++o)if("object"==typeof i.data[o])for(var n=0,c=i.data[o].length;c>n;++n)i.data[o][n]=t*i.original_data[o][n];else i.data[o]=t*i.original_data[o];RGraph.redrawCanvas(i.canvas),e>a?(a+=1,h.Effects.updateCanvas(l)):r(i)};return l(),this},h.att(n),h.register(this),i&&h.parseObjectStyleConfig(this,t.options)},RGraph.CombinedChart=function(){function t(t){var e=t.Get("chart.gutter.left"),a=t.Get("chart.gutter.right");t.Set("chart.hmargin",(t.canvas.width-e-a)/(2*t.original_data[0].length))}this.objects=[];var e=arguments;RGraph.is_array(arguments[0])&&(e=arguments[0]);for(var a=0;a<e.length;++a)if(this.objects[a]=e[a],this.objects[a].Set("chart.gutter.left",this.objects[0].Get("chart.gutter.left")),this.objects[a].Set("chart.gutter.right",this.objects[0].Get("chart.gutter.right")),this.objects[a].Set("chart.gutter.top",this.objects[0].Get("chart.gutter.top")),this.objects[a].Set("chart.gutter.bottom",this.objects[0].Get("chart.gutter.bottom")),"line"==this.objects[a].type&&(this.objects[a].Set("chart.hmargin",(this.objects[0].canvas.width-this.objects[0].Get("chart.gutter.right")-this.objects[0].Get("chart.gutter.left"))/this.objects[0].data.length/2),this.objects[a].Set("chart.noaxes",!0),this.objects[a].Set("chart.background.grid",!1),this.objects[a].Set("chart.ylabels",!1)),this.objects[a].Get("chart.resizable"))var r=this.objects[a];r&&RGraph.AddCustomEventListener(r,"onresizebeforedraw",t)},RGraph.CombinedChart.prototype.add=RGraph.CombinedChart.prototype.Add=function(t){this.objects.push(t)},RGraph.CombinedChart.prototype.draw=RGraph.CombinedChart.prototype.Draw=function(){for(var t=0;t<this.objects.length;++t)this.objects[t].Draw()},RGraph=window.RGraph||{isRGraph:!0},function(t){RGraph,navigator.userAgent,Math;RGraph.installWindowMousedownListener=RGraph.InstallWindowMousedownListener=function(){RGraph.window_mousedown_event_listener||(RGraph.window_mousedown_event_listener=function(e){navigator.userAgent.indexOf("Firefox")>=0&&(t.event=e),e=RGraph.FixEventObject(e),RGraph.HideTooltip&&RGraph.Registry.Get("chart.tooltip")&&(RGraph.clear(RGraph.Registry.Get("chart.tooltip").__canvas__),RGraph.redraw(),RGraph.hideTooltip())},t.addEventListener("mousedown",RGraph.window_mousedown_event_listener,!1))},RGraph.installWindowMouseupListener=RGraph.InstallWindowMouseupListener=function(){RGraph.window_mouseup_event_listener||(RGraph.window_mouseup_event_listener=function(e){if(navigator.userAgent.indexOf("Firefox")>=0&&(t.event=e),e=RGraph.FixEventObject(e),RGraph.Annotating_window_onmouseup)return void RGraph.Annotating_window_onmouseup(e);if(RGraph.Registry.Get("chart.adjusting")||RGraph.Registry.Get("chart.adjusting.gantt")){var a=RGraph.Registry.Get("chart.adjusting");a&&"line"===a.type&&(a.data_arr=RGraph.arrayLinearize(a.data)),RGraph.FireCustomEvent(RGraph.Registry.Get("chart.adjusting"),"onadjustend")}RGraph.Registry.Set("chart.adjusting",null),RGraph.Registry.Set("chart.adjusting.shape",null),RGraph.Registry.Set("chart.adjusting.gantt",null);for(var r=document.getElementsByTagName("canvas"),i=0;i<r.length;++i)if(r[i].__object__&&r[i].__object__.isRGraph&&!r[i].__object__.Get("chart.annotatable"))if(r[i].__rgraph_trace_cover__||o)var o=!0;else RGraph.Clear(r[i]);o||RGraph.Redraw()},t.addEventListener("mouseup",RGraph.window_mouseup_event_listener,!1))},RGraph.installCanvasMouseupListener=RGraph.InstallCanvasMouseupListener=function(t){t.canvas.rgraph_mouseup_event_listener||(t.canvas.rgraph_mouseup_event_listener=function(t){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=t),t=RGraph.FixEventObject(t);var e=RGraph.ObjectRegistry.getObjectsByXY(t);if(e)for(var a=0,r=e.length;r>a;a+=1){var i=e[a],o=(e[a].id,i.Get("link"));if("drawing.text"==i.type&&"string"==typeof o){var s=i.Get("link.target"),h=i.Get("link.options");window.open(o,s?s:null,h)}if(!RGraph.is_null(i)&&RGraph.Tooltip){var n=i.getShape(t);if(n&&n.tooltip){var l=n.tooltip;if(l){var c=n.object.type;if("line"==c||"rscatter"==c||"scatter"==c&&!i.Get("chart.boxplot")||"radar"==c)var g=RGraph.getCanvasXY(i.canvas),u=g[0]+n.x,d=g[1]+n.y;else var u=t.pageX,d=t.pageY;return RGraph.Clear(i.canvas),RGraph.Redraw(),i.Highlight(n),RGraph.Registry.Set("chart.tooltip.shape",n),RGraph.Tooltip(i,l,u,d,n.index,t),RGraph.Registry.Get("chart.tooltip")&&(RGraph.Registry.Get("chart.tooltip").__shape__=n,RGraph.EvaluateCursor(t)),t.cancelBubble=!0,t.stopPropagation(),!1}}}if((RGraph.Registry.Get("chart.adjusting")||RGraph.Registry.Get("chart.adjusting.gantt"))&&(i&&"line"===i.type&&(i.data_arr=RGraph.arrayLinearize(i.data)),RGraph.FireCustomEvent(RGraph.Registry.Get("chart.adjusting"),"onadjustend")),RGraph.Registry.Set("chart.adjusting",null),RGraph.Registry.Set("chart.adjusting.shape",null),RGraph.Registry.Set("chart.adjusting.gantt",null),n||i.overChartArea&&i.overChartArea(t))break}},t.canvas.addEventListener("mouseup",t.canvas.rgraph_mouseup_event_listener,!1))},RGraph.installCanvasMousemoveListener=RGraph.InstallCanvasMousemoveListener=function(t){t.canvas.rgraph_mousemove_event_listener||(t.canvas.rgraph_mousemove_event_listener=function(t){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=t),t=RGraph.FixEventObject(t);var e=RGraph.ObjectRegistry.getObjectsByXY(t);if(e&&e.length>0)for(var a=0,r=e.length;r>a;a+=1){{var i=e[a];i.id}if(i.getShape){var o=i.getShape(t),s=i.Get("chart.events.mousemove");if(!s&&"function"==typeof i.onmousemove)var s=i.onmousemove;if(o){var h="scatter"==o.object.type?o.index_adjusted:o.index;if("object"==typeof i["$"+h]&&"function"==typeof i["$"+h].onmousemove)var n=i["$"+h].onmousemove}if(!o||"function"!=typeof s&&"function"!=typeof n&&"string"!=typeof i.Get("link")?"string"==typeof i.Get("chart.events.mousemove.revertto")&&(RGraph.cursor.push("default"),i.Set("chart.events.mousemove.revertto",null)):(null==i.Get("chart.events.mousemove.revertto")&&i.Set("chart.events.mousemove.revertto",t.target.style.cursor),"function"==typeof s&&s(t,o),"function"==typeof n&&n(t,o)),o&&(i.Get("chart.tooltips")&&i.Get("chart.tooltips")[o.index]||o.tooltip)&&("onmousemove"==i.Get("chart.tooltips.event")||"mousemove"==i.Get("chart.tooltips.event"))&&(RGraph.is_null(RGraph.Registry.Get("chart.tooltip"))||RGraph.Registry.Get("chart.tooltip").__index__!=o.index||"number"==typeof o.dataset&&o.dataset!=RGraph.Registry.Get("chart.tooltip").__shape__.dataset||i.uid!=RGraph.Registry.Get("chart.tooltip").__object__.uid))return RGraph.Clear(i.canvas),RGraph.Redraw(),void i.canvas.rgraph_mouseup_event_listener(t);if(i&&i.Get("chart.adjustable")&&i.Adjusting_mousemove(t),o||i.overChartArea&&i.overChartArea(t))break}}t.target&&t.target.__object__&&t.target.__object__.Get("chart.crosshairs")&&RGraph.DrawCrosshairs(t,t.target.__object__),t.target.__object__&&t.target.__object__.Get("chart.annotatable")&&RGraph.Annotating_canvas_onmousemove&&RGraph.Annotating_canvas_onmousemove(t),RGraph.EvaluateCursor(t)},t.canvas.addEventListener("mousemove",t.canvas.rgraph_mousemove_event_listener,!1))},RGraph.installCanvasMousedownListener=RGraph.InstallCanvasMousedownListener=function(t){t.canvas.rgraph_mousedown_event_listener||(t.canvas.rgraph_mousedown_event_listener=function(t){if(navigator.userAgent.indexOf("Firefox")>=0&&(window.event=t),t=RGraph.FixEventObject(t),t.target.__object__&&t.target.__object__.Get("chart.annotatable")&&RGraph.Annotating_canvas_onmousedown)return void RGraph.Annotating_canvas_onmousedown(t);var e=RGraph.ObjectRegistry.getObjectByXY(t);if(e){{e.id}if(e&&e.isRGraph&&e.Get("chart.adjustable")){var e=RGraph.ObjectRegistry.getObjectByXY(t);if(e&&e.isRGraph){switch(e.type){case"bar":var a=e.getShapeByX(t);break;case"gantt":var a=e.getShape(t);if(a){var r=RGraph.getMouseXY(t);RGraph.Registry.Set("chart.adjusting.gantt",{index:a.index,object:e,mousex:r[0],mousey:r[1],event_start:e.data[a.index][0],event_duration:e.data[a.index][1],mode:r[0]>a.x+a.width-5?"resize":"move",shape:a})}break;case"line":var a=e.getShape(t);break;default:var a=null}RGraph.Registry.Set("chart.adjusting.shape",a),RGraph.FireCustomEvent(e,"onadjustbegin"),RGraph.Registry.Set("chart.adjusting",e),RGraph.Clear(e.canvas),RGraph.Redraw(),e.canvas.rgraph_mousemove_event_listener(t)}}RGraph.Clear(e.canvas),RGraph.Redraw()}},t.canvas.addEventListener("mousedown",t.canvas.rgraph_mousedown_event_listener,!1))},RGraph.installCanvasClickListener=RGraph.InstallCanvasClickListener=function(t){t.canvas.rgraph_click_event_listener||(t.canvas.rgraph_click_event_listener=function(t){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=t),t=RGraph.FixEventObject(t);for(var e=RGraph.ObjectRegistry.getObjectsByXY(t),a=0,r=e.length;r>a;a+=1){var i=e[a],o=(i.id,i.getShape(t)),s=i.Get("chart.events.click");if(s||"function"!=typeof i.onclick||(s=i.onclick),o&&"function"==typeof s)return void s(t,o);if(o){var h="scatter"==o.object.type?o.index_adjusted:o.index;if("number"==typeof h&&i["$"+h]){var s=i["$"+h].onclick;if("function"==typeof s)return void s(t,o)}}if(o||i.overChartArea&&i.overChartArea(t))break}},t.canvas.addEventListener("click",t.canvas.rgraph_click_event_listener,!1))},RGraph.evaluateCursor=RGraph.EvaluateCursor=function(t){for(var e=null,a=RGraph.getMouseXY(t),r=a[0],i=a[1],o=t.target,s=RGraph.ObjectRegistry.getObjectsByCanvasID(o.id),h=0,n=s.length;n>h;h+=1)if(s[h].getShape&&s[h].getShape(t)||s[h].overChartArea&&s[h].overChartArea(t)){var e=s[h];e.id}if(!RGraph.is_null(e)){if(e.getShape&&e.getShape(t)){var l=e.getShape(t);if(e.Get("chart.tooltips")){var c=RGraph.parseTooltipText(e.Get("chart.tooltips"),l.index);if(!c&&"scatter"==l.object.type&&l.index_adjusted&&(c=RGraph.parseTooltipText(e.Get("chart.tooltips"),l.index_adjusted)),c)var g=!0}}if(!RGraph.is_null(e)&&e.Get("chart.key.interactive"))for(var u=0;u<e.coords.key.length;++u)if(r>e.coords.key[u][0]&&r<e.coords.key[u][0]+e.coords.key[u][2]&&i>e.coords.key[u][1]&&i<e.coords.key[u][1]+e.coords.key[u][3])var g=!0}if(!RGraph.is_null(l)&&!RGraph.is_null(e)){if(!RGraph.is_null(e.Get("chart.events.mousemove"))&&"function"==typeof e.Get("chart.events.mousemove")){var d=e.Get("chart.events.mousemove").toString();if(d.match(/pointer/)&&d.match(/cursor/)&&d.match(/style/))var g=!0}if(!RGraph.is_null(e.onmousemove)&&"function"==typeof e.onmousemove){var d=e.onmousemove.toString();if(d.match(/pointer/)&&d.match(/cursor/)&&d.match(/style/))var g=!0}var f="scatter"==l.object.type?l.index_adjusted:l.index;if(!RGraph.is_null(e["$"+f])&&"function"==typeof e["$"+f].onmousemove){var d=e["$"+f].onmousemove.toString();if(d.match(/pointer/)&&d.match(/cursor/)&&d.match(/style/))var g=!0}}for(var s=RGraph.ObjectRegistry.objects.byCanvasID,h=0,n=s.length;n>h;h+=1)if(s[h]&&s[h][1].Get("chart.resizable"))var p=!0;p&&r>t.target.width-32&&i>t.target.height-16&&(g=!0),t.target.style.cursor=g?"pointer":"pointer"==t.target.style.cursor?"default":null,p&&r>=t.target.width-15&&i>=t.target.height-15?t.target.style.cursor="move":"move"===t.target.style.cursor&&(t.target.style.cursor="default"),"boolean"==typeof mouse_over_key&&mouse_over_key&&(t.target.style.cursor="pointer"),e&&"line"==e.type&&e.Get("chart.adjustable")&&(t.target.style.cursor=e.getShape&&e.getShape(t)?"ns-resize":"default"),t.target.__object__&&t.target.__object__.Get("chart.annotatable")&&(t.target.style.cursor="crosshair"),e&&"drawing.text"===e.type&&l&&"string"==typeof e.Get("link")&&(t.target.style.cursor="pointer")},RGraph.parseTooltipText=function(t,e){if(!t)return null;if("function"==typeof t)var a=t(e);else if("string"==typeof t)var a=t;else if("object"==typeof t&&"function"==typeof t[e])var a=t[e](e);else if("string"==typeof t[e]&&t[e])var a=t[e];else var a="";return"undefined"==a?a="":"null"==a&&(a=""),RGraph.getTooltipTextFromDIV?RGraph.getTooltipTextFromDIV(a):a},RGraph.drawCrosshairs=RGraph.DrawCrosshairs=function(t,e){var t=RGraph.FixEventObject(t),a=e.canvas.width,r=e.canvas.height,i=RGraph.getMouseXY(t),o=i[0],s=i[1],h=e.gutterLeft,n=e.gutterRight,l=e.gutterTop,c=e.gutterBottom,g=Math.round,u=e.properties,d=e.context,f=e.canvas;if(RGraph.RedrawCanvas(f),o>=h&&s>=l&&a-n>=o&&r-c>=s){var p=u["chart.crosshairs.linewidth"]?u["chart.crosshairs.linewidth"]:1;if(d.lineWidth=p?p:1,d.beginPath(),d.strokeStyle=u["chart.crosshairs.color"],u["chart.crosshairs.snap"]){var m=null,y=null,v=null;if("line"==e.type){for(var b=0;b<e.coords.length;++b){var x=RGraph.getHypLength(e.coords[b][0],e.coords[b][1],o,s);if("number"!=typeof y||y>x)var m=b,y=x}o=e.coords[m][0],s=e.coords[m][1];for(var R=0;R<e.coords2.length;++R)for(var m=0;m<e.coords2[R].length;++m)e.coords2[R][m][0]==o&&e.coords2[R][m][1]==s&&(f.__crosshairs_snap_dataset__=R,f.__crosshairs_snap_point__=m)}else{for(var b=0;b<e.coords.length;++b)for(var G=0;G<e.coords[b].length;++G){var v=RGraph.getHypLength(e.coords[b][G][0],e.coords[b][G][1],o,s);if("number"!=typeof y||y>v)var R=b,m=G,y=v}f.__crosshairs_snap_dataset__=R,f.__crosshairs_snap_point__=m,o=e.coords[R][m][0],s=e.coords[R][m][1]}}if(u["chart.crosshairs.vline"]&&(d.moveTo(g(o),g(l)),d.lineTo(g(o),g(r-c))),u["chart.crosshairs.hline"]&&(d.moveTo(g(h),g(s)),d.lineTo(g(a-n),g(s))),d.stroke(),"scatter"==e.type&&u["chart.crosshairs.coords"]){var _=(o-h)/(a-h-n)*(u["chart.xmax"]-u["chart.xmin"])+u["chart.xmin"];_=_.toFixed(u["chart.scale.decimals"]);var k=e.max-(s-u["chart.gutter.top"])/(r-l-c)*e.max;"scatter"==e.type&&"center"==e.properties["chart.xaxispos"]&&(k=2*(k-e.max/2)),k=k.toFixed(u["chart.scale.decimals"]);var w=RGraph.Registry.Get("chart.coordinates.coords.div"),i=RGraph.getMouseXY(t),T=RGraph.getCanvasXY(f);if(!w){var w=document.createElement("DIV");w.__object__=e,w.style.position="absolute",w.style.backgroundColor="white",w.style.border="1px solid black",w.style.fontFamily="Arial, Verdana, sans-serif",w.style.fontSize="10pt",w.style.padding="2px",w.style.opacity=1,w.style.WebkitBorderRadius="3px",w.style.borderRadius="3px",w.style.MozBorderRadius="3px",document.body.appendChild(w),RGraph.Registry.Set("chart.coordinates.coords.div",w)}w.style.opacity=1,w.style.display="inline",u["chart.crosshairs.coords.fixed"]?(w.style.left=T[0]+h+3+"px",w.style.top=T[1]+l+3+"px"):(w.style.left=Math.max(2,t.pageX-w.offsetWidth-3)+"px",w.style.top=Math.max(2,t.pageY-w.offsetHeight-3)+"px"),w.innerHTML='<span style="color: #666">'+u["chart.crosshairs.coords.labels.x"]+":</span> "+_+'<br><span style="color: #666">'+u["chart.crosshairs.coords.labels.y"]+":</span> "+k,e.canvas.addEventListener("mouseout",RGraph.HideCrosshairCoords,!1),f.__crosshairs_labels__=w,f.__crosshairs_x__=_,f.__crosshairs_y__=k}else u["chart.crosshairs.coords"]&&alert("[RGRAPH] Showing crosshair coordinates is only supported on the Scatter chart");RGraph.FireCustomEvent(e,"oncrosshairs")}else RGraph.HideCrosshairCoords()}}(window,document),RGraph=window.RGraph||{isRGraph:!0},function(){{var t=RGraph;navigator.userAgent,Math}t.zoom=t.Zoom=function(e){if(e=RGraph.fixEventObject(e),e&&e.target&&e.target.__canvas__)var a=e.target.__canvas__;else if(e&&e.target&&e.target.__object__){var a=e.target.__object__.canvas;e.stopPropagation()}if(!a){var r=RGraph.Registry.get("chart.contextmenu").__canvas__;if(r)var a=r}var i=a.__object__,o=(i.context,a.toDataURL()),s=t.getCanvasXY(a),h=i.Get("chart.zoom.factor")-1,n=s[0],l=s[1],c=document.createElement("img");c.className="RGraph_zoomed_canvas",c.style.border="1px solid #ccc",c.style.width=a.width+"px",c.style.height=a.height+"px",c.style.position="absolute",c.style.left=n+"px",c.style.top=l+"px",c.style.backgroundColor="white",c.style.opacity=i.Get("chart.zoom.fade.in")?0:1,c.style.zIndex=99,c.src=o,document.body.appendChild(c),RGraph.zoom_image=c,RGraph.zoom_image.obj=i,c.onclick=function(t){return t=RGraph.fixEventObject(t),t.stopPropagation(),!1};var g=parseInt(a.width),u=parseInt(a.height),d=i.Get("chart.zoom.frames"),f=i.Get("chart.zoom.delay");if("center"==i.Get("chart.zoom.hdir"))for(var p=1;d>=p;++p){var m=g*h*(p/d)+g,y=n+a.width,v=n+a.width/2-m/2;setTimeout("RGraph.zoom_image.style.width = '"+String(m)+"px'; RGraph.zoom_image.style.left = '"+v+"px'",p*f)}else if("left"==i.Get("chart.zoom.hdir"))for(var p=1;d>=p;++p){var m=g*h*(p/d)+g,y=n+a.width,v=y-m;setTimeout("RGraph.zoom_image.style.width = '"+String(m)+"px'; RGraph.zoom_image.style.left = '"+v+"px'",p*f)}else for(var p=1;d>=p;++p){var m=g*h*(p/d)+g;setTimeout("RGraph.zoom_image.style.width = '"+String(m)+"px'",p*f)}if("up"==i.Get("chart.zoom.vdir"))for(var p=1;d>=p;++p){var b=u*h*(p/d)+u,x=l+a.height,R=x-b;setTimeout("RGraph.zoom_image.style.height = '"+String(b)+"px'; RGraph.zoom_image.style.top = '"+R+"px'",p*f)}else if("center"==i.Get("chart.zoom.vdir"))for(var p=1;d>=p;++p){var b=u*h*(p/d)+u,x=l+a.height/2+b/2,R=x-b;setTimeout("RGraph.zoom_image.style.height = '"+String(b)+"px'; RGraph.zoom_image.style.top = '"+R+"px'",p*f)}else for(var p=1;d>=p;++p)setTimeout("RGraph.zoom_image.style.height = '"+String(u*h*(p/d)+u)+"px'",p*f);if(i.Get("chart.zoom.fade.in"))for(var p=1;d>=p;++p)setTimeout("RGraph.zoom_image.style.opacity = "+Number(p/d),p*(f/2));if(i.Get("chart.zoom.shadow"))for(var p=1;d>=p;++p)setTimeout("RGraph.zoom_image.style.boxShadow = 'rgba(128,128,128,"+Number(p/d)/2+") 0 0 25px'",p*f),setTimeout("RGraph.zoom_image.style.MozBoxShadow = 'rgba(128,128,128,"+Number(p/d)/2+") 0 0 25px'",p*f),setTimeout("RGraph.zoom_image.style.WebkitBoxShadow = 'rgba(128,128,128,"+Number(p/d)/2+") 0 0 25px'",p*f);var G=document.createElement("DIV");G.style.backgroundColor="white",G.style.opacity=0,G.style.position="fixed",G.style.top=0,G.style.left=0,G.style.width=screen.width+100+"px",G.style.height=screen.height+100+"px",G.style.zIndex=98,G.onclick=G.oncontextmenu=function(e){return t.hideZoomedCanvas(e)},G.origHeight=G.style.height,document.body.appendChild(G),t.zoom_background=G;for(var p=1;d>=p;++p)setTimeout("RGraph.zoom_background.style.opacity = "+.8*Number(p/d),p*(f/2));t.fireCustomEvent(i,"onzoom")}}(window,document),RGraph=window.RGraph||{isRGraph:!0},function(){{var t=RGraph;navigator.userAgent,Math}t.tooltips={},t.tooltips.padding="3px",t.tooltips.font_face="Tahoma",t.tooltips.font_size="10pt",t.tooltip=t.Tooltip=function(e,a,r,o,s,h){if("function"==typeof e.Get("chart.tooltips.override"))return e.Get("chart.tooltips.override")(e,a,r,o,s);a=RGraph.getTooltipTextFromDIV(a);var n=RGraph.Registry.Get("chart.tooltip.timers");if(n&&n.length)for(i=0;i<n.length;++i)clearTimeout(n[i]);RGraph.Registry.Set("chart.tooltip.timers",[]),e.Get("chart.contextmenu")&&RGraph.HideContext();var l=e.Get("chart.tooltips.effect")?e.Get("chart.tooltips.effect").toLowerCase():"fade",c=document.createElement("DIV");if(c.className=e.Get("chart.tooltips.css.class"),c.style.display="none",c.style.position=RGraph.isFixed(e.canvas)?"fixed":"absolute",c.style.left=0,c.style.top=0,c.style.backgroundColor="rgb(255,255,239)",c.style.color="black",document.all||(c.style.border=""),c.style.visibility="visible",c.style.paddingLeft=RGraph.tooltips.padding,c.style.paddingRight=RGraph.tooltips.padding,c.style.fontFamily=RGraph.tooltips.font_face,c.style.fontSize=RGraph.tooltips.font_size,c.style.zIndex=3,RGraph.trim(a).length>0&&(c.style.border="1px #bbb solid"),c.style.borderRadius="5px",c.style.MozBorderRadius="5px",c.style.WebkitBorderRadius="5px",c.style.WebkitBoxShadow="rgba(96,96,96,0.5) 0 0 15px",c.style.MozBoxShadow="rgba(96,96,96,0.5) 0 0 15px",c.style.boxShadow="rgba(96,96,96,0.5) 0 0 15px",c.style.filter="progid:DXImageTransform.Microsoft.Shadow(color=#666666,direction=135)",c.style.opacity=0,c.innerHTML=a,c.__text__=a,c.__canvas__=e.canvas,c.style.display="inline",c.id="__rgraph_tooltip_"+e.canvas.id+"_"+e.uid+"_"+s,c.__event__=e.Get("chart.tooltips.event")||"click",c.__object__=e,"number"==typeof s&&(c.__index__=s,origIdx=s),"line"==e.type||"radar"==e.type){for(var g=0;g<e.data.length&&s>=e.data[g].length;++g)s-=e.data[g].length;c.__dataset__=g,c.__index2__=s}document.body.appendChild(c);var u=c.offsetWidth,d=c.offsetHeight;c.style.width=u+"px",c.style.top=o-d-2+"px","function"==typeof e.positionTooltip?c.innerHTML.length>0&&(e.positionTooltip(e,r,o,c,origIdx?origIdx:s),e.Get("chart.tooltips.coords.page")&&(c.style.left=h.pageX-u/2-4.25+"px",c.style.top=h.pageY-d-10+"px",document.getElementById("__rgraph_tooltip_pointer__").style.left=parseInt(c.offsetWidth)/2-8.5+"px")):(c.style.left=h.pageX-u/2-4.25+"px",c.style.top=h.pageY-d-7+"px"),("fade"==l||"expand"==l||"contract"==l||"snap"==l)&&(setTimeout(function(){c.style.opacity=.1},25),setTimeout(function(){c.style.opacity=.2},50),setTimeout(function(){c.style.opacity=.3},75),setTimeout(function(){c.style.opacity=.4},100),setTimeout(function(){c.style.opacity=.5},125),setTimeout(function(){c.style.opacity=.6},150),setTimeout(function(){c.style.opacity=.7},175),setTimeout(function(){c.style.opacity=.8},200),setTimeout(function(){c.style.opacity=.9},225),("expand"==l||"contract"==l||"snap"==l)&&console.log("[RGRAPH] The snap, expand and contract tooltip effects are deprecated. Available effects now are fade and none")),setTimeout("if (RGraph.Registry.Get('chart.tooltip')) { RGraph.Registry.Get('chart.tooltip').style.opacity = 1;}","none"==l?50:250),c.onmousedown=function(t){t.stopPropagation()},c.onmouseup=function(t){t.stopPropagation()},c.onclick=function(t){0==t.button&&t.stopPropagation()},RGraph.Registry.Set("chart.tooltip",c),t.FireCustomEvent(e,"ontooltip")},t.getTooltipTextFromDIV=function(t){var e=/^id:(.*)/.exec(t);return e&&e[1]&&document.getElementById(e[1])?t=document.getElementById(e[1]).innerHTML:e&&e[1]&&(t=""),t},t.getTooltipWidth=function(t,e){var a=document.createElement("DIV");return a.className=e.Get("chart.tooltips.css.class"),a.style.paddingLeft=RGraph.tooltips.padding,a.style.paddingRight=RGraph.tooltips.padding,a.style.fontFamily=RGraph.tooltips.font_face,a.style.fontSize=RGraph.tooltips.font_size,a.style.visibility="hidden",a.style.position="absolute",a.style.top="300px",a.style.left=0,a.style.display="inline",a.innerHTML=RGraph.getTooltipTextFromDIV(t),document.body.appendChild(a),a.offsetWidth},t.hideTooltip=t.HideTooltip=function(){var t=RGraph.Registry.Get("chart.tooltip"),e=arguments[0]&&arguments[0].uid?arguments[0].uid:null;!t||!t.parentNode||e&&e!=t.__canvas__.uid||(t.parentNode.removeChild(t),t.style.display="none",t.style.visibility="hidden",RGraph.Registry.Set("chart.tooltip",null))},t.preLoadTooltipImages=t.PreLoadTooltipImages=function(t){var e=t.Get("chart.tooltips");if(RGraph.hasTooltips(t)){if("rscatter"==t.type){e=[];for(var a=0;a<t.data.length;++a)e.push(t.data[3])}for(var a=0;a<e.length;++a){var r=document.createElement("DIV");r.style.position="absolute",r.style.opacity=0,r.style.top="-100px",r.style.left="-100px",r.innerHTML=e[a],document.body.appendChild(r);for(var i=r.getElementsByTagName("IMG"),o=0;o<i.length;++o)if(i&&i[a]){var s=document.createElement("IMG");s.style.position="absolute",s.style.opacity=0,s.style.top="-100px",s.style.left="-100px",s.src=i[a].src,document.body.appendChild(s),setTimeout(function(){document.body.removeChild(s)},250)}document.body.removeChild(r)}}},t.tooltips_mousemove=t.Tooltips_mousemove=function(t,e){var a=t.getShape(e),r=!1;if(a&&"number"==typeof a.index&&t.Get("chart.tooltips")[a.index]){var i=RGraph.parseTooltipText(t.Get("chart.tooltips"),a.index);i&&(r=!0,"onmousemove"==t.Get("chart.tooltips.event")&&(RGraph.Registry.Get("chart.tooltip")&&RGraph.Registry.Get("chart.tooltip").__object__.uid==t.uid&&RGraph.Registry.Get("chart.tooltip").__index__==a.index||(RGraph.HideTooltip(),RGraph.Clear(t.canvas),RGraph.Redraw(),RGraph.Tooltip(t,i,e.pageX,e.pageY,a.index),t.Highlight(a))))}else if(a&&"number"==typeof a.index){var i=RGraph.parseTooltipText(t.Get("chart.tooltips"),a.index);i&&(r=!0)}return r}}(window,document),RGraph=window.RGraph||{isRGraph:!0},function(win,doc,undefined){var RG=RGraph,ua=navigator.userAgent,ma=Math;RG.Highlight={},RG.Registry={},RG.Registry.store=[],RG.Registry.store["chart.event.handlers"]=[],RG.Registry.store.__rgraph_event_listeners__=[],RG.Background={},RG.background={},RG.objects=[],RG.Resizing={},RG.events=[],RG.cursor=[],RG.Effects=RG.Effects||{},RG.cache=[],RG.ObjectRegistry={},RG.ObjectRegistry.objects={},RG.ObjectRegistry.objects.byUID=[],RG.ObjectRegistry.objects.byCanvasID=[],RG.PI=ma.PI,RG.HALFPI=RG.PI/2,RG.TWOPI=2*RG.PI,RG.ISFF=-1!=ua.indexOf("Firefox"),RG.ISOPERA=-1!=ua.indexOf("Opera"),RG.ISCHROME=-1!=ua.indexOf("Chrome"),RG.ISSAFARI=-1!=ua.indexOf("Safari")&&!RG.ISCHROME,RG.ISWEBKIT=-1!=ua.indexOf("WebKit"),RG.ISIE=ua.indexOf("Trident")>0||navigator.userAgent.indexOf("MSIE")>0,RG.ISIE6=ua.indexOf("MSIE 6")>0,RG.ISIE7=ua.indexOf("MSIE 7")>0,RG.ISIE8=ua.indexOf("MSIE 8")>0,RG.ISIE9=ua.indexOf("MSIE 9")>0,RG.ISIE10=ua.indexOf("MSIE 10")>0,RG.ISOLD=RGraph.ISIE6||RGraph.ISIE7||RGraph.ISIE8,RG.ISIE11UP=-1==ua.indexOf("MSIE")&&ua.indexOf("Trident")>0,RG.ISIE10UP=RG.ISIE10||RG.ISIE11UP,RG.ISIE9UP=RG.ISIE9||RG.ISIE10UP,RG.getScale=function(t,e){if(0==t)return["0.2","0.4","0.6","0.8","1.0"];
var a=t;if(1>=t){if(t>.5)return[.2,.4,.6,.8,Number(1).toFixed(1)];if(t>=.1)return e.Get("chart.scale.round")?[.2,.4,.6,.8,1]:[.1,.2,.3,.4,.5];for(var r=t,i=0;1.01>r;)i+=1,r*=10;var o=["2e-"+i,"4e-"+i,"6e-"+i,"8e-"+i,"10e-"+i];return"5e-"+i>=t&&(o=["1e-"+i,"2e-"+i,"3e-"+i,"4e-"+i,"5e-"+i]),o}String(t).indexOf(".")>0&&(t=String(t).replace(/\.\d+$/,""));for(var s=ma.pow(10,Number(String(Number(t)).length-1)),h=s;t>h;)h+=s/2;return Number(a)>Number(h)&&(h+=s/2),10>t&&(h=Number(a)<=5?5:10),e&&"boolean"==typeof e.Get("chart.scale.round")&&e.Get("chart.scale.round")&&(h=10*s),[.2*h,.4*h,.6*h,.8*h,h]},RG.getScale2=function(t,e){var a=(t.canvas,t.context,t.properties),r="number"==typeof e["ylabels.count"]?e["ylabels.count"]:5,i="string"==typeof e["units.pre"]?e["units.pre"]:"",o="string"==typeof e["units.post"]?e["units.post"]:"",s=Number(e.max),h="number"==typeof e.min?e.min:0,n=e.strict,l=Number(e["scale.decimals"]),c=e["scale.point"],g=e["scale.thousand"],u=s,d=e["scale.round"],f={max:1,labels:[]};if(s)if(1>=s&&!n)if(s>.5){s=1,h=h,f.min=h;for(var p=0;r>p;++p){var m=((s-h)/r*(p+1)+h).toFixed(l);f.labels.push(i+m+o)}}else if(s>=.1){s=.5,h=h,f={max:.5,min:h,labels:[]};for(var p=0;r>p;++p){var m=(((s-h)/r+h)*(p+1)).toFixed(l);f.labels.push(i+m+o)}}else{f={min:h,labels:[]};var y=String(s);if(y.indexOf("e")>0)var v=ma.abs(y.substring(y.indexOf("e")+1));else var v=String(s).length-2;for(var s=1/ma.pow(10,v-1),p=0;r>p;++p){var m=((s-h)/r+h)*(p+1);m=m.toExponential(),m=m.split(/e/),m[0]=ma.round(m[0]),m=m.join("e"),f.labels.push(m)}tmp=f.labels[f.labels.length-1].split(/e/),tmp[0]+=0,tmp[1]=Number(tmp[1])-1,tmp=tmp[0]+"e"+tmp[1],f.labels[f.labels.length-1]=tmp;for(var p=0;p<f.labels.length;++p)f.labels[p]=i+f.labels[p]+o;f.max=Number(s)}else if(n){if("number"==typeof s&&n){for(var p=0;r>p;++p)f.labels.push(RG.number_format(t,((p+1)/r*(s-h)+h).toFixed(l),i,o));f.max=s}}else{s=ma.ceil(s);for(var b=ma.pow(10,ma.max(1,Number(String(Number(s)-Number(h)).length-1))),x=b;s>x;)x+=b/2;Number(u)>Number(x)&&(x+=b/2),10>=s&&(x=Number(u)<=5?5:10),t&&"boolean"==typeof d&&d&&(x=10*b),f.max=x;var R=a["chart.scale.point"],G=a["chart.scale.thousand"];t.Set("chart.scale.thousand",g),t.Set("chart.scale.point",c);for(var p=0;r>p;++p)f.labels.push(RG.number_format(t,((p+1)/r*(x-h)+h).toFixed(l),i,o));t.Set("chart.scale.thousand",G),t.Set("chart.scale.point",R)}else for(var s=1,f={max:1,min:0,labels:[]},p=0;r>p;++p){var m=(((s-h)/r+h)*(p+1)).toFixed(l);f.labels.push(i+m+o)}return f.units_pre=i,f.units_post=o,f.point=c,f.decimals=l,f.thousand=g,f.numlabels=r,f.round=Boolean(d),f.min=h,f},RG.arrayClone=RG.array_clone=function(t){if(null===t||"object"!=typeof t)return t;for(var e=[],a=0,r=t.length;r>a;++a)e[a]="number"==typeof t[a]?function(t){return Number(t)}(t[a]):"string"==typeof t[a]?function(t){return String(t)}(t[a]):"function"==typeof t[a]?t[a]:RG.array_clone(t[a]);return e},RG.arrayMax=RG.array_max=function(t){var e=null,a=Math;if("number"==typeof t)return t;if(RG.is_null(t))return 0;for(var r=0,i=t.length;i>r;++r)if("number"==typeof t[r]){var o=arguments[1]?a.abs(t[r]):t[r];e="number"==typeof e?a.max(e,o):o}return e},RG.arrayPad=RG.array_pad=function(t,e){if(t.length<e)for(var a=arguments[2]?arguments[2]:null,r=t.length;e>r;r+=1)t[r]=a;return t},RG.arraySum=RG.array_sum=function(t){if("number"==typeof t)return t;if(RG.is_null(t))return 0;var e,a,r=t.length;for(e=0,a=0;r>e;a+=t[e++]);return a},RG.arrayLinearize=RG.array_linearize=function(){for(var t=[],e=arguments,a=0,r=e.length;r>a;++a)if("object"==typeof e[a]&&e[a])for(var i=0,o=e[a].length;o>i;++i)for(var s=RG.array_linearize(e[a][i]),h=0,n=s.length;n>h;++h)t.push(s[h]);else t.push(e[a]);return t},RG.arrayShift=RG.array_shift=function(t){for(var e=[],a=1,r=t.length;r>a;++a)e.push(t[a]);return e},RG.arrayReverse=RG.array_reverse=function(t){for(var e=[],a=t.length-1;a>=0;a-=1)e.push(t[a]);return e},RG.clear=RG.Clear=function(t){var e=t.__object__,a=t.getContext("2d"),r=arguments[1]||e&&e.get("clearto");if(t){if(RG.FireCustomEvent(e,"onbeforeclear"),RG.ISIE8&&!r&&(r="white"),!r||r&&"rgba(0,0,0,0)"===r||"transparent"===r?(a.clearRect(0,0,t.width,t.height),a.globalCompositeOperation="source-over"):(a.fillStyle=r,a.beginPath(),RG.ISIE8?a.fillRect(0,0,t.width,t.height):a.fillRect(-10,-10,t.width+20,t.height+20),a.fill()),RG.Registry.Get("chart.background.image."+t.id)){var i=RG.Registry.Get("chart.background.image."+t.id);i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px"}RG.Registry.Get("chart.tooltip")&&e.get("chart.tooltips.nohideonclear")!==!0&&RG.HideTooltip(t),t.style.cursor="default",RG.FireCustomEvent(e,"onclear")}},RG.drawTitle=RG.DrawTitle=function(t,e,a){var r=canvas=t.canvas,i=context=t.context,o=t.properties;if(arguments[5])var r=canvas=arguments[5].canvas,i=context=arguments[5].context;var s=o["chart.gutter.left"],h=o["chart.gutter.right"],a=a,n=o["chart.gutter.bottom"],l=arguments[4]?arguments[4]:12,c=o["chart.title.bold"],g=arguments[3]?arguments[3]:(r.width-s-h)/2+s,u=o["chart.key.position"],d=o["chart.title.vpos"],f=o["chart.title.hpos"],p=o["chart.title.background"],m=o["chart.title.x"],y=o["chart.title.y"],v="center",b="center";if("bar"==t.type&&"3d"==o["chart.variant"]&&(u="gutter"),i.beginPath(),i.fillStyle=o["chart.text.color"]?o["chart.text.color"]:"black",u&&"gutter"!=u)var b="center";else if(u)var b="bottom";else var b="center";if("number"==typeof o["chart.title.vpos"]?(d=o["chart.title.vpos"]*a,"top"===o["chart.xaxispos"]&&(d=o["chart.title.vpos"]*n+a+(r.height-a-n))):(d=a-l-5,"top"===o["chart.xaxispos"]&&(d=r.height-n+l+5)),"number"==typeof f&&(g=f*r.width),"number"==typeof m&&(g=m),"number"==typeof y&&(d=y),"string"==typeof o["chart.title.halign"]&&(v=o["chart.title.halign"]),"string"==typeof o["chart.title.valign"]&&(b=o["chart.title.valign"]),null!==typeof o["chart.title.color"]){var x=i.fillStyle,R=o["chart.title.color"];i.fillStyle=R?R:"black"}var G=o["chart.text.font"];"string"==typeof o["chart.title.font"]&&(G=o["chart.title.font"]),RG.Text2(i,{font:G,size:l,x:g,y:d,text:e,valign:b,halign:v,bounding:null!=p,"bounding.fill":p,bold:c,tag:"title"}),i.fillStyle=x},RG.getMouseXY=function(t){var e,a,r=t.target,i=r,o=i.style,s=0,h=0,n="fixed"==i.style.position,l=parseInt(o.borderLeftWidth)||0,c=parseInt(o.borderTopWidth)||0,g=parseInt(o.paddingLeft)||0,u=parseInt(o.paddingTop)||0,d=l+g,f=c+u;if("number"==typeof t.offsetX&&"number"==typeof t.offsetY)n?RG.ISOPERA?(e=t.offsetX,a=t.offsetY):RG.ISWEBKIT?(e=t.offsetX-g-l,a=t.offsetY-u-c):RG.ISIE?(e=t.offsetX-g,a=t.offsetY-u):(e=t.offsetX,a=t.offsetY):RG.ISIE||RG.ISOPERA?RG.ISIE?(e=t.offsetX-g,a=t.offsetY-u):(e=t.offsetX,a=t.offsetY):(e=t.offsetX-l-g,a=t.offsetY-c-u);else{if("undefined"!=typeof r.offsetParent)do s+=r.offsetLeft,h+=r.offsetTop;while(r=r.offsetParent);e=t.pageX-s-d,a=t.pageY-h-f,e-=2*(parseInt(document.body.style.borderLeftWidth)||0),a-=2*(parseInt(document.body.style.borderTopWidth)||0)}return[e,a]},RG.getCanvasXY=function(t){var e=0,a=0,r=t;do e+=r.offsetLeft,a+=r.offsetTop,"table"==r.tagName.toLowerCase()&&(RG.ISCHROME||RG.ISSAFARI)&&(e+=parseInt(r.border)||0,a+=parseInt(r.border)||0),r=r.offsetParent;while(r&&"body"!=r.tagName.toLowerCase());var i=t.style.paddingLeft?parseInt(t.style.paddingLeft):0,o=t.style.paddingTop?parseInt(t.style.paddingTop):0,s=t.style.borderLeftWidth?parseInt(t.style.borderLeftWidth):0,h=t.style.borderTopWidth?parseInt(t.style.borderTopWidth):0;return navigator.userAgent.indexOf("Firefox")>0&&(e+=parseInt(document.body.style.borderLeftWidth)||0,a+=parseInt(document.body.style.borderTopWidth)||0),[e+i+s,a+o+h]},RG.isFixed=function(t){for(var e=t,a=0;e&&"body"!=e.tagName.toLowerCase()&&99>a;){if("fixed"==e.style.position)return e;e=e.offsetParent}return!1},RG.register=RG.Register=function(t){t.Get("chart.noregister")||(RGraph.ObjectRegistry.Add(t),t.Set("chart.noregister",!0))},RG.redraw=RG.Redraw=function(){for(var t=RGraph.ObjectRegistry.objects.byCanvasID,e=document.getElementsByTagName("canvas"),a=0,r=e.length;r>a;++a)e[a].__object__&&e[a].__object__.isRGraph&&(e[a].noclear||RGraph.clear(e[a],arguments[0]?arguments[0]:null));for(var a=0,r=t.length;r>a;++a)if(t[a]){{t[a][0]}t[a][1].Draw()}},RG.redrawCanvas=RG.RedrawCanvas=function(t){var e=RG.ObjectRegistry.getObjectsByCanvasID(t.id);if(!arguments[1]||"boolean"==typeof arguments[1]&&0==!arguments[1]){var a=arguments[2]||t.__object__.get("clearto")||"transparent";RG.clear(t,a)}for(var r=0,i=e.length;i>r;++r)e[r]&&e[r]&&e[r].isRGraph&&e[r].Draw()},RG.Background.draw=RG.background.draw=RG.background.Draw=function(t){var e=function(t,e,a){var r=e,i=a,o=t.properties,s=0,h=t.gutterLeft,n=t.gutterRight,l=t.gutterTop,c=t.gutterBottom,g=o["chart.variant"];if(i.fillStyle=o["chart.text.color"],"3d"==g&&(i.save(),i.translate(10,-5)),"string"==typeof o["chart.title.xaxis"]&&o["chart.title.xaxis"].length){var u=o["chart.text.size"]+2,d=o["chart.text.font"],f=o["chart.title.xaxis.bold"];"number"==typeof o["chart.title.xaxis.size"]&&(u=o["chart.title.xaxis.size"]),"string"==typeof o["chart.title.xaxis.font"]&&(d=o["chart.title.xaxis.font"]);var p=(r.width-h-n)/2+h,m=r.height-c+25;"number"==typeof o["chart.title.xaxis.pos"]&&(m=r.height-c*o["chart.title.xaxis.pos"]),"number"==typeof o["chart.title.xaxis.x"]&&(p=o["chart.title.xaxis.x"]),"number"==typeof o["chart.title.xaxis.y"]&&(m=o["chart.title.xaxis.y"]),RG.Text2(i,{font:d,size:u,x:p,y:m,text:o["chart.title.xaxis"],halign:"center",valign:"center",bold:f,tag:"title xaxis"})}if("string"==typeof o["chart.title.yaxis"]&&o["chart.title.yaxis"].length){var u=o["chart.text.size"]+2,d=o["chart.text.font"],y=270,f=o["chart.title.yaxis.bold"],v=o["chart.title.yaxis.color"];if("number"==typeof o["chart.title.yaxis.pos"])var b=o["chart.title.yaxis.pos"]*h;else var b=(h-25)/h*h;"number"==typeof o["chart.title.yaxis.size"]&&(u=o["chart.title.yaxis.size"]),"string"==typeof o["chart.title.yaxis.font"]&&(d=o["chart.title.yaxis.font"]),"right"==o["chart.title.yaxis.align"]||"right"==o["chart.title.yaxis.position"]||"hbar"===t.type&&"right"===o["chart.yaxispos"]&&"undefined"==typeof o["chart.title.yaxis.align"]&&"undefined"==typeof o["chart.title.yaxis.position"]?(y=90,b=o["chart.title.yaxis.pos"]?r.width-n+o["chart.title.yaxis.pos"]*n:r.width-n+o["chart.text.size"]+5):b=b;var R=(r.height-l-c)/2+l;"number"==typeof o["chart.title.yaxis.x"]&&(b=o["chart.title.yaxis.x"]),"number"==typeof o["chart.title.yaxis.y"]&&(R=o["chart.title.yaxis.y"]),i.fillStyle=v,RG.text2(i,{font:d,size:u,x:b,y:R,valign:"center",halign:"center",angle:y,bold:f,text:o["chart.title.yaxis"],tag:"title yaxis"})}var G=o["chart.background.color"];G&&(i.fillStyle=G,i.fillRect(h+.5,l+.5,r.width-h-n,r.height-l-c));var _=o["chart.ylabels.count"]||5,k=(r.height-c-l)/_;i.beginPath(),i.fillStyle=o["chart.background.barcolor1"],i.strokeStyle=i.fillStyle,s=r.height-c;for(var w=0;_>w;w+=2)i.rect(h,w*k+l,r.width-h-n,k);i.fill(),i.beginPath(),i.fillStyle=o["chart.background.barcolor2"],i.strokeStyle=i.fillStyle;for(var w=1;_>w;w+=2)i.rect(h,w*k+l,r.width-h-n,k);if(i.fill(),o["chart.background.grid"]){if(o["chart.background.grid.autofit"]){o["chart.background.grid.autofit.align"]&&(t.Set("chart.background.grid.autofit.numhlines",o["chart.ylabels.count"]),"line"===t.type?o["chart.labels"]&&o["chart.labels"].length?t.Set("chart.background.grid.autofit.numvlines",o["chart.labels"].length-1):t.Set("chart.background.grid.autofit.numvlines",t.data[0].length-1):("bar"===t.type||"scatter"===t.type)&&o["chart.labels"]&&o["chart.labels"].length&&t.Set("chart.background.grid.autofit.numvlines",o["chart.labels"].length));var T=(r.width-h-n)/o["chart.background.grid.autofit.numvlines"],S=(r.height-l-c)/o["chart.background.grid.autofit.numhlines"];t.Set("chart.background.grid.vsize",T),t.Set("chart.background.grid.hsize",S)}if(i.beginPath(),i.lineWidth=o["chart.background.grid.width"]?o["chart.background.grid.width"]:1,i.strokeStyle=o["chart.background.grid.color"],o["chart.background.grid.dashed"]&&"function"==typeof i.setLineDash&&i.setLineDash([3,2]),o["chart.background.grid.dotted"]&&"function"==typeof i.setLineDash&&i.setLineDash([1,2]),i.beginPath(),o["chart.background.grid.hlines"]){s=r.height-c;var S=o["chart.background.grid.hsize"];for(R=l;s>=R;R+=S)a.moveTo(h,ma.round(R)),a.lineTo(r.width-n,ma.round(R))}if(o["chart.background.grid.vlines"]){var j=r.width-n,T=o["chart.background.grid.vsize"];for(x=h;x<=j;x+=T)i.moveTo(ma.round(x),l),i.lineTo(ma.round(x),r.height-c)}o["chart.background.grid.border"]&&(i.strokeStyle=o["chart.background.grid.color"],i.strokeRect(ma.round(h),ma.round(l),r.width-h-n,r.height-l-c))}i.stroke(),i.beginPath(),i.closePath(),"3d"==g&&i.restore(),"function"==typeof i.setLineDash&&i.setLineDash([1,0]),"string"==typeof o["chart.title"]&&("gantt"==t.type&&(l-=10),RG.DrawTitle(t,o["chart.title"],l,null,o["chart.title.size"]?o["chart.title.size"]:o["chart.text.size"]+2,{canvas:r,context:i})),i.stroke()};RG.ISOLD?e(t,t.canvas,t.context):RG.cachedDraw(t,t.uid+"_background",e)},RG.numberFormat=RG.number_format=function(t,e){var a,r=(t.canvas,t.context,t.properties),i=arguments[2]?String(arguments[2]):"",o=arguments[3]?String(arguments[3]):"",s="",h="",n="string"==typeof r["chart.scale.point"]?r["chart.scale.point"]:".",l="string"==typeof r["chart.scale.thousand"]?r["chart.scale.thousand"]:",";RegExp.$1="";var a,c;if("function"==typeof r["chart.scale.formatter"])return r["chart.scale.formatter"](t,e);if(String(e).indexOf("e")>0)return String(i+String(e)+o);if(e=String(e),e.indexOf(".")>0){var g=e;e=e.replace(/\.(.*)/,""),h=g.replace(/(.*)\.(.*)/,"$2")}var u=l;for(a=e.length-1,c=0;a>=0;c++,a--){var d=e.charAt(a);c%3==0&&0!=c&&(s+=u),s+=d}var f=s;for(s="",a=f.length-1;a>=0;a--)s+=f.charAt(a);return 0==s.indexOf("-"+r["chart.scale.thousand"])&&(s="-"+s.substr(("-"+r["chart.scale.thousand"]).length)),h.length&&(s=s+n+h,h="",RegExp.$1=""),"-"==s.charAt(0)&&(s=s.replace(/-/,""),i="-"+i),i+s+o},RG.drawBars=RG.DrawBars=function(t){var e=t.properties,a=t.context,r=t.canvas,o=e["chart.background.hbars"];if(null!==o)for(a.beginPath(),i=0,len=o.length;i<len;++i){var s=o[i][0],h=o[i][1],n=o[i][2];RG.is_null(s)&&(s=t.scale2.max),s>t.scale2.max&&(s=t.scale2.max),RG.is_null(h)&&(h=t.scale2.max-s),s+h>t.scale2.max&&(h=t.scale2.max-s),s+h<-1*t.scale2.max&&(h=-1*t.scale2.max-s),"center"==e["chart.xaxispos"]&&s==t.scale2.max&&h<-2*t.scale2.max&&(h=-2*t.scale2.max);var l=e["chart.gutter.left"],c=t.getYCoord(s),g=r.width-e["chart.gutter.left"]-e["chart.gutter.right"],u=t.getYCoord(s+h)-c;-1!=RG.ISOPERA&&"center"==e["chart.xaxispos"]&&0>u&&(u*=-1,c-=u),"top"==e["chart.xaxispos"]&&(c=r.height-c,u*=-1),a.fillStyle=n,a.fillRect(l,c,g,u)}},RG.drawInGraphLabels=RG.DrawInGraphLabels=function(t){var e=(t.canvas,t.context),a=t.properties,r=a["chart.labels.ingraph"],i=[];if(r){for(var o=0,s=r.length;s>o;o+=1)if("number"==typeof r[o])for(var h=0;h<r[o];++h)i.push(null);else i.push("string"==typeof r[o]||"object"==typeof r[o]?r[o]:"");if(RG.NoShadow(t),i&&i.length>0)for(var o=0,s=i.length;s>o;o+=1)if(i[o]){var n=t.coords[o];if(n&&n.length>0){var l="bar"==t.type?n[0]+n[2]/2:n[0],c="bar"==t.type?n[1]+n[3]/2:n[1],g="number"==typeof i[o][4]?i[o][4]:25;if(e.beginPath(),e.fillStyle="black",e.strokeStyle="black","bar"===t.type){if("top"==t.Get("chart.xaxispos")&&(g*=-1),"dot"==a["chart.variant"]){e.moveTo(ma.round(l),t.coords[o][1]-5),e.lineTo(ma.round(l),t.coords[o][1]-5-g);var u=ma.round(l),d=t.coords[o][1]-5-g}else if("arrow"==a["chart.variant"]){e.moveTo(ma.round(l),t.coords[o][1]-5),e.lineTo(ma.round(l),t.coords[o][1]-5-g);var u=ma.round(l),d=t.coords[o][1]-5-g}else{e.arc(ma.round(l),c,2.5,0,6.28,0),e.moveTo(ma.round(l),c),e.lineTo(ma.round(l),c-g);var u=ma.round(l),d=c-g}e.stroke(),e.fill()}else if("line"==t.type){if("object"==typeof i[o]&&"number"==typeof i[o][3]&&-1==i[o][3]){e.moveTo(ma.round(l),c+5),e.lineTo(ma.round(l),c+5+g),e.stroke(),e.beginPath(),e.moveTo(ma.round(l),c+5),e.lineTo(ma.round(l)-3,c+10),e.lineTo(ma.round(l)+3,c+10),e.closePath();var u=l,d=c+5+g}else{var u=l,d=c-5-g;e.moveTo(ma.round(l),c-5),e.lineTo(ma.round(l),c-5-g),e.stroke(),e.beginPath(),e.moveTo(ma.round(l),c-5),e.lineTo(ma.round(l)-3,c-10),e.lineTo(ma.round(l)+3,c-10),e.closePath()}e.fill()}e.beginPath(),e.fillStyle="object"==typeof i[o]&&"string"==typeof i[o][1]?i[o][1]:"black",RG.Text2(t,{font:a["chart.text.font"],size:a["chart.text.size"],x:u,y:d,text:"object"==typeof i[o]&&"string"==typeof i[o][0]?i[o][0]:i[o],valign:"bottom",halign:"center",bounding:!0,"bounding.fill":"object"==typeof i[o]&&"string"==typeof i[o][2]?i[o][2]:"white",tag:"labels ingraph"}),e.fill()}}}},RG.fixEventObject=RG.FixEventObject=function(t){if(RG.ISOLD){var t=event;t.pageX=event.clientX+doc.body.scrollLeft,t.pageY=event.clientY+doc.body.scrollTop,t.target=event.srcElement,!doc.body.scrollTop&&doc.documentElement.scrollTop&&(t.pageX+=parseInt(doc.documentElement.scrollLeft),t.pageY+=parseInt(doc.documentElement.scrollTop))}return t.stopPropagation||(t.stopPropagation=function(){window.event.cancelBubble=!0}),t},RG.hideCrosshairCoords=RG.HideCrosshairCoords=function(){var t=RG.Registry.Get("chart.coordinates.coords.div");if(t&&1==t.style.opacity&&t.__object__.Get("chart.crosshairs.coords.fadeout")){var e=RG.Registry.Get("chart.coordinates.coords.div").style;setTimeout(function(){e.opacity=.9},25),setTimeout(function(){e.opacity=.8},50),setTimeout(function(){e.opacity=.7},75),setTimeout(function(){e.opacity=.6},100),setTimeout(function(){e.opacity=.5},125),setTimeout(function(){e.opacity=.4},150),setTimeout(function(){e.opacity=.3},175),setTimeout(function(){e.opacity=.2},200),setTimeout(function(){e.opacity=.1},225),setTimeout(function(){e.opacity=0},250),setTimeout(function(){e.display="none"},275)}},RG.draw3DAxes=RG.Draw3DAxes=function(t){var e=t.properties,a=t.context,r=t.canvas,i=e["chart.gutter.left"],o=e["chart.gutter.right"],s=e["chart.gutter.top"],h=e["chart.gutter.bottom"];a.strokeStyle="#aaa",a.fillStyle="#ddd",a.beginPath(),a.moveTo(i,s),a.lineTo(i+10,s-5),a.lineTo(i+10,r.height-h-5),a.lineTo(i,r.height-h),a.moveTo(i,r.height-h),a.lineTo(i+10,r.height-h-5),a.lineTo(r.width-o+10,r.height-h-5),a.lineTo(r.width-o,r.height-h),a.closePath(),a.stroke(),a.fill()},RG.strokedCurvyRect=function(t,e,a,r,i){var o=arguments[5]?arguments[5]:3,s=arguments[6]||null==arguments[6]?!0:!1,h=arguments[7]||null==arguments[7]?!0:!1,n=arguments[8]||null==arguments[8]?!0:!1,l=arguments[9]||null==arguments[9]?!0:!1;t.beginPath(),t.moveTo(e+(s?o:0),a),t.lineTo(e+r-(h?o:0),a),h&&t.arc(e+r-o,a+o,o,RG.PI+RG.HALFPI,RG.TWOPI,!1),t.lineTo(e+r,a+i-(n?o:0)),n&&t.arc(e+r-o,a-o+i,o,RG.TWOPI,RG.HALFPI,!1),t.lineTo(e+(l?o:0),a+i),l&&t.arc(e+o,a-o+i,o,RG.HALFPI,RG.PI,!1),t.lineTo(e,a+(s?o:0)),s&&t.arc(e+o,a+o,o,RG.PI,RG.PI+RG.HALFPI,!1),t.stroke()},RG.filledCurvyRect=function(t,e,a,r,i){var o=arguments[5]?arguments[5]:3,s=arguments[6]||null==arguments[6]?!0:!1,h=arguments[7]||null==arguments[7]?!0:!1,n=arguments[8]||null==arguments[8]?!0:!1,l=arguments[9]||null==arguments[9]?!0:!1;t.beginPath(),s?(t.moveTo(e+o,a+o),t.arc(e+o,a+o,o,RG.PI,RG.PI+RG.HALFPI,!1)):t.fillRect(e,a,o,o),h?(t.moveTo(e+r-o,a+o),t.arc(e+r-o,a+o,o,RG.PI+RG.HALFPI,0,!1)):(t.moveTo(e+r-o,a),t.fillRect(e+r-o,a,o,o)),n?(t.moveTo(e+r-o,a+i-o),t.arc(e+r-o,a-o+i,o,0,RG.HALFPI,!1)):(t.moveTo(e+r-o,a+i-o),t.fillRect(e+r-o,a+i-o,o,o)),l?(t.moveTo(e+o,a+i-o),t.arc(e+o,a-o+i,o,RG.HALFPI,RG.PI,!1)):(t.moveTo(e,a+i-o),t.fillRect(e,a+i-o,o,o)),t.fillRect(e+o,a,r-o-o,i),t.fillRect(e,a+o,o+1,i-o-o),t.fillRect(e+r-o-1,a+o,o+1,i-o-o),t.fill()},RG.hideZoomedCanvas=RG.HideZoomedCanvas=function(){var t=10,e=15;if("object"==typeof RG.zoom_image){var a=RG.zoom_image.obj,r=a.properties;if(r["chart.zoom.fade.out"]){for(var i=e,o=1;i>=0;--i,++o)"object"==typeof RG.zoom_image&&setTimeout("RGraph.zoom_image.style.opacity = "+String(i/10),o*t);"object"==typeof RG.zoom_background&&setTimeout("RGraph.zoom_background.style.opacity = "+String(i/e),o*t)}"object"==typeof RG.zoom_image&&setTimeout("RGraph.zoom_image.style.display = 'none'",r["chart.zoom.fade.out"]?e*t+10:0),"object"==typeof RG.zoom_background&&setTimeout("RGraph.zoom_background.style.display = 'none'",r["chart.zoom.fade.out"]?e*t+10:0)}},RG.addCustomEventListener=RG.AddCustomEventListener=function(t,e,a){var r=RGraph;return"undefined"==typeof r.events[t.uid]&&(r.events[t.uid]=[]),r.events[t.uid].push([t,e,a]),r.events[t.uid].length-1},RG.fireCustomEvent=RG.FireCustomEvent=function(t,e){if(t&&t.isRGraph){t[e]&&t[e](t);var a=t.uid;if("string"==typeof a&&"object"==typeof RG.events&&"object"==typeof RG.events[a]&&RG.events[a].length>0)for(var r=0;r<RG.events[a].length;++r)RG.events[a][r]&&RG.events[a][r][1]==e&&RG.events[a][r][2](t)}},RGraph.removeAllCustomEventListeners=RGraph.RemoveAllCustomEventListeners=function(){var t=arguments[0];t&&RG.events[t]?RG.events[t]=[]:RG.events=[]},RG.removeCustomEventListener=RG.RemoveCustomEventListener=function(t,e){"object"==typeof RG.events&&"object"==typeof RG.events[t.id]&&"object"==typeof RG.events[t.id][e]&&(RG.events[t.id][e]=null)},RG.drawBackgroundImage=RG.DrawBackgroundImage=function(t){var e=t.properties,a=t.canvas,r=t.context;if("string"==typeof e["chart.background.image"]){if("undefined"==typeof a.__rgraph_background_image__){var i=new Image;i.__object__=t,i.__canvas__=a,i.__context__=r,i.src=t.Get("chart.background.image"),a.__rgraph_background_image__=i}else i=a.__rgraph_background_image__;i.onload=function(){t.__rgraph_background_image_loaded__=!0,RG.clear(a),RG.redrawCanvas(a)};var o=t.gutterLeft,s=t.gutterRight,h=t.gutterTop,n=t.gutterBottom,l=e["chart.background.image.stretch"],c=e["chart.background.image.align"];if("string"==typeof c){if(-1!=c.indexOf("right"))var g=a.width-(e["chart.background.image.w"]||i.width)-s;else var g=o;if(-1!=c.indexOf("bottom"))var u=a.height-(e["chart.background.image.h"]||i.height)-n;else var u=h}else var g=o||25,u=h||25;var g="number"==typeof e["chart.background.image.x"]?e["chart.background.image.x"]:g,u="number"==typeof e["chart.background.image.y"]?e["chart.background.image.y"]:u,d=l?a.width-o-s:i.width,f=l?a.height-h-n:i.height;"number"==typeof e["chart.background.image.w"]&&(d=e["chart.background.image.w"]),"number"==typeof e["chart.background.image.h"]&&(f=e["chart.background.image.h"]);var p=r.globalAlpha;r.globalAlpha=e["chart.background.image.alpha"],r.drawImage(i,g,u,d,f),r.globalAlpha=p}},RG.hasTooltips=function(t){var e=t.properties;if("object"==typeof e["chart.tooltips"]&&e["chart.tooltips"]){for(var a=0,r=e["chart.tooltips"].length;r>a;++a)if(!RG.is_null(t.Get("chart.tooltips")[a]))return!0}else if("function"==typeof e["chart.tooltips"])return!0;return!1},RG.createUID=RG.CreateUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*ma.random()|0,a="x"==t?e:3&e|8;return a.toString(16)})},RG.ObjectRegistry.add=RG.ObjectRegistry.Add=function(t){var e=t.uid,a=t.canvas.id;RG.ObjectRegistry.objects.byUID.push([e,t]),RG.ObjectRegistry.objects.byCanvasID.push([a,t])},RG.ObjectRegistry.remove=RG.ObjectRegistry.Remove=function(t){for(var e=(t.id,t.uid),a=0;a<RG.ObjectRegistry.objects.byUID.length;++a)RG.ObjectRegistry.objects.byUID[a]&&RG.ObjectRegistry.objects.byUID[a][1].uid==e&&(RG.ObjectRegistry.objects.byUID[a]=null);for(var a=0;a<RG.ObjectRegistry.objects.byCanvasID.length;++a)RG.ObjectRegistry.objects.byCanvasID[a]&&RG.ObjectRegistry.objects.byCanvasID[a][1]&&RG.ObjectRegistry.objects.byCanvasID[a][1].uid==e&&(RG.ObjectRegistry.objects.byCanvasID[a]=null)},RG.ObjectRegistry.clear=RG.ObjectRegistry.Clear=function(){if(arguments[0])for(var t="object"==typeof arguments[0]?arguments[0].id:arguments[0],e=RG.ObjectRegistry.getObjectsByCanvasID(t),a=0,r=e.length;r>a;++a)RG.ObjectRegistry.remove(e[a]);else RG.ObjectRegistry.objects={},RG.ObjectRegistry.objects.byUID=[],RG.ObjectRegistry.objects.byCanvasID=[]},RGraph.ObjectRegistry.list=RGraph.ObjectRegistry.List=function(){for(var t=[],e=0,a=RG.ObjectRegistry.objects.byUID.length;a>e;++e)RG.ObjectRegistry.objects.byUID[e]&&t.push(RG.ObjectRegistry.objects.byUID[e][1].type);return arguments[0]?t:void p(t)},RG.ObjectRegistry.clearByType=RG.ObjectRegistry.ClearByType=function(t){for(var e=RG.ObjectRegistry.objects.byUID,a=0,r=e.length;r>a;++a)if(e[a]){var i=(e[a][0],e[a][1]);i&&i.type==t&&RG.ObjectRegistry.remove(i)}},RG.ObjectRegistry.iterate=RG.ObjectRegistry.Iterate=function(t){for(var e=RGraph.ObjectRegistry.objects.byUID,a=0,r=e.length;r>a;++a)if("string"==typeof arguments[1])for(var i=arguments[1].split(/,/),o=0,s=i.length;s>o;++o)i[o]==e[a][1].type&&t(e[a][1]);else t(e[a][1])},RG.ObjectRegistry.getObjectsByCanvasID=function(t){for(var e=RG.ObjectRegistry.objects.byCanvasID,a=[],r=0,i=e.length;i>r;++r)e[r]&&e[r][0]==t&&a.push(e[r][1]);return a},RG.ObjectRegistry.getFirstObjectByXY=RG.ObjectRegistry.getObjectByXY=function(t){for(var e=t.target,a=RG.ObjectRegistry.getObjectsByCanvasID(e.id),r=a.length-1;r>=0;--r){var i=a[r].getObjectByXY(t);if(i)return i}},RG.ObjectRegistry.getObjectsByXY=function(t){for(var e=t.target,a=[],r=RG.ObjectRegistry.getObjectsByCanvasID(e.id),i=r.length-1;i>=0;--i){var o=r[i].getObjectByXY(t);o&&a.push(o)}return a},RG.ObjectRegistry.getObjectByUID=function(t){for(var e=RG.ObjectRegistry.objects.byUID,a=0,r=e.length;r>a;++a)if(e[a]&&e[a][1].uid==t)return e[a][1]},RG.ObjectRegistry.bringToFront=function(t){var e="undefined"==typeof arguments[1]?!0:arguments[1];RG.ObjectRegistry.remove(t),RG.ObjectRegistry.add(t),e&&RG.redrawCanvas(t.canvas)},RG.ObjectRegistry.getObjectsByType=function(t){for(var e=RG.ObjectRegistry.objects.byUID,a=[],r=0,i=e.length;i>r;++r)e[r]&&e[r][1]&&e[r][1].type&&e[r][1].type&&e[r][1].type==t&&a.push(e[r][1]);return a},RG.ObjectRegistry.getFirstObjectByType=function(t){for(var e=RG.ObjectRegistry.objects.byUID,a=0,r=e.length;r>a;++a)if(e[a]&&e[a][1]&&e[a][1].type==t)return e[a][1];return null},RG.getAngleByXY=function(t,e,a,r){var i=ma.atan((r-e)/(a-t));return i=ma.abs(i),a>=t&&r>=e?i+=RG.TWOPI:a>=t&&e>r?i=RG.HALFPI-i+(RG.PI+RG.HALFPI):t>a&&e>r?i+=RG.PI:i=RG.PI-i,i>RG.TWOPI&&(i-=RG.TWOPI),i},RG.getHypLength=function(t,e,a,r){var i=ma.sqrt((a-t)*(a-t)+(r-e)*(r-e));return i},RG.getRadiusEndPoint=function(t,e,a,r){var i=t+ma.cos(a)*r,o=e+ma.sin(a)*r;return[i,o]},RG.installEventListeners=RG.InstallEventListeners=function(t){var e=t.properties;RG.ISOLD||(RG.installCanvasClickListener?(RG.installWindowMousedownListener(t),RG.installWindowMouseupListener(t),RG.installCanvasMousemoveListener(t),RG.installCanvasMouseupListener(t),RG.installCanvasMousedownListener(t),RG.installCanvasClickListener(t)):(RG.hasTooltips(t)||e["chart.adjustable"]||e["chart.annotatable"]||e["chart.contextmenu"]||e["chart.resizable"]||e["chart.key.interactive"]||e["chart.events.click"]||e["chart.events.mousemove"]||"function"==typeof t.onclick||"function"==typeof t.onmousemove)&&alert("[RGRAPH] You appear to have used dynamic features but not included the file: RGraph.common.dynamic.js"))},RG.pr=function(t){var e=arguments[2]?arguments[2]:"    ",a="",r="number"==typeof arguments[3]?arguments[3]:0;if(r>=5)return"";switch(typeof t){case"string":a+=t+" ("+typeof t+", "+t.length+")";break;case"number":a+=t+" ("+typeof t+")";break;case"boolean":a+=t+" ("+typeof t+")";break;case"function":a+="function () {}";break;case"undefined":a+="undefined";break;case"null":a+="null";break;case"object":if(RGraph.is_null(t))a+=e+"null\n";else{a+=e+"Object {\n";for(j in t)a+=e+"    "+j+" => "+RGraph.pr(t[j],!0,e+"    ",r+1)+"\n";a+=e+"}"}break;default:a+="Unknown type: "+typeof t}return arguments[1]||alert(a),a},RG.dashedLine=RG.DashedLine=function(t,e,a,r,i){var o=5;"number"==typeof arguments[5]&&(o=arguments[5]);var s=r-e,h=i-a,n=ma.floor(ma.sqrt(s*s+h*h)/o),l=s/n,c=h/n,g=0;do g%2==0&&g>0?t.lineTo(e,a):t.moveTo(e,a),e+=l,a+=c;while(g++<=n)},RG.AJAX=function(t,e){if(window.XMLHttpRequest)var a=new XMLHttpRequest;else if(window.ActiveXObject)var a=new ActiveXObject("Microsoft.XMLHTTP");a.onreadystatechange=function(){4==this.readyState&&200==this.status&&(this.__user_callback__=e,this.__user_callback__(this.responseText))},a.open("GET",t,!0),a.send()},RG.AJAX.POST=function(t,e,a){var r=[];if(window.XMLHttpRequest)var o=new XMLHttpRequest;else if(window.ActiveXObject)var o=new ActiveXObject("Microsoft.XMLHTTP");o.onreadystatechange=function(){4==this.readyState&&200==this.status&&(this.__user_callback__=a,this.__user_callback__(this.responseText))},o.open("POST",t,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(i in e)"string"==typeof i&&r.push(i+"="+encodeURIComponent(e[i]));o.send(r.join("&"))},RG.AJAX.getNumber=function(t,e){RG.AJAX(t,function(){var t=parseFloat(this.responseText);e(t)})},RG.AJAX.getString=function(t,e){RG.AJAX(t,function(){var t=String(this.responseText);e(t)})},RG.AJAX.getJSON=function(url,callback){RG.AJAX(url,function(){var json=eval("("+this.responseText+")");callback(json)})},RG.AJAX.getCSV=function(t,e){var a=arguments[2]?arguments[2]:",";RG.AJAX(t,function(){for(var t=new RegExp(a),r=this.responseText.split(t),i=0,o=r.length;o>i;++i)r[i]=parseFloat(r[i]);e(r)})},RG.rotateCanvas=RG.RotateCanvas=function(t,e,a,r){var i=t.getContext("2d");i.translate(e,a),i.rotate(r),i.translate(0-e,0-a)},RG.measureText=RG.MeasureText=function(t,e,a,r){"undefined"==typeof RGraph.measuretext_cache&&(RGraph.measuretext_cache=[]);var i=t+":"+e+":"+a+":"+r;if("object"==typeof RGraph.measuretext_cache&&RGraph.measuretext_cache[i])return RGraph.measuretext_cache[i];if(RGraph.measuretext_cache["text-div"]){if(RGraph.measuretext_cache["text-div"])var o=RGraph.measuretext_cache["text-div"]}else{var o=document.createElement("DIV");o.style.position="absolute",o.style.top="-100px",o.style.left="-100px",document.body.appendChild(o),RGraph.measuretext_cache["text-div"]=o}o.innerHTML=t.replace(/\r\n/g,"<br />"),o.style.fontFamily=a,o.style.fontWeight=e?"bold":"normal",o.style.fontSize=(r||12)+"pt";var r=[o.offsetWidth,o.offsetHeight];return RGraph.measuretext_cache[i]=r,r},RG.text2=RG.Text2=function(t,e){if(t&&t.isRGraph)var a=t.context,r=t.canvas;else if("string"==typeof t)var r=document.getElementById(t),a=r.getContext("2d");else if("function"==typeof t.getContext)var r=t,a=r.getContext("2d");else if(-1!=t.toString().indexOf("CanvasRenderingContext2D")||RGraph.ISIE8&&t.moveTo)var a=t,r=t.canvas;else if(RG.ISOLD&&t.fillText)var a=t,r=t.canvas;var i=e.x,o=e.y,s=i,h=o,n=e.text,l=n.split(/\r?\n/g),c=l.length,g=e.font?e.font:"Arial",u=e.size?e.size:10,d=1.5*u,f=(e.bold,e.italic,e.halign?e.halign:"left"),p=e.valign?e.valign:"bottom",m="string"==typeof e.tag&&e.tag.length>0?e.tag:"",y=(e.marker,e.angle||0);"string"==typeof e.boundingFill&&(e["bounding.fill"]=e.boundingFill),"string"==typeof e.boundingStroke&&(e["bounding.stroke"]=e.boundingStroke);var v=e.bounding,b=e["bounding.stroke"]?e["bounding.stroke"]:"black",x=e["bounding.fill"]?e["bounding.fill"]:"rgba(255,255,255,0.7)",R=e["bounding.shadow"],G=e["bounding.shadow.color"]||"#ccc",_=e["bounding.shadow.blur"]||3,k=e["bounding.shadow.offsetx"]||3,w=e["bounding.shadow.offsety"]||3,T=e["bounding.linewidth"]||1,S={};if("number"==typeof n&&(n=String(n)),"string"!=typeof n)return void alert("[RGRAPH TEXT] The text given must a string or a number");0!=y&&(a.save(),a.translate(i,o),a.rotate(ma.PI/180*y),i=0,o=0),a.font=(e.italic?"italic ":"")+(e.bold?"bold ":"")+u+"pt "+g;for(var j=0,C=0;c>C;++C)j=ma.max(j,a.measureText(l[C]).width);var A=d*c;if(e.marker){var I=10,E=a.strokeStyle;a.beginPath(),a.strokeStyle="red",a.moveTo(i,o-I),a.lineTo(i,o+I),a.moveTo(i-I,o),a.lineTo(i+I,o),a.stroke(),a.strokeStyle=E}if("center"==f){a.textAlign="center";var L=i-2-j/2}else if("right"==f){a.textAlign="right";var L=i-2-j}else{a.textAlign="left";var L=i-2}if("center"==p){a.textBaseline="middle",o-=1,o-=(c-1)/2*d;var z=o-d/2-2}else if("top"==p){a.textBaseline="top";var z=o-2}else{a.textBaseline="bottom",c>1&&(o-=(c-1)*d);var z=o-d-2}var O=j+4,F=A+4;if(v){var P=a.lineWidth,D=a.strokeStyle,B=a.fillStyle,M=a.shadowColor,N=a.shadowBlur,X=a.shadowOffsetX,W=a.shadowOffsetY;
a.lineWidth=T,a.strokeStyle=b,a.fillStyle=x,R&&(a.shadowColor=G,a.shadowBlur=_,a.shadowOffsetX=k,a.shadowOffsetY=w),a.strokeRect(L,z,O,F),a.fillRect(L,z,O,F),a.lineWidth=P,a.strokeStyle=D,a.fillStyle=B,a.shadowColor=M,a.shadowBlur=N,a.shadowOffsetX=X,a.shadowOffsetY=W}if(c>1)for(var C=0;c>C;++C)a.fillText(l[C],i,o+d*C);else a.fillText(n,i+.5,o+.5);return 0!=y&&(90==y?"left"==f?("bottom"==p&&(L=s-2,z=h-2,O=A+4,F=j+4),"center"==p&&(L=s-A/2-2,z=h-2,O=A+4,F=j+4),"top"==p&&(L=s-A-2,z=h-2,O=A+4,F=j+4)):"center"==f?("bottom"==p&&(L=s-2,z=h-j/2-2,O=A+4,F=j+4),"center"==p&&(L=s-A/2-2,z=h-j/2-2,O=A+4,F=j+4),"top"==p&&(L=s-A-2,z=h-j/2-2,O=A+4,F=j+4)):"right"==f&&("bottom"==p&&(L=s-2,z=h-j-2,O=A+4,F=j+4),"center"==p&&(L=s-A/2-2,z=h-j-2,O=A+4,F=j+4),"top"==p&&(L=s-A-2,z=h-j-2,O=A+4,F=j+4)):180==y?"left"==f?("bottom"==p&&(L=s-j-2,z=h-2,O=j+4,F=A+4),"center"==p&&(L=s-j-2,z=h-A/2-2,O=j+4,F=A+4),"top"==p&&(L=s-j-2,z=h-A-2,O=j+4,F=A+4)):"center"==f?("bottom"==p&&(L=s-j/2-2,z=h-2,O=j+4,F=A+4),"center"==p&&(L=s-j/2-2,z=h-A/2-2,O=j+4,F=A+4),"top"==p&&(L=s-j/2-2,z=h-A-2,O=j+4,F=A+4)):"right"==f&&("bottom"==p&&(L=s-2,z=h-2,O=j+4,F=A+4),"center"==p&&(L=s-2,z=h-A/2-2,O=j+4,F=A+4),"top"==p&&(L=s-2,z=h-A-2,O=j+4,F=A+4)):270==y&&("left"==f?("bottom"==p&&(L=s-A-2,z=h-j-2,O=A+4,F=j+4),"center"==p&&(L=s-A/2-4,z=h-j-2,O=A+4,F=j+4),"top"==p&&(L=s-2,z=h-j-2,O=A+4,F=j+4)):"center"==f?("bottom"==p&&(L=s-A-2,z=h-j/2-2,O=A+4,F=j+4),"center"==p&&(L=s-A/2-4,z=h-j/2-2,O=A+4,F=j+4),"top"==p&&(L=s-2,z=h-j/2-2,O=A+4,F=j+4)):"right"==f&&("bottom"==p&&(L=s-A-2,z=h-2,O=A+4,F=j+4),"center"==p&&(L=s-A/2-2,z=h-2,O=A+4,F=j+4),"top"==p&&(L=s-2,z=h-2,O=A+4,F=j+4))),a.restore()),a.textBaseline="alphabetic",a.textAlign="left",S.x=L,S.y=z,S.width=O,S.height=F,S.object=t,S.text=n,S.tag=m,t&&t.isRGraph&&t.coordsText&&t.coordsText.push(S),S},RG.sequentialIndexToGrouped=function(t,e){for(var a=0,r=0;--t>=0;)RG.is_null(e[a])?(a++,r=0):"number"!=typeof e[a]?(r++,r>=e[a].length&&(a++,r=0)):(a++,r=0);return[a,r]},RG.Highlight.rect=RG.Highlight.Rect=function(t,e){var a=(t.canvas,t.context),r=t.properties;r["chart.tooltips.highlight"]&&(a.lineWidth=1,a.beginPath(),a.strokeStyle=r["chart.highlight.stroke"],a.fillStyle=r["chart.highlight.fill"],a.rect(e.x,e.y,e.width,e.height),a.stroke(),a.fill())},RG.Highlight.point=RG.Highlight.Point=function(t,e){var a=t.properties,r=(t.canvas,t.context);if(a["chart.tooltips.highlight"]){r.beginPath(),r.strokeStyle=a["chart.highlight.stroke"],r.fillStyle=a["chart.highlight.fill"];var i=a["chart.highlight.point.radius"]||2;r.arc(e.x,e.y,i,0,RG.TWOPI,0),r.stroke(),r.fill()}},RG.parseDate=function(t){if(t=RG.trim(t),"now"===t&&(t=(new Date).toString()),t.match(/^(\d\d\d\d)(-|\/)(\d\d)(-|\/)(\d\d)( |T)(\d\d):(\d\d):(\d\d)$/)&&(t=RegExp.$1+"-"+RegExp.$3+"-"+RegExp.$5+"T"+RegExp.$7+":"+RegExp.$8+":"+RegExp.$9),t.match(/^\d\d\d\d-\d\d-\d\d$/)&&(t=t.replace(/-/g,"/")),t.match(/^\d\d:\d\d:\d\d$/)){var e=new Date,a=e.getDate(),r=e.getMonth()+1,i=e.getFullYear();1===String(r).length&&(r="0"+r),1===String(a).length&&(a="0"+a),t=i+"/"+r+"/"+a+" "+t}return Date.parse(t)},RG.resetColorsToOriginalValues=function(t){if(t.original_colors)for(var e in t.original_colors)"string"==typeof e&&"chart."===e.substr(0,6)&&(t.properties[e]=RG.arrayClone(t.original_colors[e]));"function"==typeof t.resetColorsToOriginalValues&&t.resetColorsToOriginalValues(),t.colorsParsed=!1},RG.path=RG.Path=function(t,e){if(t.isRGraph&&"string"==typeof t.type)var a=t.context;else var a=t;"string"==typeof e&&(e=e.split(/ +/));for(var r=0,i=e.length;i>r;r+=1){var o=e[r];switch(o){case"b":a.beginPath();break;case"c":a.closePath();break;case"m":a.moveTo(parseFloat(e[r+1]),parseFloat(e[r+2])),r+=2;break;case"l":a.lineTo(parseFloat(e[r+1]),parseFloat(e[r+2])),r+=2;break;case"s":a.strokeStyle=e[r+1],a.stroke(),r+=1;break;case"f":a.fillStyle=e[r+1],a.fill(),r+=1;break;case"qc":a.quadraticCurveTo(parseFloat(e[r+1]),parseFloat(e[r+2]),parseFloat(e[r+3]),parseFloat(e[r+4])),r+=4;break;case"bc":a.bezierCurveTo(parseFloat(e[r+1]),parseFloat(e[r+2]),parseFloat(e[r+3]),parseFloat(e[r+4]),parseFloat(e[r+5]),parseFloat(e[r+6])),r+=6;break;case"r":a.rect(parseFloat(e[r+1]),parseFloat(e[r+2]),parseFloat(e[r+3]),parseFloat(e[r+4])),r+=4;break;case"a":a.arc(parseFloat(e[r+1]),parseFloat(e[r+2]),parseFloat(e[r+3]),parseFloat(e[r+4]),parseFloat(e[r+5]),"true"===e[r+6]||e[r+6]===!0?!0:!1),r+=6;break;case"at":a.arcTo(parseFloat(e[r+1]),parseFloat(e[r+2]),parseFloat(e[r+3]),parseFloat(e[r+4]),parseFloat(e[r+5])),r+=5;break;case"lw":a.lineWidth=parseFloat(e[r+1]),r+=1;break;case"lj":a.lineJoin=e[r+1],r+=1;break;case"lc":a.lineCap=e[r+1],r+=1;break;case"sc":a.shadowColor=e[r+1],r+=1;break;case"sb":a.shadowBlur=parseFloat(e[r+1]),r+=1;break;case"sx":a.shadowOffsetX=parseFloat(e[r+1]),r+=1;break;case"sy":a.shadowOffsetY=parseFloat(e[r+1]),r+=1;break;case"fu":e[r+1](t),r+=1}}},RG.linearGradient=RG.LinearGradient=function(t,e,a,r,i){for(var o=t.context.createLinearGradient(e,a,r,i),s=arguments.length-5,h=5;h<arguments.length;++h){var n=arguments[h],l=(h-5)/(s-1);o.addColorStop(l,n)}return o},RG.radialGradient=RG.RadialGradient=function(t,e,a,r,i,o,s){for(var h=t.context.createRadialGradient(e,a,r,i,o,s),n=arguments.length-7,l=7;l<arguments.length;++l){var c=arguments[l],g=(l-7)/(n-1);h.addColorStop(g,c)}return h},RG.addEventListener=RG.AddEventListener=function(t,e,a){var r=arguments[3]?arguments[3]:"unknown";RG.Registry.get("chart.event.handlers").push([t,e,a,r])},RG.clearEventListeners=RG.ClearEventListeners=function(t){if(t&&"window"==t)window.removeEventListener("mousedown",window.__rgraph_mousedown_event_listener_installed__,!1),window.removeEventListener("mouseup",window.__rgraph_mouseup_event_listener_installed__,!1);else{var e=document.getElementById(t);e.removeEventListener("mouseup",e.__rgraph_mouseup_event_listener_installed__,!1),e.removeEventListener("mousemove",e.__rgraph_mousemove_event_listener_installed__,!1),e.removeEventListener("mousedown",e.__rgraph_mousedown_event_listener_installed__,!1),e.removeEventListener("click",e.__rgraph_click_event_listener_installed__,!1)}},RG.hidePalette=RG.HidePalette=function(){var t=RG.Registry.get("palette");"object"==typeof t&&t&&(t.style.visibility="hidden",t.style.display="none",RG.Registry.set("palette",null))},RG.random=function(t,e){var a=arguments[2]?arguments[2]:0,r=ma.random();return Number(((e-t)*r+t).toFixed(a))},RG.random.array=function(t,e,a){for(var r=[],i=0;t>i;i+=1)r.push(RG.random(e,a));return r},RG.noShadow=RG.NoShadow=function(t){var e=t.context;e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0},RG.setShadow=RG.SetShadow=function(t,e,a,r,i){var o=t.context;o.shadowColor=e,o.shadowOffsetX=a,o.shadowOffsetY=r,o.shadowBlur=i},RG.Registry.set=RG.Registry.Set=function(t,e){return RG.Registry.store[t]=e,e},RG.Registry.get=RG.Registry.Get=function(t){return RG.Registry.store[t]},RG.degrees2Radians=function(t){return t*(RG.PI/180)},RG.log=function(t,e){return ma.log(t)/(e?ma.log(e):1)},RG.isArray=RG.is_array=function(t){return null!=t&&-1!=t.constructor.toString().indexOf("Array")},RG.trim=function(t){return RG.ltrim(RG.rtrim(t))},RG.ltrim=function(t){return t.replace(/^(\s|\0)+/,"")},RG.rtrim=function(t){return t.replace(/(\s|\0)+$/,"")},RG.isNull=RG.is_null=function(t){return null==t||"object"==typeof t&&!t?!0:!1},RG.async=RG.Async=function(t){return setTimeout(t,arguments[1]?arguments[1]:1)},RG.reset=RG.Reset=function(t){t.width=t.width,RG.ObjectRegistry.clear(t),t.__rgraph_aa_translated__=!1},RG.att=function(t){},RG.getCanvasTag=function(t){t="object"==typeof t?t.id:t;var e=doc.getElementById(t);return[t,e]},RG.Effects.updateCanvas=RG.Effects.UpdateCanvas=function(t){win.requestAnimationFrame=win.requestAnimationFrame||win.webkitRequestAnimationFrame||win.msRequestAnimationFrame||win.mozRequestAnimationFrame||function(t){setTimeout(t,16.666)},win.requestAnimationFrame(t)},RG.Effects.getEasingMultiplier=function(t,e){return ma.pow(ma.sin(e/t*RG.HALFPI),3)},RG.stringsToNumbers=function(t){var e=arguments[1]||",";if("number"==typeof t)return t;if("string"==typeof t&&(t=-1!=t.indexOf(e)?t.split(e):parseFloat(t)),"object"==typeof t)for(var a=0,r=t.length;r>a;a+=1)t[a]=parseFloat(t[a]);return t},RG.cachedDraw=function(t,e,a){RG.cache[e]||(RG.cache[e]={},RG.cache[e].object=t,RG.cache[e].canvas=jQuery("<canvas></canvas>").attr({width:t.canvas.width,height:t.canvas.height,id:"background_cached_canvas"+t.canvas.id}).get(0),"object"==typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement&&G_vmlCanvasManager.initElement(RG.cache[e].canvas),RG.cache[e].context=RG.cache[e].canvas.getContext("2d"),RG.cache[e].context.translate(.5,.5),a(t,RG.cache[e].canvas,RG.cache[e].context)),t.context.drawImage(RG.cache[e].canvas,-.5,-.5)},RG.parseObjectStyleConfig=function(t,e){var a=function(t,e,r,i){for(key in e){var o=!1,s=!1,h=e[key];!RG.isNull(h)&&h.constructor&&(o=h.constructor.toString().indexOf("Object")>0,s=h.constructor.toString().indexOf("Array")>0),o&&!s?a(t,e[key],r+"."+key,i):"self"===key?i[r]=h:i[r+"."+key]=h}return i},r=a(t,e,"chart",{});for(key in r)"string"==typeof key&&t.set(key,r[key])}}(window,document),window.$p=function(){RGraph.pr(arguments[0],arguments[1],arguments[3])},window.$a=function(t){alert(t)},window.$cl=function(t){return console.log(t)},RGraph=window.RGraph||{isRGraph:!0},RGraph.Line=function(t){if("object"==typeof t&&"object"==typeof t.data&&"string"==typeof t.id)var e=t.id,a=document.getElementById(e),r=t.data,i=!0;else var e=t,a=document.getElementById(e),r=arguments[1];this.id=e,this.canvas=a,this.context=this.canvas.getContext("2d"),this.canvas.__object__=this,this.type="line",this.max=0,this.coords=[],this.coords2=[],this.coords.key=[],this.coordsText=[],this.coordsSpline=[],this.hasnegativevalues=!1,this.isRGraph=!0,this.uid=RGraph.CreateUID(),this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID(),this.colorsParsed=!1,this.original_colors=[],this.firstDraw=!0,this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)","chart.background.grid":1,"chart.background.grid.width":1,"chart.background.grid.hsize":25,"chart.background.grid.vsize":25,"chart.background.grid.color":"#ddd","chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.align":!1,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.grid.dashed":!1,"chart.background.grid.dotted":!1,"chart.background.hbars":null,"chart.background.image":null,"chart.background.image.stretch":!0,"chart.background.image.x":null,"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.background.color":null,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.size":8,"chart.labels.above.decimals":null,"chart.xtickgap":20,"chart.smallxticks":3,"chart.largexticks":5,"chart.ytickgap":20,"chart.smallyticks":3,"chart.largeyticks":5,"chart.numyticks":10,"chart.linewidth":2.01,"chart.colors":["red","#0f0","#00f","#f0f","#ff0","#0ff","green","pink","blue","black"],"chart.hmargin":0,"chart.tickmarks.dot.color":"white","chart.tickmarks":"endcircle","chart.tickmarks.linewidth":null,"chart.tickmarks.image":null,"chart.tickmarks.image.halign":"center","chart.tickmarks.image.valign":"center","chart.tickmarks.image.offsetx":0,"chart.tickmarks.image.offsety":0,"chart.ticksize":3,"chart.gutter.left":25,"chart.gutter.right":25,"chart.gutter.top":25,"chart.gutter.bottom":30,"chart.tickdirection":-1,"chart.yaxispoints":5,"chart.fillstyle":null,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.xticks":null,"chart.text.size":10,"chart.text.angle":0,"chart.text.color":"black","chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.font":null,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.yaxis.x":null,"chart.title.yaxis.y":null,"chart.title.xaxis.x":null,"chart.title.xaxis.y":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.shadow":!0,"chart.shadow.offsetx":2,"chart.shadow.offsety":2,"chart.shadow.blur":3,"chart.shadow.color":"rgba(128,128,128,0.5)","chart.tooltips":null,"chart.tooltips.hotspot.xonly":!1,"chart.tooltips.hotspot.size":5,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onmousemove","chart.tooltips.highlight":!0,"chart.tooltips.coords.page":!1,"chart.highlight.stroke":"gray","chart.highlight.fill":"white","chart.stepped":!1,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.halign":null,"chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!1,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.interactive":!1,"chart.key.interactive.highlight.chart.stroke":"rgba(255,0,0,0.3)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.text.color":"black","chart.contextmenu":null,"chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.scale.invert":!1,"chart.xlabels.inside":!1,"chart.xlabels.inside.color":"rgba(255,255,255,0.5)","chart.noaxes":!1,"chart.noyaxis":!1,"chart.noxaxis":!1,"chart.noendxtick":!1,"chart.noendytick":!1,"chart.units.post":"","chart.units.pre":"","chart.scale.zerostart":!1,"chart.scale.decimals":null,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.annotatable":!1,"chart.annotate.color":"black","chart.axesontop":!1,"chart.filled":!1,"chart.filled.range":!1,"chart.filled.range.threshold":null,"chart.filled.range.threshold.colors":["red","green"],"chart.filled.accumulative":!0,"chart.variant":null,"chart.axis.color":"black","chart.axis.linewidth":1,"chart.numxticks":r&&"number"==typeof r[0]?r.length-1:20,"chart.numyticks":10,"chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.zoom.action":"zoom","chart.backdrop":!1,"chart.backdrop.size":30,"chart.backdrop.alpha":.2,"chart.resizable":!1,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.noredraw":!1,"chart.outofbounds":!1,"chart.chromefix":!0,"chart.animation.factor":1,"chart.animation.unfold.x":!1,"chart.animation.unfold.y":!0,"chart.animation.unfold.initial":2,"chart.animation.trace.clip":1,"chart.curvy":!1,"chart.line.visible":!0,"chart.events.click":null,"chart.events.mousemove":null};for(var o=1;o<arguments.length;++o)"null"!=typeof arguments[o]&&arguments[o]||(arguments[o]=[]);if(this.original_data=[],"object"==typeof t&&t.data)if("number"==typeof t.data[0]||RGraph.isNull(t.data[0]))this.original_data[0]=RGraph.arrayClone(t.data);else for(var o=0;o<t.data.length;++o)this.original_data[o]=RGraph.arrayClone(t.data[o]);else for(var o=1;o<arguments.length;++o)if(arguments[1]&&"object"==typeof arguments[1]&&arguments[1][0]&&"object"==typeof arguments[1][0]&&arguments[1][0].length){for(var s=[],o=0;o<arguments[1].length;++o)s[o]=RGraph.array_clone(arguments[1][o]);for(var h=0;h<s.length;++h)this.original_data[h]=RGraph.array_clone(s[h])}else this.original_data[o-1]=RGraph.array_clone(arguments[o]);if(!this.canvas)return void alert("[LINE] Fatal error: no canvas support");this.data_arr=RGraph.array_linearize(this.original_data);for(var o=0;o<this.data_arr.length;++o)this["$"+o]={};this.canvas.__rgraph_aa_translated__||(this.context.translate(.5,.5),this.canvas.__rgraph_aa_translated__=!0);{var n=RGraph,l=this.canvas,c=l.getContext("2d"),g=this.properties,u=jQuery,d=(n.Path,window),f=document;Math}n.Effects&&"function"==typeof n.Effects.decorate&&n.Effects.decorate(this),this.set=this.Set=function(t){var e="undefined"==typeof arguments[1]?null:arguments[1];if(1===arguments.length&&"object"==typeof t)return n.parseObjectStyleConfig(this,t),this;if(t=t.toLowerCase(),"chart."!=t.substr(0,6)&&(t="chart."+t),"chart.tooltips"==t&&"object"==typeof e&&e){for(var a=[],r=1;r<arguments.length;r++)if("object"==typeof arguments[r]&&arguments[r][0])for(var i=0;i<arguments[r].length;i++)a.push(arguments[r][i]);else"function"==typeof arguments[r]?a=arguments[r]:a.push(arguments[r]);e=a}if("chart.linewidth"==t&&navigator.userAgent.match(/Chrome/))if(1==e)e=1.01;else if(RGraph.is_array(e))for(var r=0;r<e.length;++r)"number"==typeof e[r]&&1==e[r]&&(e[r]=1.01);return"chart.xaxispos"==t&&"bottom"!=e&&"center"!=e&&"top"!=e&&(alert("[LINE] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+e+" Changing it to center"),e="center"),"chart.xticks"==t&&(t="chart.numxticks"),"chart.spline"==t&&(t="chart.curvy"),"chart.ylabels.invert"==t&&(t="chart.scale.invert"),this.properties[t]=e,this},this.get=this.Get=function(t){return"chart."!=t.substr(0,6)&&(t="chart."+t),"chart.spline"==t&&(t="chart.curvy"),g[t]},this.draw=this.Draw=function(){if("string"==typeof g["chart.background.image"]&&n.DrawBackgroundImage(this),n.FireCustomEvent(this,"onbeforedraw"),this.colorsParsed||(this.parseColors(),this.colorsParsed=!0),this.gutterLeft=g["chart.gutter.left"],this.gutterRight=g["chart.gutter.right"],this.gutterTop=g["chart.gutter.top"],this.gutterBottom=g["chart.gutter.bottom"],this.data=n.array_clone(this.original_data),this.max=0,g["chart.filled"]&&!g["chart.filled.range"]&&this.data.length>1&&g["chart.filled.accumulative"])for(var t=[],e=0;e<this.data.length;++e)for(var a=0;a<this.data[e].length;++a)this.data[e][a]=Number(t[a]?t[a]:0)+this.data[e][a],t[a]=this.data[e][a];if(g["chart.ymax"]){if(this.max=g["chart.ymax"],this.min=g["chart.ymin"]?g["chart.ymin"]:0,this.scale2=n.getScale2(this,{max:this.max,min:g["chart.ymin"],strict:!0,"scale.thousand":g["chart.scale.thousand"],"scale.point":g["chart.scale.point"],"scale.decimals":g["chart.scale.decimals"],"ylabels.count":g["chart.ylabels.count"],"scale.round":g["chart.scale.round"],"units.pre":g["chart.units.pre"],"units.post":g["chart.units.post"]}),this.max=this.scale2.max?this.scale2.max:0,!g["chart.outofbounds"])for(dataset=0;dataset<this.data.length;++dataset)if(RGraph.isArray(this.data[dataset]))for(var r=0;r<this.data[dataset].length;r++)this.hasnegativevalues=this.data[dataset][r]<0||this.hasnegativevalues}else{for(this.min=g["chart.ymin"]?g["chart.ymin"]:0,dataset=0;dataset<this.data.length;++dataset)for(var r=0;r<this.data[dataset].length;r++)this.max=Math.max(this.max,this.data[dataset][r]?Math.abs(parseFloat(this.data[dataset][r])):0),g["chart.outofbounds"]||(this.hasnegativevalues=this.data[dataset][r]<0||this.hasnegativevalues);this.scale2=n.getScale2(this,{max:this.max,min:g["chart.ymin"],"scale.thousand":g["chart.scale.thousand"],"scale.point":g["chart.scale.point"],"scale.decimals":g["chart.scale.decimals"],"ylabels.count":g["chart.ylabels.count"],"scale.round":g["chart.scale.round"],"units.pre":g["chart.units.pre"],"units.post":g["chart.units.post"]}),this.max=this.scale2.max?this.scale2.max:0}g["chart.contextmenu"]&&n.ShowContext(this),this.coords=[],this.coordsText=[],this.grapharea=l.height-this.gutterTop-this.gutterBottom,this.halfgrapharea=this.grapharea/2,this.halfTextHeight=g["chart.text.size"]/2,"bottom"==g["chart.xaxispos"]&&this.hasnegativevalues&&!n.ISOPERA&&alert("[LINE] You have negative values and the X axis is at the bottom. This is not good..."),"3d"==g["chart.variant"]&&n.Draw3DAxes(this),n.background.Draw(this),g["chart.background.hbars"]&&g["chart.background.hbars"].length>0&&n.DrawBars(this),0==g["chart.axesontop"]&&this.DrawAxes(),c.save(),c.beginPath(),c.rect(0,0,l.width*g["chart.animation.trace.clip"],l.height),c.clip();for(var i=0,o=0,s=this.data.length;s>i;i++,o++){if(c.beginPath(),g["chart.filled"]||this.SetShadow(i),g["chart.fillstyle"]){if("object"==typeof g["chart.fillstyle"]&&g["chart.fillstyle"][o])var h=g["chart.fillstyle"][o];else if("object"==typeof g["chart.fillstyle"]&&g["chart.fillstyle"].toString().indexOf("Gradient")>0)var h=g["chart.fillstyle"];else if("string"==typeof g["chart.fillstyle"])var h=g["chart.fillstyle"]}else if(g["chart.filled"])var h=g["chart.colors"][o];else var h=null;if(g["chart.tickmarks"]&&"object"==typeof g["chart.tickmarks"])var u=g["chart.tickmarks"][i];else if(g["chart.tickmarks"]&&"string"==typeof g["chart.tickmarks"])var u=g["chart.tickmarks"];else if(g["chart.tickmarks"]&&"function"==typeof g["chart.tickmarks"])var u=g["chart.tickmarks"];else var u=null;this.DrawLine(this.data[i],g["chart.colors"][o],h,this.GetLineWidth(o),u,i),c.stroke()}if(g["chart.filled"]&&g["chart.filled.accumulative"]&&!g["chart.curvy"]){for(var i=0;i<this.coords2.length;++i){c.beginPath(),c.lineWidth=this.GetLineWidth(i),c.strokeStyle=g["chart.colors"][i];for(var o=0,s=this.coords2[i].length;s>o;++o)0==o||null==this.coords2[i][o][1]||this.coords2[i][o-1]&&null==this.coords2[i][o-1][1]?c.moveTo(this.coords2[i][o][0],this.coords2[i][o][1]):(g["chart.stepped"]&&c.lineTo(this.coords2[i][o][0],this.coords2[i][o-1][1]),c.lineTo(this.coords2[i][o][0],this.coords2[i][o][1]));c.stroke()}if(g["chart.tickmarks"]){c.beginPath(),c.fillStyle="white";for(var i=0,s=this.coords2.length;s>i;++i){c.beginPath(),c.strokeStyle=g["chart.colors"][i];for(var o=0;o<this.coords2[i].length;++o)if("object"==typeof this.coords2[i][o]&&"number"==typeof this.coords2[i][o][0]&&"number"==typeof this.coords2[i][o][1]){var u="object"==typeof g["chart.tickmarks"]?g["chart.tickmarks"][i]:g["chart.tickmarks"];this.DrawTick(this.coords2[i],this.coords2[i][o][0],this.coords2[i][o][1],c.strokeStyle,!1,0==o?0:this.coords2[i][o-1][0],0==o?0:this.coords2[i][o-1][1],u,o)}}c.stroke(),c.fill()}}else if(g["chart.filled"]&&g["chart.filled.accumulative"]&&g["chart.curvy"]){for(var i=0;i<this.coordsSpline.length;i+=1){c.beginPath(),c.strokeStyle=g["chart.colors"][i],c.lineWidth=this.GetLineWidth(i);for(var o=0,s=this.coordsSpline[i].length;s>o;o+=1){var a=this.coordsSpline[i][o];0==o?c.moveTo(a[0],a[1]):c.lineTo(a[0],a[1])}c.stroke()}for(var i=0,s=this.coords2.length;s>i;i+=1)for(var o=0,d=this.coords2[i].length;d>o;++o)if("object"==typeof this.coords2[i][o]&&"number"==typeof this.coords2[i][o][0]&&"number"==typeof this.coords2[i][o][1]){var u="object"!=typeof g["chart.tickmarks"]||RGraph.is_null(g["chart.tickmarks"])?g["chart.tickmarks"]:g["chart.tickmarks"][i];c.strokeStyle=g["chart.colors"][i],this.DrawTick(this.coords2[i],this.coords2[i][o][0],this.coords2[i][o][1],g["chart.colors"][i],!1,0==o?0:this.coords2[i][o-1][0],0==o?0:this.coords2[i][o-1][1],u,o)}}if(c.restore(),c.beginPath(),g["chart.axesontop"]&&this.DrawAxes(),this.DrawLabels(),this.DrawRange(),g["chart.key"]&&g["chart.key"].length&&n.DrawKey&&n.DrawKey(this,g["chart.key"],g["chart.colors"]),g["chart.labels.above"]&&this.DrawAboveLabels(),n.DrawInGraphLabels(this),g["chart.filled"]&&g["chart.filled.range"]&&2==this.data.length){c.beginPath();var s=this.coords.length/2;c.lineWidth=g["chart.linewidth"],c.strokeStyle=g["chart.colors"][0];for(var i=0;s>i;++i)n.is_null(this.coords[i][1])||(0==i?c.moveTo(this.coords[i][0],this.coords[i][1]):c.lineTo(this.coords[i][0],this.coords[i][1]));c.stroke(),c.beginPath(),g["chart.colors"][1]&&(c.strokeStyle=g["chart.colors"][1]);for(var i=this.coords.length-1;i>=s;--i)n.is_null(this.coords[i][1])||(i==this.coords.length-1?c.moveTo(this.coords[i][0],this.coords[i][1]):c.lineTo(this.coords[i][0],this.coords[i][1]));c.stroke()}else g["chart.filled"]&&g["chart.filled.range"]&&alert("[LINE] You must have only two sets of data for a filled range chart");return g["chart.resizable"]&&n.AllowResizing(this),n.InstallEventListeners(this),this.firstDraw&&(n.fireCustomEvent(this,"onfirstdraw"),this.firstDraw=!1,this.firstDrawFunc()),n.FireCustomEvent(this,"ondraw"),this},this.drawAxes=this.DrawAxes=function(){if(!g["chart.noaxes"]){if(n.noShadow(this),c.lineWidth=g["chart.axis.linewidth"]+.001,c.lineCap="butt",c.strokeStyle=g["chart.axis.color"],c.beginPath(),0==g["chart.noxaxis"]&&("center"==g["chart.xaxispos"]?(c.moveTo(this.gutterLeft,Math.round(this.grapharea/2+this.gutterTop)),c.lineTo(l.width-this.gutterRight,Math.round(this.grapharea/2+this.gutterTop))):"top"===g["chart.xaxispos"]?(c.moveTo(this.gutterLeft,this.gutterTop),c.lineTo(l.width-this.gutterRight,this.gutterTop)):(c.moveTo(this.gutterLeft,l.height-this.gutterBottom),c.lineTo(l.width-this.gutterRight,l.height-this.gutterBottom))),0==g["chart.noyaxis"]&&("left"==g["chart.yaxispos"]?(c.moveTo(this.gutterLeft,this.gutterTop),c.lineTo(this.gutterLeft,l.height-this.gutterBottom)):(c.moveTo(l.width-this.gutterRight,this.gutterTop),c.lineTo(l.width-this.gutterRight,l.height-this.gutterBottom))),0==g["chart.noxaxis"]&&g["chart.numxticks"]>0){var t=(l.width-this.gutterLeft-this.gutterRight)/g["chart.numxticks"];for((!t||0>=t)&&(t=(l.width-this.gutterLeft-this.gutterRight)/(g["chart.labels"]&&g["chart.labels"].length?g["chart.labels"].length-1:10)),x=this.gutterLeft+("left"==g["chart.yaxispos"]?t:0);x<=l.width-this.gutterRight+1&&!("right"==g["chart.yaxispos"]&&x>=l.width-this.gutterRight-1);x+=t){if(g["chart.noendxtick"]){if("left"==g["chart.yaxispos"]&&x>=l.width-this.gutterRight-1)break;if("right"==g["chart.yaxispos"]&&x==this.gutterLeft)continue}var e="center"==g["chart.xaxispos"]?this.gutterTop+this.grapharea/2-3:l.height-this.gutterBottom,a="center"==g["chart.xaxispos"]?e+6:l.height-this.gutterBottom-(x%60==0?g["chart.largexticks"]*g["chart.tickdirection"]:g["chart.smallxticks"]*g["chart.tickdirection"]);if("center"==g["chart.xaxispos"])var e=Math.round(this.gutterTop+this.grapharea/2)-3,a=e+6;else if("bottom"==g["chart.xaxispos"]){var e=l.height-this.gutterBottom,a=l.height-this.gutterBottom-(x%60==0?g["chart.largexticks"]*g["chart.tickdirection"]:g["chart.smallxticks"]*g["chart.tickdirection"]);a+=0}else"top"==g["chart.xaxispos"]&&(e=this.gutterTop-3,a=this.gutterTop);c.moveTo(Math.round(x),e),c.lineTo(Math.round(x),a)}}else 0==g["chart.noyaxis"]&&g["chart.numyticks"]>0&&(g["chart.noendytick"]||("left"==g["chart.yaxispos"]?(c.moveTo(this.gutterLeft,Math.round(l.height-this.gutterBottom)),c.lineTo(this.gutterLeft-g["chart.smallyticks"],Math.round(l.height-this.gutterBottom))):(c.moveTo(l.width-this.gutterRight,Math.round(l.height-this.gutterBottom)),c.lineTo(l.width-this.gutterRight+g["chart.smallyticks"],Math.round(l.height-this.gutterBottom)))));var r=g["chart.numyticks"];if(0==g["chart.noyaxis"]&&r>0){var i=0,o=0;if("right"==g["chart.yaxispos"]&&(o=l.width-this.gutterLeft-this.gutterRight),"center"==g["chart.xaxispos"]){var s=this.grapharea/r,h="left"==g["chart.yaxispos"]?this.gutterLeft:l.width-this.gutterRight+g["chart.smallyticks"];for(y=this.gutterTop;y<this.grapharea/2+this.gutterTop;y+=s)y<this.grapharea/2+this.gutterTop&&(c.moveTo("left"==g["chart.yaxispos"]?this.gutterLeft-g["chart.smallyticks"]:l.width-this.gutterRight,Math.round(y)),c.lineTo(h,Math.round(y)));for(y=this.gutterTop+this.halfgrapharea+s;y<=this.grapharea+this.gutterTop;y+=s)c.moveTo("left"==g["chart.yaxispos"]?this.gutterLeft-g["chart.smallyticks"]:l.width-this.gutterRight,Math.round(y)),c.lineTo(h,Math.round(y))}else if("top"==g["chart.xaxispos"]){var s=this.grapharea/r,h="left"==g["chart.yaxispos"]?this.gutterLeft:l.width-this.gutterRight+g["chart.smallyticks"];for(y=this.gutterTop+s;y<=this.grapharea+this.gutterTop;y+=s)c.moveTo("left"==g["chart.yaxispos"]?this.gutterLeft-g["chart.smallyticks"]:l.width-this.gutterRight,Math.round(y)),c.lineTo(h,Math.round(y));g["chart.noxaxis"]&&0==g["chart.noendytick"]&&(c.moveTo("left"==g["chart.yaxispos"]?this.gutterLeft-g["chart.smallyticks"]:l.width-this.gutterRight,this.gutterTop),c.lineTo(h,this.gutterTop))}else{var h="left"==g["chart.yaxispos"]?this.gutterLeft-g["chart.smallyticks"]:l.width-this.gutterRight+g["chart.smallyticks"];for(y=this.gutterTop;y<l.height-this.gutterBottom&&r>i;y+=(l.height-this.gutterTop-this.gutterBottom)/r){c.moveTo(this.gutterLeft+o,Math.round(y)),c.lineTo(h,Math.round(y));var i=i+1}}}else 0==g["chart.noxaxis"]&&g["chart.numxticks"]>0&&("left"==g["chart.yaxispos"]?(c.moveTo(this.gutterLeft,"top"==g["chart.xaxispos"]?this.gutterTop:l.height-this.gutterBottom),c.lineTo(this.gutterLeft,"top"==g["chart.xaxispos"]?this.gutterTop-g["chart.smallxticks"]:l.height-this.gutterBottom+g["chart.smallxticks"])):(c.moveTo(l.width-this.gutterRight,l.height-this.gutterBottom),c.lineTo(l.width-this.gutterRight,l.height-this.gutterBottom+g["chart.smallxticks"])));c.stroke(),c.beginPath()}},this.drawLabels=this.DrawLabels=function(){c.strokeStyle="black",c.fillStyle=g["chart.text.color"],c.lineWidth=1,n.NoShadow(this);var t=g["chart.text.font"],e=g["chart.text.size"],a=g["chart.scale.decimals"],r=g["chart.ymin"];if(g["chart.ylabels"]&&null==g["chart.ylabels.specific"]){var i=g["chart.units.pre"],o=g["chart.units.post"],s="left"==g["chart.yaxispos"]?this.gutterLeft-5:l.width-this.gutterRight+5,h="left"==g["chart.yaxispos"]?"right":"left",u=this.scale2.labels.length,d=!1,f=g["chart.ylabels.inside"]?g["chart.ylabels.inside.color"]:null;if(1==g["chart.ylabels.inside"]&&"left"==h?(s-=10,h="right",d=!0):1==g["chart.ylabels.inside"]&&"right"==h&&(s+=10,h="left",d=!0),"center"==g["chart.xaxispos"]){for(var p=this.grapharea/2,m=0;m<this.scale2.labels.length;++m)n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop+p-(m+1)/u*p,valign:"center",halign:h,bounding:d,boundingFill:f,text:this.scale2.labels[m],tag:"scale"});for(var m=0;m<this.scale2.labels.length;++m)n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop+p+(m+1)/u*p,valign:"center",halign:h,bounding:d,boundingFill:f,text:"-"+this.scale2.labels[m],tag:"scale"});(1==g["chart.noxaxis"]||0!=r||g["chart.scale.zerostart"])&&n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop+p,text:g["chart.units.pre"]+r.toFixed(a)+g["chart.units.post"],bounding:d,boundingFill:f,valign:"center",halign:h,tag:"scale"})}else if("top"==g["chart.xaxispos"]){var p=this.grapharea/2;if(g["chart.scale.invert"])for(var m=0;m<this.scale2.labels.length;++m)n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop+m/this.scale2.labels.length*this.grapharea,valign:"center",halign:h,bounding:d,boundingFill:f,text:"-"+this.scale2.labels[this.scale2.labels.length-(m+1)],tag:"scale"});else for(var m=0;m<this.scale2.labels.length;++m)n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop+(m+1)/u*this.grapharea,valign:"center",halign:h,bounding:d,boundingFill:f,text:"-"+this.scale2.labels[m],tag:"scale"});(0!=g["chart.ymin"]||g["chart.noxaxis"]||g["chart.scale.invert"]||g["chart.scale.zerostart"])&&n.Text2(this,{font:t,size:e,x:s,y:g["chart.scale.invert"]?l.height-this.gutterBottom:this.gutterTop,text:(0!=g["chart.ymin"]?"-":"")+n.number_format(this,g["chart.ymin"].toFixed(a),i,o),valign:"center",halign:h,bounding:d,boundingFill:f,tag:"scale"})}else{if(g["chart.scale.invert"]){n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop,valign:"center",halign:h,bounding:d,boundingFill:f,text:n.number_format(this,this.min.toFixed(g["chart.scale.decimals"]),i,o),tag:"scale"});for(var m=0,y=this.scale2.labels.length;y>m;++m)n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop+(m+1)/this.scale2.labels.length*this.grapharea,valign:"center",halign:h,bounding:d,boundingFill:f,text:this.scale2.labels[m],tag:"scale"})
}else for(var m=0,y=this.scale2.labels.length;y>m;++m)n.Text2(this,{font:t,size:e,x:s,y:this.gutterTop+m/this.scale2.labels.length*this.grapharea,valign:"center",halign:h,bounding:d,boundingFill:f,text:this.scale2.labels[this.scale2.labels.length-(m+1)],tag:"scale"});(0!=g["chart.ymin"]&&!g["chart.scale.invert"]||g["chart.scale.zerostart"]||g["chart.noxaxis"])&&n.Text2(this,{font:t,size:e,x:s,y:g["chart.scale.invert"]?this.gutterTop:l.height-this.gutterBottom,text:n.number_format(this,g["chart.ymin"].toFixed(g["chart.scale.decimals"]),i,o),valign:"center",halign:h,bounding:d,boundingFill:f,tag:"scale"})}1==g["chart.noxaxis"]&&null==g["chart.ymin"]&&"center"!=g["chart.xaxispos"]&&0==g["chart.noendytick"]&&n.Text2(this,{font:t,size:e,x:s,y:"top"==g["chart.xaxispos"]?this.gutterTop:l.height-this.gutterBottom,text:g["chart.units.pre"]+0..toFixed(g["chart.scale.decimals"])+g["chart.units.post"],valign:"center",halign:h,bounding:d,boundingFill:f,tag:"scale"})}else if(g["chart.ylabels"]&&"object"==typeof g["chart.ylabels.specific"]){var v=(this.grapharea/g["chart.ylabels.specific"].length,"left"==g["chart.yaxispos"]?"right":"left"),d=!1,f=null,r=null!=g["chart.ymin"]&&g["chart.ymin"];if("left"==g["chart.yaxispos"]){var b=this.gutterLeft-5;g["chart.ylabels.inside"]&&(b+=10,v="left",d=!0,f="rgba(255,255,255,0.5)")}else if("right"==g["chart.yaxispos"]){var b=l.width-this.gutterRight+5;g["chart.ylabels.inside"]&&(b-=10,v="right",d=!0,f="rgba(255,255,255,0.5)")}if("center"==g["chart.xaxispos"]){for(var m=0;m<g["chart.ylabels.specific"].length;++m){var x=this.gutterTop+this.grapharea/(2*(g["chart.ylabels.specific"].length-1))*m;if(r&&r>0){var x=this.grapharea/2/(g["chart.ylabels.specific"].length-(r?1:0))*m;x+=this.gutterTop}n.Text2(this,{font:t,size:e,x:b,y:x,text:String(g["chart.ylabels.specific"][m]),valign:"center",halign:v,bounding:d,boundingFill:f,tag:"ylabels.specific"})}for(var R=n.array_reverse(g["chart.ylabels.specific"]),m=0;m<R.length;++m){var x=this.grapharea/2+this.gutterTop+this.grapharea/(2*(R.length-1))*m;n.Text2(this,{font:t,size:e,x:b,y:x,text:0==m?"":String(R[m]),valign:"center",halign:v,bounding:d,boundingFill:f,tag:"ylabels.specific"})}}else if("top"==g["chart.xaxispos"])for(var R=n.array_reverse(g["chart.ylabels.specific"]),m=0;m<R.length;++m){var x=this.grapharea/(R.length-1)*m;x+=this.gutterTop,n.Text2(this,{font:t,size:e,x:b,y:x,text:String(R[m]),valign:"center",halign:v,bounding:d,boundingFill:f,tag:"ylabels.specific"})}else for(var m=0;m<g["chart.ylabels.specific"].length;++m){var x=this.gutterTop+this.grapharea/(g["chart.ylabels.specific"].length-1)*m;n.Text2(this,{font:t,size:e,x:b,y:x,text:String(g["chart.ylabels.specific"][m]),valign:"center",halign:v,bounding:d,boundingFill:f,tag:"ylabels.specific"})}}if(g["chart.labels"]&&g["chart.labels"].length>0){var G=5,_=!1,f=null,k=0,w="top",v="center";g["chart.xlabels.inside"]&&(G=-5,_=!0,f=g["chart.xlabels.inside.color"],w="bottom"),"top"==g["chart.xaxispos"]&&(w="bottom",G+=2),"number"==typeof g["chart.text.angle"]&&g["chart.text.angle"]>0&&(k=-1*g["chart.text.angle"],w="center",v="right",G=10,"top"==g["chart.xaxispos"]&&(G=10)),c.fillStyle=g["chart.text.color"];var T=g["chart.labels"].length;for(m=0;T>m;++m)if(g["chart.labels"][m]){var S=(l.width-this.gutterLeft-this.gutterRight-2*g["chart.hmargin"])/(T-1)*m;S+=this.gutterLeft+g["chart.hmargin"],0!==this.data.length&&this.data[0]&&g["chart.labels"].length==this.data[0].length||(S=this.gutterLeft+g["chart.hmargin"]+(l.width-this.gutterLeft-this.gutterRight-2*g["chart.hmargin"])*(m/(g["chart.labels"].length-1))),S||(S=this.gutterLeft+g["chart.hmargin"]),"top"==g["chart.xaxispos"]&&g["chart.text.angle"]>0&&(v="left"),0!=g["chart.text.angle"]&&(v="right"),n.Text2(this,{font:t,size:e,x:S,y:"top"==g["chart.xaxispos"]?this.gutterTop-G-(g["chart.xlabels.inside"]?-22:0):l.height-this.gutterBottom+G,text:String(g["chart.labels"][m]),valign:w,halign:v,bounding:_,boundingFill:f,angle:k,tag:"labels"})}}c.stroke(),c.fill()},this.drawLine=this.DrawLine=function(t,e,a,r,i,o){if(g["chart.animation.unfold.y"]&&1!=g["chart.animation.factor"])for(var s=0;s<t.length;++s)t[s]*=g["chart.animation.factor"];var h=!1,u=null,d=0;c.lineWidth=1;var f=[];if(o>0)var p=this.coords2[o-1];var m=(l.width-2*g["chart.hmargin"]-this.gutterLeft-this.gutterRight)/(t.length-1);for(s=0,R=t.length;R>s;s+=1){var y=t[s],u=this.getYCoord(y);(null==t[s]||"bottom"==g["chart.xaxispos"]&&t[s]<this.min&&!g["chart.outofbounds"]||"center"==g["chart.xaxispos"]&&t[s]<-1*this.max&&!g["chart.outofbounds"]||(t[s]<this.min&&"center"!==g["chart.xaxispos"]||t[s]>this.max)&&!g["chart.outofbounds"])&&(u=null),c.lineCap="round",c.lineJoin="round",s>0?d+=m:d=g["chart.hmargin"]+this.gutterLeft,g["chart.animation.unfold.x"]&&(d*=g["chart.animation.factor"],d<g["chart.gutter.left"]&&(d=g["chart.gutter.left"])),this.coords.push([d,u]),f.push([d,u])}c.stroke(),this.coords2[o]=f,n.ISOLD&&g["chart.shadow"]&&this.DrawIEShadow(f,c.shadowColor),c.beginPath(),c.strokeStyle="rgba(0,0,0,0)",a&&(c.fillStyle=a);var v=g["chart.stepped"],b=g["chart.filled"];if("top"==g["chart.xaxispos"])var x=this.gutterTop;else if("center"==g["chart.xaxispos"])var x=this.gutterTop+this.grapharea/2;else if("bottom"==g["chart.xaxispos"])var x=l.height-this.gutterBottom;for(var s=0,R=f.length;R>s;s+=1){d=f[s][0],u=f[s][1];var G=f[s-1]?f[s-1][1]:null,_=s+1==f.length;!g["chart.outofbounds"]&&(G<this.gutterTop||G>l.height-this.gutterBottom)&&(h=!0),0==s||h||!u||!G||G<this.gutterTop?(g["chart.filled"]&&!g["chart.filled.range"]?(g["chart.outofbounds"]&&null!==G&&null!==u||c.moveTo(d+1,x),"top"==g["chart.xaxispos"]&&c.moveTo(d+1,x),v&&s>0&&c.lineTo(d,f[s-1][1]),c.lineTo(d,u)):n.ISOLD&&null==u||c.moveTo(d+1,u),h=null==u?!0:!1):(v&&c.lineTo(d,f[s-1][1]),u>=this.gutterTop&&u<=l.height-this.gutterBottom||g["chart.outofbounds"]?(_&&g["chart.filled"]&&!g["chart.filled.range"]&&"right"==g["chart.yaxispos"]&&(d-=1),v&&_?v&&_&&c.lineTo(d,u):(c.lineTo(d,u),b&&f[s+1]&&null==f[s+1][1]&&c.lineTo(d,x)),h=!1):h=!0)}if(g["chart.filled"]&&!g["chart.filled.range"]&&!g["chart.curvy"]){{g["chart.fillstyle"]}if(o>0&&g["chart.filled.accumulative"]){c.lineTo(d,p?p[s-1][1]:l.height-this.gutterBottom-1+("center"==g["chart.xaxispos"]?(l.height-this.gutterTop-this.gutterBottom)/2:0));for(var k=s-1;k>=0;--k)c.lineTo(0==k?p[k][0]+1:p[k][0],p[k][1])}else if("top"==g["chart.xaxispos"])c.lineTo(d,g["chart.gutter.top"]+1),c.lineTo(f[0][0],g["chart.gutter.top"]+1);else if("number"==typeof f[s-1][1]){var w="center"==g["chart.xaxispos"]?(l.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop:l.height-this.gutterBottom;c.lineTo(d,w),c.lineTo(f[0][0],w)}c.fillStyle=a,c.fill(),c.beginPath()}c.stroke(),g["chart.backdrop"]&&this.DrawBackdrop(f,e),c.save(),c.beginPath(),c.rect(0,0,l.width*g["chart.animation.trace.clip"],l.height),c.clip(),this.SetShadow(o),this.RedrawLine(f,e,r,o),c.stroke(),n.NoShadow(this);for(var s=0;s<f.length;++s)if(s=Number(s),c.strokeStyle=e,v&&s==f.length-1&&c.beginPath(),"endcircle"!=i&&"endsquare"!=i&&"filledendsquare"!=i&&"endtick"!=i&&"endtriangle"!=i&&"arrow"!=i&&"filledarrow"!=i||0==s&&"arrow"!=i&&"filledarrow"!=i||s==f.length-1){var T=0>=s?null:f[s-1][0],G=0>=s?null:f[s-1][1];this.DrawTick(t,f[s][0],f[s][1],e,!1,T,G,i,s)}c.restore(),c.beginPath(),c.arc(l.width+5e4,l.height+5e4,2,0,6.38,1)},this.drawTick=this.DrawTick=function(t,e,a,r,i,o,s,h,u){if(g["chart.line.visible"]){if(n.is_null(a))return!1;if(!(a>l.height-this.gutterBottom&&!g["chart.outofbounds"]||a<this.gutterTop&&!g["chart.outofbounds"])){c.beginPath();var d=0;if(c.lineWidth=g["chart.tickmarks.linewidth"]?g["chart.tickmarks.linewidth"]:g["chart.linewidth"],c.strokeStyle=i?g["chart.shadow.color"]:c.strokeStyle,c.fillStyle=i?g["chart.shadow.color"]:c.strokeStyle,"circle"==h||"filledcircle"==h||"endcircle"==h)("circle"==h||"filledcircle"==h||"endcircle"==h&&(0==u||u==t.length-1))&&(c.beginPath(),c.arc(e+d,a+d,g["chart.ticksize"],0,360/(180/n.PI),!1),c.fillStyle="filledcircle"==h?i?g["chart.shadow.color"]:c.strokeStyle:i?g["chart.shadow.color"]:"white",c.stroke(),c.fill());else if("halftick"==h)c.beginPath(),c.moveTo(Math.round(e),a),c.lineTo(Math.round(e),a+g["chart.ticksize"]),c.stroke();else if("tick"==h)c.beginPath(),c.moveTo(Math.round(e),a-g["chart.ticksize"]),c.lineTo(Math.round(e),a+g["chart.ticksize"]),c.stroke();else if("endtick"!=h||0!=u&&u!=t.length-1)if("cross"==h){c.beginPath();var p=g["chart.ticksize"];c.moveTo(e-p,a-p),c.lineTo(e+p,a+p),c.moveTo(e+p,a-p),c.lineTo(e-p,a+p),c.stroke()}else if("triangle"==h||"filledtriangle"==h||"endtriangle"==h&&(0==u||u==t.length-1))c.beginPath(),c.fillStyle="filledtriangle"==h?i?g["chart.shadow.color"]:c.strokeStyle:"white",c.moveTo(Math.round(e-g["chart.ticksize"]),a+g["chart.ticksize"]),c.lineTo(Math.round(e),a-g["chart.ticksize"]),c.lineTo(Math.round(e+g["chart.ticksize"]),a+g["chart.ticksize"]),c.closePath(),c.stroke(),c.fill();else if("borderedcircle"==h||"dot"==h)c.lineWidth=1,c.strokeStyle=g["chart.tickmarks.dot.color"],c.fillStyle=g["chart.tickmarks.dot.color"],c.beginPath(),c.arc(e,a,g["chart.ticksize"],0,360/(180/n.PI),!1),c.closePath(),c.fill(),c.stroke(),c.beginPath(),c.fillStyle=r,c.strokeStyle=r,c.arc(e,a,g["chart.ticksize"]-2,0,360/(180/n.PI),!1),c.closePath(),c.fill(),c.stroke();else if("square"==h||"filledsquare"==h||"endsquare"==h&&(0==u||u==t.length-1)||"filledendsquare"==h&&(0==u||u==t.length-1))c.fillStyle="white",c.strokeStyle=c.strokeStyle,c.beginPath(),c.rect(Math.round(e-g["chart.ticksize"]),Math.round(a-g["chart.ticksize"]),2*g["chart.ticksize"],2*g["chart.ticksize"]),"filledsquare"==h||"filledendsquare"==h?(c.fillStyle=i?g["chart.shadow.color"]:c.strokeStyle,c.rect(Math.round(e-g["chart.ticksize"]),Math.round(a-g["chart.ticksize"]),2*g["chart.ticksize"],2*g["chart.ticksize"])):("square"==h||"endsquare"==h)&&(c.fillStyle=i?g["chart.shadow.color"]:"white",c.rect(Math.round(e-g["chart.ticksize"]+1),Math.round(a-g["chart.ticksize"]+1),2*g["chart.ticksize"]-2,2*g["chart.ticksize"]-2)),c.stroke(),c.fill();else if("filledarrow"==h){var m=Math.abs(e-o),y=Math.abs(a-s);if(s>a)var v=Math.atan(m/y)+1.57;else var v=Math.atan(y/m)+3.14;c.beginPath(),c.moveTo(Math.round(e),Math.round(a)),c.arc(Math.round(e),Math.round(a),7,v-.5,v+.5,!1),c.closePath(),c.stroke(),c.fill()}else if("arrow"==h){var b=c.lineWidth,m=Math.abs(e-o),y=Math.abs(a-s);if(c.lineWidth,s>a)var v=Math.atan(m/y)+1.57;else var v=Math.atan(y/m)+3.14;c.beginPath(),c.moveTo(Math.round(e),Math.round(a)),c.arc(Math.round(e),Math.round(a),7,v-.5-(f.all?.1:.01),v-.4,!1),c.moveTo(Math.round(e),Math.round(a)),c.arc(Math.round(e),Math.round(a),7,v+.5+(f.all?.1:.01),v+.5,!0),c.stroke(),c.fill(),c.lineWidth=b}else if("string"!=typeof h||"image:"!==h.substr(0,6)&&"data:"!==h.substr(0,5)&&"/"!==h.substr(0,1)&&"../"!==h.substr(0,3)&&"images/"!==h.substr(0,7))"function"==typeof h&&h(this,t,t[u],u,e,a,r,o,s);else{var x=new Image;x.src="image:"===h.substr(0,6)?h.substr(6):h,x.onload=function(){"center"===g["chart.tickmarks.image.halign"]&&(e-=this.width/2),"right"===g["chart.tickmarks.image.halign"]&&(e-=this.width),"center"===g["chart.tickmarks.image.valign"]&&(a-=this.height/2),"bottom"===g["chart.tickmarks.image.valign"]&&(a-=this.height),e+=g["chart.tickmarks.image.offsetx"],a+=g["chart.tickmarks.image.offsety"],c.drawImage(this,e,a)}}else c.beginPath(),c.moveTo(Math.round(e),a-g["chart.ticksize"]),c.lineTo(Math.round(e),a+g["chart.ticksize"]),c.stroke()}}},this.drawRange=this.DrawRange=function(){if(g["chart.filled.range"]&&g["chart.filled"]&&g["chart.line.visible"]){n.is_null(g["chart.filled.range.threshold"])&&(g["chart.filled.range.threshold"]=this.ymin,g["chart.filled.range.threshold.colors"]=[g["chart.fillstyle"],g["chart.fillstyle"]]);for(var t=0;2>t;++t){var e=(g["chart.filled.range.threshold.colors"],this.getYCoord(g["chart.filled.range.threshold"]));c.save(),0==t?(c.beginPath(),c.rect(0,0,l.width,e),c.clip()):(c.beginPath(),c.rect(0,e,l.width,l.height),c.clip()),c.beginPath(),c.fillStyle=1==t?g["chart.filled.range.threshold.colors"][1]:g["chart.filled.range.threshold.colors"][0],c.lineWidth=1;for(var a=this.coords.length/2,r=0;a>r;++r)n.is_null(this.coords[r][1])||(0==r?c.moveTo(this.coords[r][0],this.coords[r][1]):c.lineTo(this.coords[r][0],this.coords[r][1]));for(var r=this.coords.length-1;r>=a;--r)n.is_null(this.coords[r][1])?c.moveTo(this.coords[r][0],this.coords[r][1]):c.lineTo(this.coords[r][0],this.coords[r][1]);c.fill(),c.restore()}}},this.redrawLine=this.RedrawLine=function(t,e,a,r){if(!g["chart.noredraw"]&&!g["chart.filled.range"]){if(c.strokeStyle="object"==typeof e&&e&&-1==e.toString().indexOf("CanvasGradient")?e[0]:e,c.lineWidth=a,g["chart.line.visible"]||(c.strokeStyle="rgba(0,0,0,0)"),!n.ISOLD&&(g["chart.curvy"]||g["chart.spline"]))return void this.DrawCurvyLine(t,g["chart.line.visible"]?e:"rgba(0,0,0,0)",a,r);c.beginPath();for(var i=t.length,o=l.width,s=l.height,h=!1,u=0;i>u;++u){var d=(t[u][0],t[u][1]);if(u>0)var f=t[u-1][0],p=t[u-1][1];!(0==u&&t[u]||d<this.gutterTop||p<this.gutterTop||d>s-this.gutterBottom||u>0&&f>o-this.gutterRight||u>0&&p>s-this.gutterBottom||null==p||1==h)||g["chart.outofbounds"]&&null!=d&&null!=p?(g["chart.stepped"]&&u>0&&c.lineTo(t[u][0],t[u-1][1]),c.lineTo(t[u][0],t[u][1]),h=!1):(n.ISOLD&&null==d||c.moveTo(t[u][0],t[u][1]),h=!1)}if(g["chart.colors.alternate"]&&"object"==typeof e&&e[0]&&e[1])for(var u=1;i>u;++u){var f=t[u-1][0],p=t[u-1][1];null!=p&&null!=t[u][1]&&(c.beginPath(),c.strokeStyle=e[t[u][1]<p?0:1],c.lineWidth=g["chart.linewidth"],c.moveTo(f,p),c.lineTo(t[u][0],t[u][1]),c.stroke())}}},this.drawIEShadow=this.DrawIEShadow=function(t,e){var a=g["chart.shadow.offsetx"],r=g["chart.shadow.offsety"];c.lineWidth=g["chart.linewidth"],c.strokeStyle=e,c.beginPath();for(var i=0;i<t.length;++i){var o=n.isNull(t[i][1]),s=n.isNull(t[i-1])||n.isNull(t[i-1][1]);0==i||o||s?o||c.moveTo(t[i][0]+a,t[i][1]+r):c.lineTo(t[i][0]+a,t[i][1]+r)}c.stroke()},this.drawBackdrop=this.DrawBackdrop=function(t,e){var a=g["chart.backdrop.size"];c.lineWidth=a,c.globalAlpha=g["chart.backdrop.alpha"],c.strokeStyle=e;var r=[];if(c.beginPath(),g["chart.curvy"]&&!n.ISOLD){for(var i=0;i<t.length;++i)r.push(t[i][1]);this.DrawSpline(c,r,e,null)}else{c.moveTo(t[0][0],t[0][1]);for(var o=1;o<t.length;++o)c.lineTo(t[o][0],t[o][1])}c.stroke(),c.globalAlpha=1,n.NoShadow(this)},this.getLineWidth=this.GetLineWidth=function(t){var e=g["chart.linewidth"];return"number"==typeof e?e:"object"==typeof e?e[t]?e[t]:e[0]:void 0},this.getShape=this.getPoint=function(t){var e=this,r=RGraph,i=(a=t.target,context=this.context,this.properties),o=r.getMouseXY(t),s=o[0],h=o[1];arguments[1]&&(e=arguments[1]);for(var n=0;n<e.coords.length;++n){var l=e.coords[n][0],c=e.coords[n][1];if(s<=l+i["chart.tooltips.hotspot.size"]&&s>=l-i["chart.tooltips.hotspot.size"]&&h<=c+i["chart.tooltips.hotspot.size"]&&h>=c-i["chart.tooltips.hotspot.size"]){if(r.parseTooltipText)var g=r.parseTooltipText(i["chart.tooltips"],n);for(var u=0,d=n;d+1>this.data[u].length;)d-=this.data[u].length,u++;return{0:e,1:l,2:c,3:n,object:e,x:l,y:c,index:n,tooltip:g,dataset:u,index_adjusted:d}}if(1==i["chart.tooltips.hotspot.xonly"]&&s<=l+i["chart.tooltips.hotspot.size"]&&s>=l-i["chart.tooltips.hotspot.size"]){var g=r.parseTooltipText(i["chart.tooltips"],n);return{0:e,1:l,2:c,3:n,object:e,x:l,y:c,index:n,tooltip:g}}}},this.drawAboveLabels=this.DrawAboveLabels=function(){var t=g["chart.labels.above.size"],e=g["chart.text.font"],a=g["chart.units.pre"],r=g["chart.units.post"],i=g["chart.labels.above.decimals"];c.beginPath();for(var o=0,s=this.coords.length;s>o;o+=1){var h=this.coords[o];n.Text2(this,{font:e,size:t,x:h[0],y:h[1]-5-t,text:n.numberFormat(this,"number"==typeof i?this.data_arr[o].toFixed(i):this.data_arr[o],a,r),valign:"center",halign:"center",bounding:!0,boundingFill:"white",tag:"labels.above"})}},this.drawCurvyLine=this.DrawCurvyLine=function(t,e,a,r){if(!n.ISOLD){for(var i=[],o=0;o<t.length;++o)i.push(t[o][1]);if(g["chart.filled"]){if(c.beginPath(),c.moveTo(t[0][0],l.height-this.gutterBottom),this.DrawSpline(c,i,e,r),g["chart.filled.accumulative"]&&r>0)for(var o=this.coordsSpline[r-1].length-1;o>=0;o-=1)c.lineTo(this.coordsSpline[r-1][o][0],this.coordsSpline[r-1][o][1]);else c.lineTo(t[t.length-1][0],l.height-this.gutterBottom);c.fill()}c.beginPath(),this.DrawSpline(c,i,e,r),c.stroke()}},this.getValue=function(t){if(2==t.length)var e=(t[0],t[1]);else var a=n.getMouseXY(t),e=(a[0],a[1]);var r=this,i=g["chart.xaxispos"];if(e<g["chart.gutter.top"])return"bottom"==i||"center"==i?this.max:this.min;if(e>l.height-g["chart.gutter.bottom"])return"bottom"==i?this.min:this.max;if("center"==g["chart.xaxispos"]){var o=(r.grapharea/2-(e-g["chart.gutter.top"]))/r.grapharea*(r.max-r.min);return o*=2,o>0?o+=this.min:o-=this.min,o}if("top"==g["chart.xaxispos"]){var o=(r.grapharea-(e-g["chart.gutter.top"]))/r.grapharea*(r.max-r.min);return o=-1*Math.abs(r.max-o)}var o=(r.grapharea-(e-g["chart.gutter.top"]))/r.grapharea*(r.max-r.min);return o+=r.min},this.highlight=this.Highlight=function(t){g["chart.tooltips.highlight"]&&n.Highlight.Point(this,t)},this.getObjectByXY=function(t){var e=n.getMouseXY(t);return e[0]>g["chart.gutter.left"]-5&&e[0]<l.width-g["chart.gutter.right"]+5&&e[1]>g["chart.gutter.top"]-5&&e[1]<l.height-g["chart.gutter.bottom"]+5?this:void 0},this.adjusting_mousemove=this.Adjusting_mousemove=function(t){if(g["chart.adjustable"]&&n.Registry.Get("chart.adjusting")&&n.Registry.Get("chart.adjusting").uid==this.uid){var e=Number(this.getValue(t)),a=n.Registry.Get("chart.adjusting.shape");a&&(n.Registry.Set("chart.adjusting.shape",a),this.original_data[a.dataset][a.index_adjusted]=Number(e),n.redrawCanvas(t.target),n.fireCustomEvent(this,"onadjust"))}},this.getYCoord=function(t){if("number"!=typeof t)return null;var e,a=g["chart.xaxispos"];if("top"==a)e=(t-this.min)/(this.max-this.min)*this.grapharea,g["chart.scale.invert"]&&(e=this.grapharea-e),e+=this.gutterTop;else if("center"==a)e=(t-this.min)/(this.max-this.min)*(this.grapharea/2),e=this.grapharea/2-e,e+=this.gutterTop;else{if((t<this.min||t>this.max)&&0==g["chart.outofbounds"])return null;e=(t-this.min)/(this.max-this.min)*this.grapharea,g["chart.scale.invert"]&&(e=this.grapharea-e),e=l.height-this.gutterBottom-e}return e},this.positionTooltip=function(t,e,a,r){var i=t.coords[r.__index__][0],o=(t.coords[r.__index__][1],n.getCanvasXY(t.canvas)),s=(g["chart.gutter.left"],g["chart.gutter.top"],r.offsetWidth);r.style.left=0,r.style.top=parseInt(r.style.top)-9+"px",r.style.overflow="";var h=new Image;h.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC",h.style.position="absolute",h.id="__rgraph_tooltip_pointer__",h.style.top=r.offsetHeight-2+"px",r.appendChild(h),o[0]+i-s/2<10?(r.style.left=o[0]+i-.2*s+"px",h.style.left=.2*s-8.5+"px"):o[0]+i+s/2>f.body.offsetWidth?(r.style.left=o[0]+i-.8*s+"px",h.style.left=.8*s-8.5+"px"):(r.style.left=o[0]+i-.5*s+"px",h.style.left=.5*s-8.5+"px")},this.drawSpline=this.DrawSpline=function(t,e,a,r){function i(t,e,a,r,i){return.5*(2*a+(0-e+r)*t+((2*e-5*a+4*r-i)*t*t+(0-e+3*a-3*r+i)*t*t*t))}this.coordsSpline[r]=[];var o=[],s=g["chart.gutter.left"],h=g["chart.gutter.right"],n=g["chart.hmargin"],u=(l.width-(s+h)-2*n)/(e.length-1);c.strokeStyle=a;for(var d=0,f=e.length;f>d;d+=1)"object"==typeof e[d]&&e[d]&&2==e[d].length&&(e[d]=Number(e[d][1]));for(var p=[e[0]],d=0;d<e.length;++d)p.push(e[d]);p.push(e[e.length-1]+(e[e.length-1]-e[e.length-2]));for(var m=1;m<p.length-2;++m)for(var y=0;10>y;++y){var v=i(y/10,p[m-1],p[m],p[m+1],p[m+2]);o.push((m-1)*u+y*(u/10)+s+n),c.lineTo(o[o.length-1],v),"number"==typeof r&&this.coordsSpline[r].push([o[o.length-1],v])}c.lineTo((m-1)*u+s+n,p[m]),"number"==typeof r&&this.coordsSpline[r].push([(m-1)*u+s+n,p[m]])},this.parseColors=function(){0===this.original_colors.length&&(this.original_colors["chart.colors"]=RGraph.array_clone(g["chart.colors"]),this.original_colors["chart.fillstyle"]=RGraph.array_clone(g["chart.fillstyle"]),this.original_colors["chart.key.colors"]=RGraph.array_clone(g["chart.key.colors"]),this.original_colors["chart.background.barcolor1"]=g["chart.background.barcolor1"],this.original_colors["chart.background.barcolor2"]=g["chart.background.barcolor2"],this.original_colors["chart.background.grid.color"]=g["chart.background.grid.color"],this.original_colors["chart.background.color"]=g["chart.background.color"],this.original_colors["chart.text.color"]=g["chart.text.color"],this.original_colors["chart.crosshairs.color"]=g["chart.crosshairs.color"],this.original_colors["chart.annotate.color"]=g["chart.annotate.color"],this.original_colors["chart.title.color"]=g["chart.title.color"],this.original_colors["chart.title.yaxis.color"]=g["chart.title.yaxis.color"],this.original_colors["chart.key.background"]=g["chart.key.background"],this.original_colors["chart.axis.color"]=g["chart.axis.color"],this.original_colors["chart.highlight.fill"]=g["chart.highlight.fill"]);for(var t=0;t<g["chart.colors"].length;++t)"object"==typeof g["chart.colors"][t]&&g["chart.colors"][t][0]&&g["chart.colors"][t][1]?(g["chart.colors"][t][0]=this.parseSingleColorForGradient(g["chart.colors"][t][0]),g["chart.colors"][t][1]=this.parseSingleColorForGradient(g["chart.colors"][t][1])):g["chart.colors"][t]=this.parseSingleColorForGradient(g["chart.colors"][t]);if(g["chart.fillstyle"])if("string"==typeof g["chart.fillstyle"])g["chart.fillstyle"]=this.parseSingleColorForGradient(g["chart.fillstyle"],"vertical");else for(var t=0;t<g["chart.fillstyle"].length;++t)g["chart.fillstyle"][t]=this.parseSingleColorForGradient(g["chart.fillstyle"][t],"vertical");if(!n.is_null(g["chart.key.colors"]))for(var t=0;t<g["chart.key.colors"].length;++t)g["chart.key.colors"][t]=this.parseSingleColorForGradient(g["chart.key.colors"][t]);for(var e=["chart.background.barcolor1","chart.background.barcolor2","chart.background.grid.color","chart.background.color","chart.text.color","chart.crosshairs.color","chart.annotate.color","chart.title.color","chart.title.yaxis.color","chart.key.background","chart.axis.color","chart.highlight.fill"],t=0;t<e.length;++t)g[e[t]]=this.parseSingleColorForGradient(g[e[t]])},this.reset=function(){},this.parseSingleColorForGradient=function(t){if(!t||"string"!=typeof t)return t;var e="string"==typeof arguments[1]?arguments[1]:"vertical";if("string"==typeof t&&t.match(/^gradient\((.*)\)$/i)){var a=RegExp.$1.split(":");if("horizontal"==e)var r=c.createLinearGradient(0,0,l.width,0);else var r=c.createLinearGradient(0,l.height-g["chart.gutter.bottom"],0,g["chart.gutter.top"]);var i=1/(a.length-1);r.addColorStop(0,n.trim(a[0]));for(var o=1;o<a.length;++o)r.addColorStop(o*i,n.trim(a[o]))}return r?r:t},this.setShadow=this.SetShadow=function(t){if(g["chart.shadow"]){var e=g["chart.shadow.color"];"object"==typeof e&&e[t-1]?c.shadowColor=e[t]:"object"==typeof e?c.shadowColor=e[0]:"string"==typeof e&&(c.shadowColor=e),c.shadowBlur=g["chart.shadow.blur"],c.shadowOffsetX=g["chart.shadow.offsetx"],c.shadowOffsetY=g["chart.shadow.offsety"]}},this.interactiveKeyHighlight=function(t){var e=this.coords2[t];if(e){var a=c.lineWidth,r=c.lineCap;if(c.lineWidth=g["chart.linewidth"]+10,c.lineCap="round",c.strokeStyle=g["chart.key.interactive.highlight.chart.stroke"],c.beginPath(),g["chart.curvy"])this.DrawSpline(c,e,g["chart.key.interactive.highlight.chart"],null);else for(var i=0,o=e.length;o>i;i+=1)0==i||n.is_null(e[i][1])||void 0!=typeof e[i-1][1]&&n.is_null(e[i-1][1])?c.moveTo(e[i][0],e[i][1]):c.lineTo(e[i][0],e[i][1]);c.stroke(),c.lineWidth=a,c.lineCap=r}},this.on=function(t,e){return"on"!==t.substr(0,2)&&(t="on"+t),this[t]=e,this},this.firstDrawFunc=function(){},this.trace=function(){var t=this,e="function"==typeof arguments[1]?arguments[1]:function(){},a=arguments[0]||{};a.frames&&(a.duration=a.frames/60*1e3),a.duration||(a.duration=1500),n.clear(t.canvas),n.redrawCanvas(t.canvas);var r=f.createElement("DIV"),i=n.getCanvasXY(t.canvas);r.id="__rgraph_trace_animation_"+n.random(0,4351623)+"__",r.style.left=i[0]+"px",r.style.top=i[1]+"px",r.style.width=t.Get("chart.gutter.left"),r.style.height=t.canvas.height+"px",r.style.position="absolute",r.style.overflow="hidden",f.body.appendChild(r),t.canvas.__rgraph_trace_div__=r;var s="__rgraph_line_trace_animation_"+n.random(0,99999999)+"__",h=f.createElement("CANVAS"),l=["WebkitTransform","MozTransform","OTransform","MSTransform","transform"];for(o in l){var c=l[o];"string"==typeof t.canvas.style[c]&&t.canvas.style[c]&&(h.style[c]=t.canvas.style[c])}t.canvas.__rgraph_line_canvas2__=h,h.width=t.canvas.width,h.height=t.canvas.height,h.style.position="absolute",h.style.left=0,h.style.top=0,h.noclear=!0,h.id=s,r.appendChild(h);var g=function(){var e=n.getCanvasXY(t.canvas);r.style.left=e[0]+"px",r.style.top=e[1]+"px"};window.addEventListener("resize",g,!1);var p=new n.Line(s,n.array_clone(t.original_data));n.ObjectRegistry.Remove(p);for(o in t.properties)"string"==typeof o&&p.Set(o,t.properties[o]);if(p.Set("labels",[]),p.Set("background.grid",!1),p.Set("background.barcolor1","rgba(0,0,0,0)"),p.Set("background.barcolor2","rgba(0,0,0,0)"),p.Set("ylabels",!1),p.Set("noaxes",!0),p.Set("title",""),p.Set("title.xaxis",""),p.Set("title.yaxis",""),p.Set("filled.accumulative",t.Get("chart.filled.accumulative")),t.Set("key",[]),p.Draw(),t.canvas.__rgraph_trace_obj2__=p,t.Set("line.visible",!1),t.Set("colors",["rgba(0,0,0,0)"]),t.Get("filled")){var m=t.Get("chart.fillstyle");t.Set("fillstyle","rgba(0,0,0,0)"),t.Set("animation.trace.original.fillstyle",m)}if(n.clear(t.canvas),n.redrawCanvas(t.canvas),t.canvas.__rgraph_trace_cover__)y=t.canvas.__rgraph_trace_cover__;else{var y=f.createElement("DIV");y.id="__rgraph_trace_animation_"+n.random(0,4351623)+"__",y.style.left=i[0]+"px",y.style.top=i[1]+"px",y.style.width=t.canvas.width+"px",y.style.height=t.canvas.height+"px",y.style.position="absolute",y.style.overflow="hidden",y.style.backgroundColor="rgba(0,0,0,0)",r.div2=y,t.canvas.__rgraph_trace_cover__=y,f.body.appendChild(y)}return trace_complete=function(t){var a=t.canvas.__rgraph_trace_obj2__;d.removeEventListener("resize",g,!1),r.style.display="none",y.style.display="none",t.Set("line.visible",!0),t.Set("filled",RGraph.array_clone(a.Get("chart.filled"))),t.Set("fillstyle",t.Get("chart.animation.trace.original.fillstyle")),t.Set("colors",RGraph.array_clone(a.Get("chart.colors"))),t.Set("key",RGraph.array_clone(a.Get("chart.key"))),RGraph.RedrawCanvas(t.canvas),t.canvas.__rgraph_trace_div__.style.display="none",t.canvas.__rgraph_line_canvas2__.style.display="none",t.canvas.__rgraph_trace_cover__.style.display="none",t.canvas.__rgraph_trace_div__=null,t.canvas.__rgraph_line_canvas2__=null,t.canvas.__rgraph_trace_cover__=null,e(t)},u("#"+r.id).animate({width:t.canvas.width-t.gutterRight+"px"},a.duration,function(){trace_complete(t)}),this},this.unfold=function(){function t(){g["chart.animation.factor"]=(1-s)*(i/r)+s,n.clear(e.canvas),n.redrawCanvas(e.canvas),r>i?(i++,n.Effects.updateCanvas(t)):o(e)}var e=this,a=arguments[0]?arguments[0]:{},r=a.frames?a.frames:30,i=0,o=arguments[1]?arguments[1]:function(){},s=g["chart.animation.unfold.initial"];return g["chart.animation.factor"]=g["chart.animation.unfold.initial"],t(),this},this.trace2=function(){function t(){n.clear(e.canvas),n.redrawCanvas(e.canvas),o++<i?(e.Set("animation.trace.clip",o/i),n.Effects.updateCanvas(t)):a(e)}var e=this,a=arguments[2],r=arguments[0]||{},i=r.frames||30,o=0,a=arguments[1]||function(){};return e.Set("animation.trace.clip",0),t(),this},this.foldtocenter=this.foldToCenter=function(){function t(){for(var a=0,l=e.data.length;l>a;++a)if(e.data[a].length)for(var c=0,g=e.data[a].length;g>c;++c){var u=e.original_data[a];u[c]=u[c]>s?h[a][c]-(h[a][c]-s)*(i/r):h[a][c]+(s-h[a][c])/r*i}n.clear(e.canvas),n.redrawCanvas(e.canvas),i++<r?n.Effects.updateCanvas(t):o(e)}var e=this,a=arguments[0]||{},r=a.frames||30,i=0,o=arguments[1]||function(){},s=e.scale2.max/2;e.Set("chart.ymax",e.scale2.max);var h=n.array_clone(e.original_data);return t(),this},this.unfoldFromCenterTrace=this.unfoldFromCenterTrace2=function(){var t=this,e=arguments[0]||{},a=e.frames||30,r=n.array_clone(t.original_data),i=arguments[1]||function(){};t.canvas.style.visibility="hidden",t.Draw();t.scale2.max;n.clear(t.canvas),t.canvas.style.visibility="visible";var o=function(){t.original_data=r,t.unfoldFromCenter({frames:a/2},i)},s="center"==t.Get("chart.xaxispos")?t.min:(t.max-t.min)/2+t.min;t.Set("chart.ymax",t.max);for(var h=0,l=t.original_data.length;l>h;++h)for(var c=0;c<t.original_data[h].length;++c)t.original_data[h][c]=t.Get("chart.filled")&&t.Get("chart.filled.accumulative")&&h>0?0:s;n.clear(t.canvas),t.trace2({frames:a/2},o)},this.unfoldFromCenter=function(){function t(){for(var a=0;a<h.length;++a)for(var o=0;o<h[a].length;++o)e.original_data[a][o]+=l[a][o];n.clear(e.canvas),n.redrawCanvas(e.canvas),--r>0?n.Effects.updateCanvas(t):(e.original_data=n.array_clone(h),n.clear(e.canvas),n.redrawCanvas(e.canvas),i(e))}var e=this,a=arguments[0]||{},r=a.frames||30,i=arguments[1]||function(){};e.canvas.style.visibility="hidden",e.Draw();var o=e.scale2.max;n.clear(e.canvas),e.canvas.style.visibility="visible";var s="center"===e.Get("chart.xaxispos")?g["chart.ymin"]:(e.max-e.min)/2+e.min,h=n.array_clone(e.original_data),l=null;if(e.Set("chart.ymax",o),!l){l=[];for(var c=0,u=h.length;u>c;++c){l[c]=[];for(var d=0,f=h[c].length;f>d;++d)g["chart.filled"]&&g["chart.filled.accumulative"]&&c>0?(l[c][d]=h[c][d]/r,e.original_data[c][d]=s):(l[c][d]=(h[c][d]-s)/r,e.original_data[c][d]=s)}}return t(),this},n.att(l),n.Register(this),i&&n.parseObjectStyleConfig(this,t.options)};